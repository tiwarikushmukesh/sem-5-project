"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@edgestore";
exports.ids = ["vendor-chunks/@edgestore"];
exports.modules = {

/***/ "(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/native.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/native.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    randomUUID: (crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID)\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9uYXRpdmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRCO0FBQzVCLGlFQUFlO0lBQ2JDLFlBQVlELDBEQUFpQjtBQUMvQixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yOF9ub3Rpb24tY2xvbmUvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9uYXRpdmUuanM/NDEwNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHJhbmRvbVVVSUQ6IGNyeXB0by5yYW5kb21VVUlEXG59OyJdLCJuYW1lcyI6WyJjcnlwdG8iLCJyYW5kb21VVUlEIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/native.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/regex.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/regex.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9yZWdleC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUscUhBQXFILEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yOF9ub3Rpb24tY2xvbmUvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9yZWdleC5qcz9iZjNmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IC9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/regex.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/rng.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/rng.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ rng)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\nlet poolPtr = rnds8Pool.length;\nfunction rng() {\n    if (poolPtr > rnds8Pool.length - 16) {\n        crypto__WEBPACK_IMPORTED_MODULE_0___default().randomFillSync(rnds8Pool);\n        poolPtr = 0;\n    }\n    return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9ybmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRCO0FBQzVCLE1BQU1DLFlBQVksSUFBSUMsV0FBVyxNQUFNLHFDQUFxQztBQUU1RSxJQUFJQyxVQUFVRixVQUFVRyxNQUFNO0FBQ2YsU0FBU0M7SUFDdEIsSUFBSUYsVUFBVUYsVUFBVUcsTUFBTSxHQUFHLElBQUk7UUFDbkNKLDREQUFxQixDQUFDQztRQUN0QkUsVUFBVTtJQUNaO0lBRUEsT0FBT0YsVUFBVU0sS0FBSyxDQUFDSixTQUFTQSxXQUFXO0FBQzdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjhfbm90aW9uLWNsb25lLy4vbm9kZV9tb2R1bGVzL0BlZGdlc3RvcmUvc2VydmVyL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcm5nLmpzP2U0M2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuY29uc3Qgcm5kczhQb29sID0gbmV3IFVpbnQ4QXJyYXkoMjU2KTsgLy8gIyBvZiByYW5kb20gdmFsdWVzIHRvIHByZS1hbGxvY2F0ZVxuXG5sZXQgcG9vbFB0ciA9IHJuZHM4UG9vbC5sZW5ndGg7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIGlmIChwb29sUHRyID4gcm5kczhQb29sLmxlbmd0aCAtIDE2KSB7XG4gICAgY3J5cHRvLnJhbmRvbUZpbGxTeW5jKHJuZHM4UG9vbCk7XG4gICAgcG9vbFB0ciA9IDA7XG4gIH1cblxuICByZXR1cm4gcm5kczhQb29sLnNsaWNlKHBvb2xQdHIsIHBvb2xQdHIgKz0gMTYpO1xufSJdLCJuYW1lcyI6WyJjcnlwdG8iLCJybmRzOFBvb2wiLCJVaW50OEFycmF5IiwicG9vbFB0ciIsImxlbmd0aCIsInJuZyIsInJhbmRvbUZpbGxTeW5jIiwic2xpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/rng.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/stringify.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/stringify.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   unsafeStringify: () => (/* binding */ unsafeStringify)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/validate.js\");\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */ const byteToHex = [];\nfor(let i = 0; i < 256; ++i){\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nfunction unsafeStringify(arr, offset = 0) {\n    // Note: Be careful editing this code!  It's been tuned for performance\n    // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n    return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + \"-\" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + \"-\" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + \"-\" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + \"-\" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n    // of the following:\n    // - One or more input array values don't map to a hex octet (leading to\n    // \"undefined\" in the uuid)\n    // - Invalid input values for the RFC `version` or `variant` fields\n    if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n        throw TypeError(\"Stringified UUID is invalid\");\n    }\n    return uuid;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9zdHJpbmdpZnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFDO0FBQ3JDOzs7Q0FHQyxHQUVELE1BQU1DLFlBQVksRUFBRTtBQUVwQixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSSxLQUFLLEVBQUVBLEVBQUc7SUFDNUJELFVBQVVFLElBQUksQ0FBQyxDQUFDRCxJQUFJLEtBQUksRUFBR0UsUUFBUSxDQUFDLElBQUlDLEtBQUssQ0FBQztBQUNoRDtBQUVPLFNBQVNDLGdCQUFnQkMsR0FBRyxFQUFFQyxTQUFTLENBQUM7SUFDN0MsdUVBQXVFO0lBQ3ZFLG9GQUFvRjtJQUNwRixPQUFPUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLENBQUMsR0FBR1AsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsRUFBRSxDQUFDLEdBQUdQLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEVBQUUsQ0FBQyxHQUFHUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLENBQUMsR0FBRyxNQUFNUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLENBQUMsR0FBR1AsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsRUFBRSxDQUFDLEdBQUcsTUFBTVAsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsRUFBRSxDQUFDLEdBQUdQLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEVBQUUsQ0FBQyxHQUFHLE1BQU1QLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEVBQUUsQ0FBQyxHQUFHUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLENBQUMsR0FBRyxNQUFNUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxHQUFHLENBQUMsR0FBR1AsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsR0FBRyxDQUFDLEdBQUdQLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEdBQUcsQ0FBQyxHQUFHUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxHQUFHLENBQUMsR0FBR1AsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsR0FBRyxDQUFDLEdBQUdQLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEdBQUcsQ0FBQztBQUNwZjtBQUVBLFNBQVNDLFVBQVVGLEdBQUcsRUFBRUMsU0FBUyxDQUFDO0lBQ2hDLE1BQU1FLE9BQU9KLGdCQUFnQkMsS0FBS0MsU0FBUyw0RUFBNEU7SUFDdkgsb0JBQW9CO0lBQ3BCLHdFQUF3RTtJQUN4RSwyQkFBMkI7SUFDM0IsbUVBQW1FO0lBRW5FLElBQUksQ0FBQ1Isd0RBQVFBLENBQUNVLE9BQU87UUFDbkIsTUFBTUMsVUFBVTtJQUNsQjtJQUVBLE9BQU9EO0FBQ1Q7QUFFQSxpRUFBZUQsU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovLzI4X25vdGlvbi1jbG9uZS8uL25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NlcnZlci9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3N0cmluZ2lmeS5qcz9lYzI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcbi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xuXG5jb25zdCBieXRlVG9IZXggPSBbXTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc2xpY2UoMSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgcmV0dXJuIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgM11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDVdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA3XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDhdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxM11dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNV1dO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIGNvbnN0IHV1aWQgPSB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQpOyAvLyBDb25zaXN0ZW5jeSBjaGVjayBmb3IgdmFsaWQgVVVJRC4gIElmIHRoaXMgdGhyb3dzLCBpdCdzIGxpa2VseSBkdWUgdG8gb25lXG4gIC8vIG9mIHRoZSBmb2xsb3dpbmc6XG4gIC8vIC0gT25lIG9yIG1vcmUgaW5wdXQgYXJyYXkgdmFsdWVzIGRvbid0IG1hcCB0byBhIGhleCBvY3RldCAobGVhZGluZyB0b1xuICAvLyBcInVuZGVmaW5lZFwiIGluIHRoZSB1dWlkKVxuICAvLyAtIEludmFsaWQgaW5wdXQgdmFsdWVzIGZvciB0aGUgUkZDIGB2ZXJzaW9uYCBvciBgdmFyaWFudGAgZmllbGRzXG5cbiAgaWYgKCF2YWxpZGF0ZSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignU3RyaW5naWZpZWQgVVVJRCBpcyBpbnZhbGlkJyk7XG4gIH1cblxuICByZXR1cm4gdXVpZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc3RyaW5naWZ5OyJdLCJuYW1lcyI6WyJ2YWxpZGF0ZSIsImJ5dGVUb0hleCIsImkiLCJwdXNoIiwidG9TdHJpbmciLCJzbGljZSIsInVuc2FmZVN0cmluZ2lmeSIsImFyciIsIm9mZnNldCIsInN0cmluZ2lmeSIsInV1aWQiLCJUeXBlRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/stringify.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/v4.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/v4.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _native_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./native.js */ \"(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/native.js\");\n/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng.js */ \"(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/rng.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stringify.js */ \"(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/stringify.js\");\n\n\n\nfunction v4(options, buf, offset) {\n    if (_native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID && !buf && !options) {\n        return _native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n    rnds[6] = rnds[6] & 0x0f | 0x40;\n    rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n    if (buf) {\n        offset = offset || 0;\n        for(let i = 0; i < 16; ++i){\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_2__.unsafeStringify)(rnds);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v4);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92NC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlDO0FBQ047QUFDc0I7QUFFakQsU0FBU0csR0FBR0MsT0FBTyxFQUFFQyxHQUFHLEVBQUVDLE1BQU07SUFDOUIsSUFBSU4sa0RBQU1BLENBQUNPLFVBQVUsSUFBSSxDQUFDRixPQUFPLENBQUNELFNBQVM7UUFDekMsT0FBT0osa0RBQU1BLENBQUNPLFVBQVU7SUFDMUI7SUFFQUgsVUFBVUEsV0FBVyxDQUFDO0lBQ3RCLE1BQU1JLE9BQU9KLFFBQVFLLE1BQU0sSUFBSSxDQUFDTCxRQUFRSCxHQUFHLElBQUlBLCtDQUFFLEtBQU0sZ0VBQWdFO0lBRXZITyxJQUFJLENBQUMsRUFBRSxHQUFHQSxJQUFJLENBQUMsRUFBRSxHQUFHLE9BQU87SUFDM0JBLElBQUksQ0FBQyxFQUFFLEdBQUdBLElBQUksQ0FBQyxFQUFFLEdBQUcsT0FBTyxNQUFNLG9DQUFvQztJQUVyRSxJQUFJSCxLQUFLO1FBQ1BDLFNBQVNBLFVBQVU7UUFFbkIsSUFBSyxJQUFJSSxJQUFJLEdBQUdBLElBQUksSUFBSSxFQUFFQSxFQUFHO1lBQzNCTCxHQUFHLENBQUNDLFNBQVNJLEVBQUUsR0FBR0YsSUFBSSxDQUFDRSxFQUFFO1FBQzNCO1FBRUEsT0FBT0w7SUFDVDtJQUVBLE9BQU9ILDhEQUFlQSxDQUFDTTtBQUN6QjtBQUVBLGlFQUFlTCxFQUFFQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjhfbm90aW9uLWNsb25lLy4vbm9kZV9tb2R1bGVzL0BlZGdlc3RvcmUvc2VydmVyL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdjQuanM/YmU2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbmF0aXZlIGZyb20gJy4vbmF0aXZlLmpzJztcbmltcG9ydCBybmcgZnJvbSAnLi9ybmcuanMnO1xuaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBpZiAobmF0aXZlLnJhbmRvbVVVSUQgJiYgIWJ1ZiAmJiAhb3B0aW9ucykge1xuICAgIHJldHVybiBuYXRpdmUucmFuZG9tVVVJRCgpO1xuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpOyAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG5cbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDsgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG5cbiAgaWYgKGJ1Zikge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBidWY7XG4gIH1cblxuICByZXR1cm4gdW5zYWZlU3RyaW5naWZ5KHJuZHMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2NDsiXSwibmFtZXMiOlsibmF0aXZlIiwicm5nIiwidW5zYWZlU3RyaW5naWZ5IiwidjQiLCJvcHRpb25zIiwiYnVmIiwib2Zmc2V0IiwicmFuZG9tVVVJRCIsInJuZHMiLCJyYW5kb20iLCJpIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/v4.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/validate.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/validate.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ \"(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/regex.js\");\n\nfunction validate(uuid) {\n    return typeof uuid === \"string\" && _regex_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].test(uuid);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92YWxpZGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQjtBQUUvQixTQUFTQyxTQUFTQyxJQUFJO0lBQ3BCLE9BQU8sT0FBT0EsU0FBUyxZQUFZRixpREFBS0EsQ0FBQ0csSUFBSSxDQUFDRDtBQUNoRDtBQUVBLGlFQUFlRCxRQUFRQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjhfbm90aW9uLWNsb25lLy4vbm9kZV9tb2R1bGVzL0BlZGdlc3RvcmUvc2VydmVyL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdmFsaWRhdGUuanM/N2E0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUkVHRVggZnJvbSAnLi9yZWdleC5qcyc7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlKHV1aWQpIHtcbiAgcmV0dXJuIHR5cGVvZiB1dWlkID09PSAnc3RyaW5nJyAmJiBSRUdFWC50ZXN0KHV1aWQpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0ZTsiXSwibmFtZXMiOlsiUkVHRVgiLCJ2YWxpZGF0ZSIsInV1aWQiLCJ0ZXN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/validate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@edgestore/react/dist/index.mjs":
/*!******************************************************!*\
  !*** ./node_modules/@edgestore/react/dist/index.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEdgeStoreProvider: () => (/* binding */ createEdgeStoreProvider)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @edgestore/shared */ \"(ssr)/./node_modules/@edgestore/shared/dist/index.mjs\");\n\n\n\nclass EdgeStoreClientError extends Error {\n    constructor(message){\n        super(message);\n        this.name = 'EdgeStoreError';\n    }\n}\n\nasync function handleError(res) {\n    let json = {};\n    try {\n        json = await res.json();\n    } catch (err) {\n        throw new EdgeStoreClientError(`Failed to parse response. Make sure the api is correctly configured at ${res.url}`);\n    }\n    throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_1__.EdgeStoreApiClientError({\n        response: json\n    });\n}\n\nfunction createNextProxy({ apiPath, uploadingCountRef, maxConcurrentUploads = 5 }) {\n    return new Proxy({}, {\n        get (_, prop) {\n            const bucketName = prop;\n            const bucketFunctions = {\n                upload: async (params)=>{\n                    try {\n                        params.onProgressChange?.(0);\n                        while(uploadingCountRef.current >= maxConcurrentUploads && uploadingCountRef.current > 0){\n                            await new Promise((resolve)=>setTimeout(resolve, 300));\n                        }\n                        uploadingCountRef.current++;\n                        const test = await uploadFile(params, {\n                            bucketName: bucketName,\n                            apiPath\n                        });\n                        return test;\n                    } finally{\n                        uploadingCountRef.current--;\n                    }\n                },\n                confirmUpload: async (params)=>{\n                    const { success } = await confirmUpload(params, {\n                        bucketName: bucketName,\n                        apiPath\n                    });\n                    if (!success) {\n                        throw new EdgeStoreClientError('Failed to confirm upload');\n                    }\n                },\n                delete: async (params)=>{\n                    const { success } = await deleteFile(params, {\n                        bucketName: bucketName,\n                        apiPath\n                    });\n                    if (!success) {\n                        throw new EdgeStoreClientError('Failed to delete file');\n                    }\n                }\n            };\n            return bucketFunctions;\n        }\n    });\n}\nasync function uploadFile({ file, input, onProgressChange, options }, { apiPath, bucketName }) {\n    try {\n        onProgressChange?.(0);\n        const res = await fetch(`${apiPath}/request-upload`, {\n            method: 'POST',\n            credentials: 'include',\n            body: JSON.stringify({\n                bucketName,\n                input,\n                fileInfo: {\n                    extension: file.name.split('.').pop(),\n                    type: file.type,\n                    size: file.size,\n                    fileName: options?.manualFileName,\n                    replaceTargetUrl: options?.replaceTargetUrl,\n                    temporary: options?.temporary\n                }\n            }),\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n        if (!res.ok) {\n            await handleError(res);\n        }\n        const json = await res.json();\n        if ('multipart' in json) {\n            await multipartUpload({\n                bucketName,\n                multipartInfo: json.multipart,\n                onProgressChange,\n                file,\n                apiPath\n            });\n        } else if ('uploadUrl' in json) {\n            // Single part upload\n            // Upload the file to the signed URL and get the progress\n            await uploadFileInner(file, json.uploadUrl, onProgressChange);\n        } else {\n            throw new EdgeStoreClientError('An error occurred');\n        }\n        return {\n            url: getUrl(json.accessUrl, apiPath),\n            thumbnailUrl: json.thumbnailUrl ? getUrl(json.thumbnailUrl, apiPath) : null,\n            size: json.size,\n            uploadedAt: new Date(json.uploadedAt),\n            path: json.path,\n            pathOrder: json.pathOrder,\n            metadata: json.metadata\n        };\n    } catch (e) {\n        onProgressChange?.(0);\n        throw e;\n    }\n}\n/**\n * Protected files need third-party cookies to work.\n * Since third party cookies doesn't work on localhost,\n * we need to proxy the file through the server.\n */ function getUrl(url, apiPath) {\n    const mode = typeof process !== 'undefined' ? \"development\" :  false ? 0 : 'production';\n    if (mode === 'development' && !url.includes('/_public/')) {\n        const proxyUrl = new URL(window.location.origin);\n        proxyUrl.pathname = `${apiPath}/proxy-file`;\n        proxyUrl.search = new URLSearchParams({\n            url\n        }).toString();\n        return proxyUrl.toString();\n    }\n    return url;\n}\nconst uploadFileInner = async (file, uploadUrl, onProgressChange)=>{\n    const promise = new Promise((resolve, reject)=>{\n        const request = new XMLHttpRequest();\n        request.open('PUT', uploadUrl);\n        // This is for Azure provider. Specifies the blob type\n        request.setRequestHeader('x-ms-blob-type', 'BlockBlob');\n        request.addEventListener('loadstart', ()=>{\n            onProgressChange?.(0);\n        });\n        request.upload.addEventListener('progress', (e)=>{\n            if (e.lengthComputable) {\n                // 2 decimal progress\n                const progress = Math.round(e.loaded / e.total * 10000) / 100;\n                onProgressChange?.(progress);\n            }\n        });\n        request.addEventListener('error', ()=>{\n            reject(new Error('Error uploading file'));\n        });\n        request.addEventListener('abort', ()=>{\n            reject(new Error('File upload aborted'));\n        });\n        request.addEventListener('loadend', ()=>{\n            // Return the ETag header (needed to complete multipart upload)\n            resolve(request.getResponseHeader('ETag'));\n        });\n        request.send(file);\n    });\n    return promise;\n};\nasync function multipartUpload(params) {\n    const { bucketName, multipartInfo, onProgressChange, file, apiPath } = params;\n    const { partSize, parts, totalParts, uploadId, key } = multipartInfo;\n    const uploadingParts = [];\n    const uploadPart = async (params)=>{\n        const { part, chunk } = params;\n        const { uploadUrl } = part;\n        const eTag = await uploadFileInner(chunk, uploadUrl, (progress)=>{\n            const uploadingPart = uploadingParts.find((p)=>p.partNumber === part.partNumber);\n            if (uploadingPart) {\n                uploadingPart.progress = progress;\n            } else {\n                uploadingParts.push({\n                    partNumber: part.partNumber,\n                    progress\n                });\n            }\n            const totalProgress = Math.round(uploadingParts.reduce((acc, p)=>acc + p.progress * 100, 0) / totalParts) / 100;\n            onProgressChange?.(totalProgress);\n        });\n        if (!eTag) {\n            throw new EdgeStoreClientError('Could not get ETag from multipart response');\n        }\n        return {\n            partNumber: part.partNumber,\n            eTag\n        };\n    };\n    // Upload the parts in parallel\n    const completedParts = await queuedPromises({\n        items: parts.map((part)=>({\n                part,\n                chunk: file.slice((part.partNumber - 1) * partSize, part.partNumber * partSize)\n            })),\n        fn: uploadPart,\n        maxParallel: 5,\n        maxRetries: 10\n    });\n    // Complete multipart upload\n    const res = await fetch(`${apiPath}/complete-multipart-upload`, {\n        method: 'POST',\n        credentials: 'include',\n        body: JSON.stringify({\n            bucketName,\n            uploadId,\n            key,\n            parts: completedParts\n        }),\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    });\n    if (!res.ok) {\n        await handleError(res);\n    }\n}\nasync function confirmUpload({ url }, { apiPath, bucketName }) {\n    const res = await fetch(`${apiPath}/confirm-upload`, {\n        method: 'POST',\n        credentials: 'include',\n        body: JSON.stringify({\n            url,\n            bucketName\n        }),\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    });\n    if (!res.ok) {\n        await handleError(res);\n    }\n    return res.json();\n}\nasync function deleteFile({ url }, { apiPath, bucketName }) {\n    const res = await fetch(`${apiPath}/delete-file`, {\n        method: 'POST',\n        credentials: 'include',\n        body: JSON.stringify({\n            url,\n            bucketName\n        }),\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    });\n    if (!res.ok) {\n        await handleError(res);\n    }\n    return res.json();\n}\nasync function queuedPromises({ items, fn, maxParallel, maxRetries = 0 }) {\n    const results = new Array(items.length);\n    const executeWithRetry = async (func, retries)=>{\n        try {\n            return await func();\n        } catch (error) {\n            if (retries > 0) {\n                await new Promise((resolve)=>setTimeout(resolve, 5000));\n                return executeWithRetry(func, retries - 1);\n            } else {\n                throw error;\n            }\n        }\n    };\n    const semaphore = {\n        count: maxParallel,\n        async wait () {\n            // If we've reached our maximum concurrency or it's the last item, wait\n            while(this.count <= 0)await new Promise((resolve)=>setTimeout(resolve, 500));\n            this.count--;\n        },\n        signal () {\n            this.count++;\n        }\n    };\n    const tasks = items.map((item, i)=>(async ()=>{\n            await semaphore.wait();\n            try {\n                const result = await executeWithRetry(()=>fn(item), maxRetries);\n                results[i] = result;\n            } finally{\n                semaphore.signal();\n            }\n        })());\n    await Promise.all(tasks);\n    return results;\n}\n\nconst DEFAULT_BASE_URL = (typeof process !== 'undefined' ? process.env.NEXT_PUBLIC_EDGE_STORE_BASE_URL :  undefined) ?? 'https://files.edgestore.dev';\nfunction createEdgeStoreProvider(opts) {\n    const EdgeStoreContext = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createContext(undefined);\n    const EdgeStoreProvider = ({ children, basePath })=>{\n        return EdgeStoreProviderInner({\n            children,\n            context: EdgeStoreContext,\n            basePath,\n            maxConcurrentUploads: opts?.maxConcurrentUploads\n        });\n    };\n    function useEdgeStore() {\n        if (!EdgeStoreContext) {\n            throw new Error('React Context is unavailable in Server Components');\n        }\n        // @ts-expect-error - We know that the context value should not be undefined\n        const value = react__WEBPACK_IMPORTED_MODULE_0__.useContext(EdgeStoreContext);\n        if (!value && \"development\" !== 'production') {\n            throw new Error('[edgestore]: `useEdgeStore` must be wrapped in a <EdgeStoreProvider />');\n        }\n        return value;\n    }\n    return {\n        EdgeStoreProvider,\n        useEdgeStore\n    };\n}\nfunction EdgeStoreProviderInner({ children, context, basePath, maxConcurrentUploads }) {\n    const apiPath = basePath ? `${basePath}` : '/api/edgestore';\n    const [state, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n        loading: true,\n        initialized: false,\n        error: false\n    });\n    const uploadingCountRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(0);\n    const initExecuted = react__WEBPACK_IMPORTED_MODULE_0__.useRef(false); // to make sure we don't run init twice\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{\n        if (!initExecuted.current) {\n            void init();\n        }\n        return ()=>{\n            initExecuted.current = true;\n        };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    async function init() {\n        try {\n            setState({\n                loading: true,\n                initialized: false,\n                error: false\n            });\n            const res = await fetch(`${apiPath}/init`, {\n                method: 'POST',\n                credentials: 'include'\n            });\n            if (res.ok) {\n                const json = await res.json();\n                const innerRes = await fetch(`${DEFAULT_BASE_URL}/_init`, {\n                    method: 'GET',\n                    credentials: 'include',\n                    headers: {\n                        'x-edgestore-token': json.token\n                    }\n                });\n                if (innerRes.ok) {\n                    // update state\n                    setState({\n                        loading: false,\n                        initialized: true,\n                        error: false\n                    });\n                } else {\n                    setState({\n                        loading: false,\n                        initialized: false,\n                        error: true\n                    });\n                    throw new EdgeStoreClientError(\"Couldn't initialize Edge Store.\");\n                }\n            } else {\n                setState({\n                    loading: false,\n                    initialized: false,\n                    error: true\n                });\n                await handleError(res);\n            }\n        } catch (err) {\n            setState({\n                loading: false,\n                initialized: false,\n                error: true\n            });\n            throw err;\n        }\n    }\n    async function reset() {\n        await init();\n    }\n    return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(context.Provider, {\n        value: {\n            edgestore: createNextProxy({\n                apiPath,\n                uploadingCountRef,\n                maxConcurrentUploads\n            }),\n            reset,\n            state\n        }\n    }, children));\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9yZWFjdC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0I7QUFDNkI7O0FBRTVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixpSEFBaUgsUUFBUTtBQUN6SDtBQUNBLGNBQWMsc0VBQXVCO0FBQ3JDO0FBQ0EsS0FBSztBQUNMOztBQUVBLDJCQUEyQixzREFBc0Q7QUFDakYsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSw0QkFBNEIsVUFBVTtBQUN0QztBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLDRCQUE0QixVQUFVO0FBQ3RDO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSw0QkFBNEIsd0NBQXdDLElBQUkscUJBQXFCO0FBQzdGO0FBQ0E7QUFDQSxtQ0FBbUMsUUFBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFD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QTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsZ0RBQW1CLENBQUMsMkNBQWMsc0JBQXNCLGdEQUFtQjtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yOF9ub3Rpb24tY2xvbmUvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9yZWFjdC9kaXN0L2luZGV4Lm1qcz84YzNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEVkZ2VTdG9yZUFwaUNsaWVudEVycm9yIH0gZnJvbSAnQGVkZ2VzdG9yZS9zaGFyZWQnO1xuXG5jbGFzcyBFZGdlU3RvcmVDbGllbnRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKXtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9ICdFZGdlU3RvcmVFcnJvcic7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVFcnJvcihyZXMpIHtcbiAgICBsZXQganNvbiA9IHt9O1xuICAgIHRyeSB7XG4gICAgICAgIGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlQ2xpZW50RXJyb3IoYEZhaWxlZCB0byBwYXJzZSByZXNwb25zZS4gTWFrZSBzdXJlIHRoZSBhcGkgaXMgY29ycmVjdGx5IGNvbmZpZ3VyZWQgYXQgJHtyZXMudXJsfWApO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRWRnZVN0b3JlQXBpQ2xpZW50RXJyb3Ioe1xuICAgICAgICByZXNwb25zZToganNvblxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVOZXh0UHJveHkoeyBhcGlQYXRoLCB1cGxvYWRpbmdDb3VudFJlZiwgbWF4Q29uY3VycmVudFVwbG9hZHMgPSA1IH0pIHtcbiAgICByZXR1cm4gbmV3IFByb3h5KHt9LCB7XG4gICAgICAgIGdldCAoXywgcHJvcCkge1xuICAgICAgICAgICAgY29uc3QgYnVja2V0TmFtZSA9IHByb3A7XG4gICAgICAgICAgICBjb25zdCBidWNrZXRGdW5jdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgdXBsb2FkOiBhc3luYyAocGFyYW1zKT0+e1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLm9uUHJvZ3Jlc3NDaGFuZ2U/LigwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKHVwbG9hZGluZ0NvdW50UmVmLmN1cnJlbnQgPj0gbWF4Q29uY3VycmVudFVwbG9hZHMgJiYgdXBsb2FkaW5nQ291bnRSZWYuY3VycmVudCA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKT0+c2V0VGltZW91dChyZXNvbHZlLCAzMDApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZGluZ0NvdW50UmVmLmN1cnJlbnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlc3QgPSBhd2FpdCB1cGxvYWRGaWxlKHBhcmFtcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldE5hbWU6IGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpUGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVzdDtcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5e1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkaW5nQ291bnRSZWYuY3VycmVudC0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb25maXJtVXBsb2FkOiBhc3luYyAocGFyYW1zKT0+e1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHN1Y2Nlc3MgfSA9IGF3YWl0IGNvbmZpcm1VcGxvYWQocGFyYW1zLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWNrZXROYW1lOiBidWNrZXROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpUGF0aFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlQ2xpZW50RXJyb3IoJ0ZhaWxlZCB0byBjb25maXJtIHVwbG9hZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWxldGU6IGFzeW5jIChwYXJhbXMpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc3VjY2VzcyB9ID0gYXdhaXQgZGVsZXRlRmlsZShwYXJhbXMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldE5hbWU6IGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlQYXRoXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVDbGllbnRFcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBmaWxlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGJ1Y2tldEZ1bmN0aW9ucztcbiAgICAgICAgfVxuICAgIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gdXBsb2FkRmlsZSh7IGZpbGUsIGlucHV0LCBvblByb2dyZXNzQ2hhbmdlLCBvcHRpb25zIH0sIHsgYXBpUGF0aCwgYnVja2V0TmFtZSB9KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgb25Qcm9ncmVzc0NoYW5nZT8uKDApO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHthcGlQYXRofS9yZXF1ZXN0LXVwbG9hZGAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIGZpbGVJbmZvOiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbjogZmlsZS5uYW1lLnNwbGl0KCcuJykucG9wKCksXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogb3B0aW9ucz8ubWFudWFsRmlsZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJlcGxhY2VUYXJnZXRVcmw6IG9wdGlvbnM/LnJlcGxhY2VUYXJnZXRVcmwsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBvcmFyeTogb3B0aW9ucz8udGVtcG9yYXJ5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZUVycm9yKHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGlmICgnbXVsdGlwYXJ0JyBpbiBqc29uKSB7XG4gICAgICAgICAgICBhd2FpdCBtdWx0aXBhcnRVcGxvYWQoe1xuICAgICAgICAgICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICAgICAgbXVsdGlwYXJ0SW5mbzoganNvbi5tdWx0aXBhcnQsXG4gICAgICAgICAgICAgICAgb25Qcm9ncmVzc0NoYW5nZSxcbiAgICAgICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgICAgIGFwaVBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKCd1cGxvYWRVcmwnIGluIGpzb24pIHtcbiAgICAgICAgICAgIC8vIFNpbmdsZSBwYXJ0IHVwbG9hZFxuICAgICAgICAgICAgLy8gVXBsb2FkIHRoZSBmaWxlIHRvIHRoZSBzaWduZWQgVVJMIGFuZCBnZXQgdGhlIHByb2dyZXNzXG4gICAgICAgICAgICBhd2FpdCB1cGxvYWRGaWxlSW5uZXIoZmlsZSwganNvbi51cGxvYWRVcmwsIG9uUHJvZ3Jlc3NDaGFuZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUNsaWVudEVycm9yKCdBbiBlcnJvciBvY2N1cnJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1cmw6IGdldFVybChqc29uLmFjY2Vzc1VybCwgYXBpUGF0aCksXG4gICAgICAgICAgICB0aHVtYm5haWxVcmw6IGpzb24udGh1bWJuYWlsVXJsID8gZ2V0VXJsKGpzb24udGh1bWJuYWlsVXJsLCBhcGlQYXRoKSA6IG51bGwsXG4gICAgICAgICAgICBzaXplOiBqc29uLnNpemUsXG4gICAgICAgICAgICB1cGxvYWRlZEF0OiBuZXcgRGF0ZShqc29uLnVwbG9hZGVkQXQpLFxuICAgICAgICAgICAgcGF0aDoganNvbi5wYXRoLFxuICAgICAgICAgICAgcGF0aE9yZGVyOiBqc29uLnBhdGhPcmRlcixcbiAgICAgICAgICAgIG1ldGFkYXRhOiBqc29uLm1ldGFkYXRhXG4gICAgICAgIH07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBvblByb2dyZXNzQ2hhbmdlPy4oMCk7XG4gICAgICAgIHRocm93IGU7XG4gICAgfVxufVxuLyoqXG4gKiBQcm90ZWN0ZWQgZmlsZXMgbmVlZCB0aGlyZC1wYXJ0eSBjb29raWVzIHRvIHdvcmsuXG4gKiBTaW5jZSB0aGlyZCBwYXJ0eSBjb29raWVzIGRvZXNuJ3Qgd29yayBvbiBsb2NhbGhvc3QsXG4gKiB3ZSBuZWVkIHRvIHByb3h5IHRoZSBmaWxlIHRocm91Z2ggdGhlIHNlcnZlci5cbiAqLyBmdW5jdGlvbiBnZXRVcmwodXJsLCBhcGlQYXRoKSB7XG4gICAgY29uc3QgbW9kZSA9IHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyA/IHByb2Nlc3MuZW52Lk5PREVfRU5WIDogaW1wb3J0Lm1ldGEuZW52Py5ERVYgPyAnZGV2ZWxvcG1lbnQnIDogJ3Byb2R1Y3Rpb24nO1xuICAgIGlmIChtb2RlID09PSAnZGV2ZWxvcG1lbnQnICYmICF1cmwuaW5jbHVkZXMoJy9fcHVibGljLycpKSB7XG4gICAgICAgIGNvbnN0IHByb3h5VXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24ub3JpZ2luKTtcbiAgICAgICAgcHJveHlVcmwucGF0aG5hbWUgPSBgJHthcGlQYXRofS9wcm94eS1maWxlYDtcbiAgICAgICAgcHJveHlVcmwuc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICB1cmxcbiAgICAgICAgfSkudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIHByb3h5VXJsLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiB1cmw7XG59XG5jb25zdCB1cGxvYWRGaWxlSW5uZXIgPSBhc3luYyAoZmlsZSwgdXBsb2FkVXJsLCBvblByb2dyZXNzQ2hhbmdlKT0+e1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHJlcXVlc3Qub3BlbignUFVUJywgdXBsb2FkVXJsKTtcbiAgICAgICAgLy8gVGhpcyBpcyBmb3IgQXp1cmUgcHJvdmlkZXIuIFNwZWNpZmllcyB0aGUgYmxvYiB0eXBlXG4gICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcigneC1tcy1ibG9iLXR5cGUnLCAnQmxvY2tCbG9iJyk7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignbG9hZHN0YXJ0JywgKCk9PntcbiAgICAgICAgICAgIG9uUHJvZ3Jlc3NDaGFuZ2U/LigwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgKGUpPT57XG4gICAgICAgICAgICBpZiAoZS5sZW5ndGhDb21wdXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgLy8gMiBkZWNpbWFsIHByb2dyZXNzXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKGUubG9hZGVkIC8gZS50b3RhbCAqIDEwMDAwKSAvIDEwMDtcbiAgICAgICAgICAgICAgICBvblByb2dyZXNzQ2hhbmdlPy4ocHJvZ3Jlc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICgpPT57XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdFcnJvciB1cGxvYWRpbmcgZmlsZScpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKT0+e1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignRmlsZSB1cGxvYWQgYWJvcnRlZCcpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsICgpPT57XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIEVUYWcgaGVhZGVyIChuZWVkZWQgdG8gY29tcGxldGUgbXVsdGlwYXJ0IHVwbG9hZClcbiAgICAgICAgICAgIHJlc29sdmUocmVxdWVzdC5nZXRSZXNwb25zZUhlYWRlcignRVRhZycpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcXVlc3Quc2VuZChmaWxlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn07XG5hc3luYyBmdW5jdGlvbiBtdWx0aXBhcnRVcGxvYWQocGFyYW1zKSB7XG4gICAgY29uc3QgeyBidWNrZXROYW1lLCBtdWx0aXBhcnRJbmZvLCBvblByb2dyZXNzQ2hhbmdlLCBmaWxlLCBhcGlQYXRoIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgeyBwYXJ0U2l6ZSwgcGFydHMsIHRvdGFsUGFydHMsIHVwbG9hZElkLCBrZXkgfSA9IG11bHRpcGFydEluZm87XG4gICAgY29uc3QgdXBsb2FkaW5nUGFydHMgPSBbXTtcbiAgICBjb25zdCB1cGxvYWRQYXJ0ID0gYXN5bmMgKHBhcmFtcyk9PntcbiAgICAgICAgY29uc3QgeyBwYXJ0LCBjaHVuayB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCB7IHVwbG9hZFVybCB9ID0gcGFydDtcbiAgICAgICAgY29uc3QgZVRhZyA9IGF3YWl0IHVwbG9hZEZpbGVJbm5lcihjaHVuaywgdXBsb2FkVXJsLCAocHJvZ3Jlc3MpPT57XG4gICAgICAgICAgICBjb25zdCB1cGxvYWRpbmdQYXJ0ID0gdXBsb2FkaW5nUGFydHMuZmluZCgocCk9PnAucGFydE51bWJlciA9PT0gcGFydC5wYXJ0TnVtYmVyKTtcbiAgICAgICAgICAgIGlmICh1cGxvYWRpbmdQYXJ0KSB7XG4gICAgICAgICAgICAgICAgdXBsb2FkaW5nUGFydC5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1cGxvYWRpbmdQYXJ0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcGFydE51bWJlcjogcGFydC5wYXJ0TnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdG90YWxQcm9ncmVzcyA9IE1hdGgucm91bmQodXBsb2FkaW5nUGFydHMucmVkdWNlKChhY2MsIHApPT5hY2MgKyBwLnByb2dyZXNzICogMTAwLCAwKSAvIHRvdGFsUGFydHMpIC8gMTAwO1xuICAgICAgICAgICAgb25Qcm9ncmVzc0NoYW5nZT8uKHRvdGFsUHJvZ3Jlc3MpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFlVGFnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlQ2xpZW50RXJyb3IoJ0NvdWxkIG5vdCBnZXQgRVRhZyBmcm9tIG11bHRpcGFydCByZXNwb25zZScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXJ0TnVtYmVyOiBwYXJ0LnBhcnROdW1iZXIsXG4gICAgICAgICAgICBlVGFnXG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvLyBVcGxvYWQgdGhlIHBhcnRzIGluIHBhcmFsbGVsXG4gICAgY29uc3QgY29tcGxldGVkUGFydHMgPSBhd2FpdCBxdWV1ZWRQcm9taXNlcyh7XG4gICAgICAgIGl0ZW1zOiBwYXJ0cy5tYXAoKHBhcnQpPT4oe1xuICAgICAgICAgICAgICAgIHBhcnQsXG4gICAgICAgICAgICAgICAgY2h1bms6IGZpbGUuc2xpY2UoKHBhcnQucGFydE51bWJlciAtIDEpICogcGFydFNpemUsIHBhcnQucGFydE51bWJlciAqIHBhcnRTaXplKVxuICAgICAgICAgICAgfSkpLFxuICAgICAgICBmbjogdXBsb2FkUGFydCxcbiAgICAgICAgbWF4UGFyYWxsZWw6IDUsXG4gICAgICAgIG1heFJldHJpZXM6IDEwXG4gICAgfSk7XG4gICAgLy8gQ29tcGxldGUgbXVsdGlwYXJ0IHVwbG9hZFxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2FwaVBhdGh9L2NvbXBsZXRlLW11bHRpcGFydC11cGxvYWRgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICAgICAgdXBsb2FkSWQsXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBwYXJ0czogY29tcGxldGVkUGFydHNcbiAgICAgICAgfSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIGF3YWl0IGhhbmRsZUVycm9yKHJlcyk7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gY29uZmlybVVwbG9hZCh7IHVybCB9LCB7IGFwaVBhdGgsIGJ1Y2tldE5hbWUgfSkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2FwaVBhdGh9L2NvbmZpcm0tdXBsb2FkYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgYnVja2V0TmFtZVxuICAgICAgICB9KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgYXdhaXQgaGFuZGxlRXJyb3IocmVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy5qc29uKCk7XG59XG5hc3luYyBmdW5jdGlvbiBkZWxldGVGaWxlKHsgdXJsIH0sIHsgYXBpUGF0aCwgYnVja2V0TmFtZSB9KSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7YXBpUGF0aH0vZGVsZXRlLWZpbGVgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICBidWNrZXROYW1lXG4gICAgICAgIH0pLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICBhd2FpdCBoYW5kbGVFcnJvcihyZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLmpzb24oKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHF1ZXVlZFByb21pc2VzKHsgaXRlbXMsIGZuLCBtYXhQYXJhbGxlbCwgbWF4UmV0cmllcyA9IDAgfSkge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBuZXcgQXJyYXkoaXRlbXMubGVuZ3RoKTtcbiAgICBjb25zdCBleGVjdXRlV2l0aFJldHJ5ID0gYXN5bmMgKGZ1bmMsIHJldHJpZXMpPT57XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZnVuYygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHJldHJpZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpPT5zZXRUaW1lb3V0KHJlc29sdmUsIDUwMDApKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhlY3V0ZVdpdGhSZXRyeShmdW5jLCByZXRyaWVzIC0gMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZW1hcGhvcmUgPSB7XG4gICAgICAgIGNvdW50OiBtYXhQYXJhbGxlbCxcbiAgICAgICAgYXN5bmMgd2FpdCAoKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSd2ZSByZWFjaGVkIG91ciBtYXhpbXVtIGNvbmN1cnJlbmN5IG9yIGl0J3MgdGhlIGxhc3QgaXRlbSwgd2FpdFxuICAgICAgICAgICAgd2hpbGUodGhpcy5jb3VudCA8PSAwKWF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKT0+c2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcbiAgICAgICAgICAgIHRoaXMuY291bnQtLTtcbiAgICAgICAgfSxcbiAgICAgICAgc2lnbmFsICgpIHtcbiAgICAgICAgICAgIHRoaXMuY291bnQrKztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdGFza3MgPSBpdGVtcy5tYXAoKGl0ZW0sIGkpPT4oYXN5bmMgKCk9PntcbiAgICAgICAgICAgIGF3YWl0IHNlbWFwaG9yZS53YWl0KCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVXaXRoUmV0cnkoKCk9PmZuKGl0ZW0pLCBtYXhSZXRyaWVzKTtcbiAgICAgICAgICAgICAgICByZXN1bHRzW2ldID0gcmVzdWx0O1xuICAgICAgICAgICAgfSBmaW5hbGx5e1xuICAgICAgICAgICAgICAgIHNlbWFwaG9yZS5zaWduYWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkoKSk7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwodGFza3MpO1xuICAgIHJldHVybiByZXN1bHRzO1xufVxuXG5jb25zdCBERUZBVUxUX0JBU0VfVVJMID0gKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyA/IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0VER0VfU1RPUkVfQkFTRV9VUkwgOiBpbXBvcnQubWV0YS5lbnY/LkVER0VfU1RPUkVfQkFTRV9VUkwpID8/ICdodHRwczovL2ZpbGVzLmVkZ2VzdG9yZS5kZXYnO1xuZnVuY3Rpb24gY3JlYXRlRWRnZVN0b3JlUHJvdmlkZXIob3B0cykge1xuICAgIGNvbnN0IEVkZ2VTdG9yZUNvbnRleHQgPSAvKiNfX1BVUkVfXyovIFJlYWN0LmNyZWF0ZUNvbnRleHQodW5kZWZpbmVkKTtcbiAgICBjb25zdCBFZGdlU3RvcmVQcm92aWRlciA9ICh7IGNoaWxkcmVuLCBiYXNlUGF0aCB9KT0+e1xuICAgICAgICByZXR1cm4gRWRnZVN0b3JlUHJvdmlkZXJJbm5lcih7XG4gICAgICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgICAgIGNvbnRleHQ6IEVkZ2VTdG9yZUNvbnRleHQsXG4gICAgICAgICAgICBiYXNlUGF0aCxcbiAgICAgICAgICAgIG1heENvbmN1cnJlbnRVcGxvYWRzOiBvcHRzPy5tYXhDb25jdXJyZW50VXBsb2Fkc1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHVzZUVkZ2VTdG9yZSgpIHtcbiAgICAgICAgaWYgKCFFZGdlU3RvcmVDb250ZXh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWN0IENvbnRleHQgaXMgdW5hdmFpbGFibGUgaW4gU2VydmVyIENvbXBvbmVudHMnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gV2Uga25vdyB0aGF0IHRoZSBjb250ZXh0IHZhbHVlIHNob3VsZCBub3QgYmUgdW5kZWZpbmVkXG4gICAgICAgIGNvbnN0IHZhbHVlID0gUmVhY3QudXNlQ29udGV4dChFZGdlU3RvcmVDb250ZXh0KTtcbiAgICAgICAgaWYgKCF2YWx1ZSAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1tlZGdlc3RvcmVdOiBgdXNlRWRnZVN0b3JlYCBtdXN0IGJlIHdyYXBwZWQgaW4gYSA8RWRnZVN0b3JlUHJvdmlkZXIgLz4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIEVkZ2VTdG9yZVByb3ZpZGVyLFxuICAgICAgICB1c2VFZGdlU3RvcmVcbiAgICB9O1xufVxuZnVuY3Rpb24gRWRnZVN0b3JlUHJvdmlkZXJJbm5lcih7IGNoaWxkcmVuLCBjb250ZXh0LCBiYXNlUGF0aCwgbWF4Q29uY3VycmVudFVwbG9hZHMgfSkge1xuICAgIGNvbnN0IGFwaVBhdGggPSBiYXNlUGF0aCA/IGAke2Jhc2VQYXRofWAgOiAnL2FwaS9lZGdlc3RvcmUnO1xuICAgIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gUmVhY3QudXNlU3RhdGUoe1xuICAgICAgICBsb2FkaW5nOiB0cnVlLFxuICAgICAgICBpbml0aWFsaXplZDogZmFsc2UsXG4gICAgICAgIGVycm9yOiBmYWxzZVxuICAgIH0pO1xuICAgIGNvbnN0IHVwbG9hZGluZ0NvdW50UmVmID0gUmVhY3QudXNlUmVmKDApO1xuICAgIGNvbnN0IGluaXRFeGVjdXRlZCA9IFJlYWN0LnVzZVJlZihmYWxzZSk7IC8vIHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCBydW4gaW5pdCB0d2ljZVxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKT0+e1xuICAgICAgICBpZiAoIWluaXRFeGVjdXRlZC5jdXJyZW50KSB7XG4gICAgICAgICAgICB2b2lkIGluaXQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKCk9PntcbiAgICAgICAgICAgIGluaXRFeGVjdXRlZC5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgfSwgW10pO1xuICAgIGFzeW5jIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2FwaVBhdGh9L2luaXRgLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXJSZXMgPSBhd2FpdCBmZXRjaChgJHtERUZBVUxUX0JBU0VfVVJMfS9faW5pdGAsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3gtZWRnZXN0b3JlLXRva2VuJzoganNvbi50b2tlblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGlubmVyUmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVDbGllbnRFcnJvcihcIkNvdWxkbid0IGluaXRpYWxpemUgRWRnZSBTdG9yZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlRXJyb3IocmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgYXdhaXQgaW5pdCgpO1xuICAgIH1cbiAgICByZXR1cm4gLyojX19QVVJFX18qLyBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgZWRnZXN0b3JlOiBjcmVhdGVOZXh0UHJveHkoe1xuICAgICAgICAgICAgICAgIGFwaVBhdGgsXG4gICAgICAgICAgICAgICAgdXBsb2FkaW5nQ291bnRSZWYsXG4gICAgICAgICAgICAgICAgbWF4Q29uY3VycmVudFVwbG9hZHNcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgcmVzZXQsXG4gICAgICAgICAgICBzdGF0ZVxuICAgICAgICB9XG4gICAgfSwgY2hpbGRyZW4pKTtcbn1cblxuZXhwb3J0IHsgY3JlYXRlRWRnZVN0b3JlUHJvdmlkZXIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@edgestore/react/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@edgestore/shared/dist/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@edgestore/shared/dist/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EDGE_STORE_ERROR_CODES: () => (/* binding */ EDGE_STORE_ERROR_CODES),\n/* harmony export */   EdgeStoreApiClientError: () => (/* binding */ EdgeStoreApiClientError),\n/* harmony export */   EdgeStoreError: () => (/* binding */ EdgeStoreError),\n/* harmony export */   initEdgeStore: () => (/* binding */ initEdgeStore)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/lib/index.mjs\");\n\n\nfunction _define_property$1(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n/* eslint-disable @typescript-eslint/no-non-null-assertion */ const EDGE_STORE_ERROR_CODES = {\n    BAD_REQUEST: 400,\n    FILE_TOO_LARGE: 400,\n    MIME_TYPE_NOT_ALLOWED: 400,\n    UNAUTHORIZED: 401,\n    UPLOAD_NOT_ALLOWED: 403,\n    DELETE_NOT_ALLOWED: 403,\n    CREATE_CONTEXT_ERROR: 500,\n    SERVER_ERROR: 500\n};\nclass EdgeStoreError extends Error {\n    formattedMessage() {\n        return `${this.message}${this.details ? `\\n    Details: ${JSON.stringify(this.details)}` : ''}${this.cause ? `\\n    Caused by: ${this.cause.message}` : ''}`;\n    }\n    formattedJson() {\n        return {\n            message: this.code === 'SERVER_ERROR' ? 'Internal server error' : this.message,\n            code: this.code,\n            details: this.details\n        };\n    }\n    constructor(opts){\n        super(opts.message);\n        _define_property$1(this, \"cause\", void 0);\n        _define_property$1(this, \"code\", void 0);\n        _define_property$1(this, \"level\", void 0);\n        _define_property$1(this, \"details\", void 0);\n        this.name = 'EdgeStoreError';\n        this.code = opts.code;\n        this.cause = opts.cause;\n        this.level = EDGE_STORE_ERROR_CODES[opts.code] >= 500 ? 'error' : 'warn';\n        this.details = 'details' in opts ? opts.details : undefined;\n    }\n}\n\nfunction _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nclass EdgeStoreApiClientError extends Error {\n    constructor(opts){\n        super(opts.response.message);\n        _define_property(this, \"data\", void 0);\n        this.name = 'EdgeStoreApiClientError';\n        this.data = opts.response;\n    }\n}\n\n/**\n * Creates a Proxy that prints the path to the property when called.\n *\n * Example:\n *\n * ```ts\n * const pathParamProxy = createPathParamProxy();\n * console.log(pathParamProxy.ctx.user.id());\n * // Logs: \"ctx.user.id\"\n * console.log(pathParamProxy.input.type());\n * // Logs: \"input.type\"\n * ```\n */ function createPathParamProxy() {\n    const getPath = (target, _prop)=>{\n        const proxyFunction = ()=>target;\n        return new Proxy(proxyFunction, {\n            get: (_target, propChild)=>{\n                return getPath(`${target}.${String(propChild)}`);\n            }\n        });\n    };\n    return new Proxy(()=>'', {\n        get: (_target, prop)=>{\n            return getPath(String(prop));\n        }\n    });\n}\n\nconst createNewBuilder = (initDef, newDef)=>{\n    const mergedDef = {\n        ...initDef,\n        ...newDef\n    };\n    return createBuilder({\n        type: mergedDef.type\n    }, mergedDef);\n};\nfunction createBuilder(opts, initDef) {\n    const _def = {\n        type: opts.type,\n        input: zod__WEBPACK_IMPORTED_MODULE_0__.z.never(),\n        path: [],\n        metadata: ()=>({}),\n        ...initDef\n    };\n    return {\n        $config: {\n            ctx: undefined\n        },\n        // @ts-expect-error - I think it would be too much work to make this type correct.\n        _def,\n        input (input) {\n            return createNewBuilder(_def, {\n                input\n            });\n        },\n        path (pathResolver) {\n            // TODO: Should throw a runtime error in the following cases:\n            // 1. in case of multiple keys in one object\n            // 2. in case of duplicate keys\n            const pathParamProxy = createPathParamProxy();\n            const params = pathResolver(pathParamProxy);\n            return createNewBuilder(_def, {\n                path: params\n            });\n        },\n        metadata (metadata) {\n            return createNewBuilder(_def, {\n                metadata\n            });\n        },\n        accessControl (accessControl) {\n            return createNewBuilder(_def, {\n                accessControl: accessControl\n            });\n        },\n        beforeUpload (beforeUpload) {\n            return createNewBuilder(_def, {\n                beforeUpload\n            });\n        },\n        beforeDelete (beforeDelete) {\n            return createNewBuilder(_def, {\n                beforeDelete\n            });\n        }\n    };\n}\nclass EdgeStoreBuilder {\n    context() {\n        return new EdgeStoreBuilder();\n    }\n    create() {\n        return createEdgeStoreInner()();\n    }\n}\nfunction createRouterFactory() {\n    return function createRouterInner(buckets) {\n        return {\n            $config: {\n                ctx: undefined\n            },\n            buckets\n        };\n    };\n}\nfunction initBucket(type, config) {\n    return createBuilder({\n        type\n    }, {\n        bucketConfig: config\n    });\n}\nfunction createEdgeStoreInner() {\n    return function initEdgeStoreInner() {\n        return {\n            /**\n       * Builder object for creating an image bucket\n       */ imageBucket (config) {\n                return initBucket('IMAGE', config);\n            },\n            /**\n       * Builder object for creating a file bucket\n       */ fileBucket (config) {\n                return initBucket('FILE', config);\n            },\n            /**\n       * Create a router\n       */ router: createRouterFactory()\n        };\n    };\n}\n/**\n * Initialize EdgeStore - be done exactly once per backend\n */ const initEdgeStore = new EdgeStoreBuilder(); // ↓↓↓ TYPE TESTS ↓↓↓\n // type Context = {\n //   userId: string;\n //   userRole: 'admin' | 'visitor';\n // };\n // const es = initEdgeStore.context<Context>().create();\n // const imagesBucket = es.imageBucket()\n //   .input(\n //     z.object({\n //       type: z.enum(['profile', 'post']),\n //       extension: z.string().optional(),\n //     }),\n //   )\n //   .path(({ ctx, input }) => [{ author: ctx.userId }, { type: input.type }])\n //   .metadata(({ ctx, input }) => ({\n //     extension: input.extension,\n //     role: ctx.userRole,\n //   }))\n //   .beforeUpload(() => {\n //     return true;\n //   });\n // const a = es.imageBucket()\n //   .input(z.object({ type: z.string(), someMeta: z.string().optional() }))\n //   .path(({ ctx, input }) => [{ author: ctx.userId }, { type: input.type }])\n //   .metadata(({ ctx, input }) => ({\n //     role: ctx.userRole,\n //     someMeta: input.someMeta,\n //   }))\n //   .accessControl({\n //     OR: [\n //       {\n //         userId: { path: 'author' }, // this will check if the userId is the same as the author in the path parameter\n //       },\n //       {\n //         userRole: 'admin', // this is the same as { userRole: { eq: \"admin\" } }\n //       },\n //     ],\n //   })\n //   .beforeUpload(({ ctx, input }) => {\n //     return true;\n //   })\n //   .beforeDelete(({ ctx, file }) => {\n //     return true;\n //   });\n // const b = es.imageBucket().path(({ ctx }) => [{ author: ctx.userId }]);\n // const router = es.router({\n //   original: imagesBucket,\n //   imageBucket: a,\n //   imageBucket2: b,\n // });\n // export { router };\n // type ListFilesResponse<TBucket extends AnyRouter['buckets'][string]> = {\n //   data: {\n //     // url: string;\n //     // size: number;\n //     // uploadedAt: Date;\n //     // metadata: InferMetadataObject<TBucket>;\n //     path: InferBucketPathKeys<TBucket> extends string ? {\n //       [key: string]: string;\n //     } :{\n //       [TKey in InferBucketPathKeys<TBucket>]: string;\n //     };\n //   }[];\n //   pagination: {\n //     currentPage: number;\n //     totalPages: number;\n //     totalCount: number;\n //   };\n // };\n // type TPathKeys = 'author' | 'type';\n // type TPathKeys2 = InferBucketPathKeys<AnyBuilder>;\n // type ObjectWithKeys<TKeys extends string> = {\n //   [TKey in TKeys]: string;\n // };\n // type Test1 = ObjectWithKeys<TPathKeys>;\n // type Test2 = ObjectWithKeys<TPathKeys2>;\n // type PathKeys = InferBucketPathKeys<typeof router.buckets.imageBucket>;\n // type MetadataKeys = InferMetadataObject<typeof router.buckets.imageBucket>;\n // type MyEdgeStoreRouter = typeof router;\n // type MyAccessControl = AccessControlSchema<Context, AnyDef>;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zaGFyZWQvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0I7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixhQUFhLEVBQUUsaUNBQWlDLDZCQUE2QixPQUFPLEVBQUUsaUNBQWlDLG1CQUFtQixPQUFPO0FBQ25LO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsT0FBTyxHQUFHLGtCQUFrQjtBQUM5RDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrQ0FBQztBQUNoQjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxlQUFlLFlBQVksUUFBUSxvQkFBb0IsSUFBSSxrQkFBa0I7QUFDN0UsbUJBQW1CLFlBQVk7QUFDL0I7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0Esd0JBQXdCLG1EQUFtRDtBQUMzRSxlQUFlLFlBQVksUUFBUSxvQkFBb0IsSUFBSSxrQkFBa0I7QUFDN0UsbUJBQW1CLFlBQVk7QUFDL0I7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsZ0JBQWdCO0FBQ3RDLFdBQVc7QUFDWDtBQUNBLHdEQUF3RCxZQUFZO0FBQ3BFLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUCx1QkFBdUIsWUFBWTtBQUNuQztBQUNBLE9BQU87QUFDUCx1QkFBdUIsV0FBVztBQUNsQztBQUNBLE9BQU87QUFDUCx1Q0FBdUMsS0FBSyxRQUFRLG9CQUFvQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTBGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjhfbm90aW9uLWNsb25lLy4vbm9kZV9tb2R1bGVzL0BlZGdlc3RvcmUvc2hhcmVkL2Rpc3QvaW5kZXgubWpzPzE5OGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5cbmZ1bmN0aW9uIF9kZWZpbmVfcHJvcGVydHkkMShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqLyBjb25zdCBFREdFX1NUT1JFX0VSUk9SX0NPREVTID0ge1xuICAgIEJBRF9SRVFVRVNUOiA0MDAsXG4gICAgRklMRV9UT09fTEFSR0U6IDQwMCxcbiAgICBNSU1FX1RZUEVfTk9UX0FMTE9XRUQ6IDQwMCxcbiAgICBVTkFVVEhPUklaRUQ6IDQwMSxcbiAgICBVUExPQURfTk9UX0FMTE9XRUQ6IDQwMyxcbiAgICBERUxFVEVfTk9UX0FMTE9XRUQ6IDQwMyxcbiAgICBDUkVBVEVfQ09OVEVYVF9FUlJPUjogNTAwLFxuICAgIFNFUlZFUl9FUlJPUjogNTAwXG59O1xuY2xhc3MgRWRnZVN0b3JlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZm9ybWF0dGVkTWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMubWVzc2FnZX0ke3RoaXMuZGV0YWlscyA/IGBcXG4gICAgRGV0YWlsczogJHtKU09OLnN0cmluZ2lmeSh0aGlzLmRldGFpbHMpfWAgOiAnJ30ke3RoaXMuY2F1c2UgPyBgXFxuICAgIENhdXNlZCBieTogJHt0aGlzLmNhdXNlLm1lc3NhZ2V9YCA6ICcnfWA7XG4gICAgfVxuICAgIGZvcm1hdHRlZEpzb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmNvZGUgPT09ICdTRVJWRVJfRVJST1InID8gJ0ludGVybmFsIHNlcnZlciBlcnJvcicgOiB0aGlzLm1lc3NhZ2UsXG4gICAgICAgICAgICBjb2RlOiB0aGlzLmNvZGUsXG4gICAgICAgICAgICBkZXRhaWxzOiB0aGlzLmRldGFpbHNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3Iob3B0cyl7XG4gICAgICAgIHN1cGVyKG9wdHMubWVzc2FnZSk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkkMSh0aGlzLCBcImNhdXNlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkkMSh0aGlzLCBcImNvZGVcIiwgdm9pZCAwKTtcbiAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSQxKHRoaXMsIFwibGV2ZWxcIiwgdm9pZCAwKTtcbiAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSQxKHRoaXMsIFwiZGV0YWlsc1wiLCB2b2lkIDApO1xuICAgICAgICB0aGlzLm5hbWUgPSAnRWRnZVN0b3JlRXJyb3InO1xuICAgICAgICB0aGlzLmNvZGUgPSBvcHRzLmNvZGU7XG4gICAgICAgIHRoaXMuY2F1c2UgPSBvcHRzLmNhdXNlO1xuICAgICAgICB0aGlzLmxldmVsID0gRURHRV9TVE9SRV9FUlJPUl9DT0RFU1tvcHRzLmNvZGVdID49IDUwMCA/ICdlcnJvcicgOiAnd2Fybic7XG4gICAgICAgIHRoaXMuZGV0YWlscyA9ICdkZXRhaWxzJyBpbiBvcHRzID8gb3B0cy5kZXRhaWxzIDogdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX2RlZmluZV9wcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuY2xhc3MgRWRnZVN0b3JlQXBpQ2xpZW50RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3Iob3B0cyl7XG4gICAgICAgIHN1cGVyKG9wdHMucmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJkYXRhXCIsIHZvaWQgMCk7XG4gICAgICAgIHRoaXMubmFtZSA9ICdFZGdlU3RvcmVBcGlDbGllbnRFcnJvcic7XG4gICAgICAgIHRoaXMuZGF0YSA9IG9wdHMucmVzcG9uc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBQcm94eSB0aGF0IHByaW50cyB0aGUgcGF0aCB0byB0aGUgcHJvcGVydHkgd2hlbiBjYWxsZWQuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGB0c1xuICogY29uc3QgcGF0aFBhcmFtUHJveHkgPSBjcmVhdGVQYXRoUGFyYW1Qcm94eSgpO1xuICogY29uc29sZS5sb2cocGF0aFBhcmFtUHJveHkuY3R4LnVzZXIuaWQoKSk7XG4gKiAvLyBMb2dzOiBcImN0eC51c2VyLmlkXCJcbiAqIGNvbnNvbGUubG9nKHBhdGhQYXJhbVByb3h5LmlucHV0LnR5cGUoKSk7XG4gKiAvLyBMb2dzOiBcImlucHV0LnR5cGVcIlxuICogYGBgXG4gKi8gZnVuY3Rpb24gY3JlYXRlUGF0aFBhcmFtUHJveHkoKSB7XG4gICAgY29uc3QgZ2V0UGF0aCA9ICh0YXJnZXQsIF9wcm9wKT0+e1xuICAgICAgICBjb25zdCBwcm94eUZ1bmN0aW9uID0gKCk9PnRhcmdldDtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eShwcm94eUZ1bmN0aW9uLCB7XG4gICAgICAgICAgICBnZXQ6IChfdGFyZ2V0LCBwcm9wQ2hpbGQpPT57XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFBhdGgoYCR7dGFyZ2V0fS4ke1N0cmluZyhwcm9wQ2hpbGQpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBuZXcgUHJveHkoKCk9PicnLCB7XG4gICAgICAgIGdldDogKF90YXJnZXQsIHByb3ApPT57XG4gICAgICAgICAgICByZXR1cm4gZ2V0UGF0aChTdHJpbmcocHJvcCkpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmNvbnN0IGNyZWF0ZU5ld0J1aWxkZXIgPSAoaW5pdERlZiwgbmV3RGVmKT0+e1xuICAgIGNvbnN0IG1lcmdlZERlZiA9IHtcbiAgICAgICAgLi4uaW5pdERlZixcbiAgICAgICAgLi4ubmV3RGVmXG4gICAgfTtcbiAgICByZXR1cm4gY3JlYXRlQnVpbGRlcih7XG4gICAgICAgIHR5cGU6IG1lcmdlZERlZi50eXBlXG4gICAgfSwgbWVyZ2VkRGVmKTtcbn07XG5mdW5jdGlvbiBjcmVhdGVCdWlsZGVyKG9wdHMsIGluaXREZWYpIHtcbiAgICBjb25zdCBfZGVmID0ge1xuICAgICAgICB0eXBlOiBvcHRzLnR5cGUsXG4gICAgICAgIGlucHV0OiB6Lm5ldmVyKCksXG4gICAgICAgIHBhdGg6IFtdLFxuICAgICAgICBtZXRhZGF0YTogKCk9Pih7fSksXG4gICAgICAgIC4uLmluaXREZWZcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgICRjb25maWc6IHtcbiAgICAgICAgICAgIGN0eDogdW5kZWZpbmVkXG4gICAgICAgIH0sXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBJIHRoaW5rIGl0IHdvdWxkIGJlIHRvbyBtdWNoIHdvcmsgdG8gbWFrZSB0aGlzIHR5cGUgY29ycmVjdC5cbiAgICAgICAgX2RlZixcbiAgICAgICAgaW5wdXQgKGlucHV0KSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlTmV3QnVpbGRlcihfZGVmLCB7XG4gICAgICAgICAgICAgICAgaW5wdXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBwYXRoIChwYXRoUmVzb2x2ZXIpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IFNob3VsZCB0aHJvdyBhIHJ1bnRpbWUgZXJyb3IgaW4gdGhlIGZvbGxvd2luZyBjYXNlczpcbiAgICAgICAgICAgIC8vIDEuIGluIGNhc2Ugb2YgbXVsdGlwbGUga2V5cyBpbiBvbmUgb2JqZWN0XG4gICAgICAgICAgICAvLyAyLiBpbiBjYXNlIG9mIGR1cGxpY2F0ZSBrZXlzXG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1Qcm94eSA9IGNyZWF0ZVBhdGhQYXJhbVByb3h5KCk7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBwYXRoUmVzb2x2ZXIocGF0aFBhcmFtUHJveHkpO1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIHBhdGg6IHBhcmFtc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG1ldGFkYXRhIChtZXRhZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYWNjZXNzQ29udHJvbCAoYWNjZXNzQ29udHJvbCkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIGFjY2Vzc0NvbnRyb2w6IGFjY2Vzc0NvbnRyb2xcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBiZWZvcmVVcGxvYWQgKGJlZm9yZVVwbG9hZCkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIGJlZm9yZVVwbG9hZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGJlZm9yZURlbGV0ZSAoYmVmb3JlRGVsZXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlTmV3QnVpbGRlcihfZGVmLCB7XG4gICAgICAgICAgICAgICAgYmVmb3JlRGVsZXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5jbGFzcyBFZGdlU3RvcmVCdWlsZGVyIHtcbiAgICBjb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gbmV3IEVkZ2VTdG9yZUJ1aWxkZXIoKTtcbiAgICB9XG4gICAgY3JlYXRlKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWRnZVN0b3JlSW5uZXIoKSgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlckZhY3RvcnkoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNyZWF0ZVJvdXRlcklubmVyKGJ1Y2tldHMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICRjb25maWc6IHtcbiAgICAgICAgICAgICAgICBjdHg6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1Y2tldHNcbiAgICAgICAgfTtcbiAgICB9O1xufVxuZnVuY3Rpb24gaW5pdEJ1Y2tldCh0eXBlLCBjb25maWcpIHtcbiAgICByZXR1cm4gY3JlYXRlQnVpbGRlcih7XG4gICAgICAgIHR5cGVcbiAgICB9LCB7XG4gICAgICAgIGJ1Y2tldENvbmZpZzogY29uZmlnXG4gICAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVFZGdlU3RvcmVJbm5lcigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaW5pdEVkZ2VTdG9yZUlubmVyKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgKiBCdWlsZGVyIG9iamVjdCBmb3IgY3JlYXRpbmcgYW4gaW1hZ2UgYnVja2V0XG4gICAgICAgKi8gaW1hZ2VCdWNrZXQgKGNvbmZpZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbml0QnVja2V0KCdJTUFHRScsIGNvbmZpZyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgKiBCdWlsZGVyIG9iamVjdCBmb3IgY3JlYXRpbmcgYSBmaWxlIGJ1Y2tldFxuICAgICAgICovIGZpbGVCdWNrZXQgKGNvbmZpZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbml0QnVja2V0KCdGSUxFJywgY29uZmlnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAqIENyZWF0ZSBhIHJvdXRlclxuICAgICAgICovIHJvdXRlcjogY3JlYXRlUm91dGVyRmFjdG9yeSgpXG4gICAgICAgIH07XG4gICAgfTtcbn1cbi8qKlxuICogSW5pdGlhbGl6ZSBFZGdlU3RvcmUgLSBiZSBkb25lIGV4YWN0bHkgb25jZSBwZXIgYmFja2VuZFxuICovIGNvbnN0IGluaXRFZGdlU3RvcmUgPSBuZXcgRWRnZVN0b3JlQnVpbGRlcigpOyAvLyDihpPihpPihpMgVFlQRSBURVNUUyDihpPihpPihpNcbiAvLyB0eXBlIENvbnRleHQgPSB7XG4gLy8gICB1c2VySWQ6IHN0cmluZztcbiAvLyAgIHVzZXJSb2xlOiAnYWRtaW4nIHwgJ3Zpc2l0b3InO1xuIC8vIH07XG4gLy8gY29uc3QgZXMgPSBpbml0RWRnZVN0b3JlLmNvbnRleHQ8Q29udGV4dD4oKS5jcmVhdGUoKTtcbiAvLyBjb25zdCBpbWFnZXNCdWNrZXQgPSBlcy5pbWFnZUJ1Y2tldCgpXG4gLy8gICAuaW5wdXQoXG4gLy8gICAgIHoub2JqZWN0KHtcbiAvLyAgICAgICB0eXBlOiB6LmVudW0oWydwcm9maWxlJywgJ3Bvc3QnXSksXG4gLy8gICAgICAgZXh0ZW5zaW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gLy8gICAgIH0pLFxuIC8vICAgKVxuIC8vICAgLnBhdGgoKHsgY3R4LCBpbnB1dCB9KSA9PiBbeyBhdXRob3I6IGN0eC51c2VySWQgfSwgeyB0eXBlOiBpbnB1dC50eXBlIH1dKVxuIC8vICAgLm1ldGFkYXRhKCh7IGN0eCwgaW5wdXQgfSkgPT4gKHtcbiAvLyAgICAgZXh0ZW5zaW9uOiBpbnB1dC5leHRlbnNpb24sXG4gLy8gICAgIHJvbGU6IGN0eC51c2VyUm9sZSxcbiAvLyAgIH0pKVxuIC8vICAgLmJlZm9yZVVwbG9hZCgoKSA9PiB7XG4gLy8gICAgIHJldHVybiB0cnVlO1xuIC8vICAgfSk7XG4gLy8gY29uc3QgYSA9IGVzLmltYWdlQnVja2V0KClcbiAvLyAgIC5pbnB1dCh6Lm9iamVjdCh7IHR5cGU6IHouc3RyaW5nKCksIHNvbWVNZXRhOiB6LnN0cmluZygpLm9wdGlvbmFsKCkgfSkpXG4gLy8gICAucGF0aCgoeyBjdHgsIGlucHV0IH0pID0+IFt7IGF1dGhvcjogY3R4LnVzZXJJZCB9LCB7IHR5cGU6IGlucHV0LnR5cGUgfV0pXG4gLy8gICAubWV0YWRhdGEoKHsgY3R4LCBpbnB1dCB9KSA9PiAoe1xuIC8vICAgICByb2xlOiBjdHgudXNlclJvbGUsXG4gLy8gICAgIHNvbWVNZXRhOiBpbnB1dC5zb21lTWV0YSxcbiAvLyAgIH0pKVxuIC8vICAgLmFjY2Vzc0NvbnRyb2woe1xuIC8vICAgICBPUjogW1xuIC8vICAgICAgIHtcbiAvLyAgICAgICAgIHVzZXJJZDogeyBwYXRoOiAnYXV0aG9yJyB9LCAvLyB0aGlzIHdpbGwgY2hlY2sgaWYgdGhlIHVzZXJJZCBpcyB0aGUgc2FtZSBhcyB0aGUgYXV0aG9yIGluIHRoZSBwYXRoIHBhcmFtZXRlclxuIC8vICAgICAgIH0sXG4gLy8gICAgICAge1xuIC8vICAgICAgICAgdXNlclJvbGU6ICdhZG1pbicsIC8vIHRoaXMgaXMgdGhlIHNhbWUgYXMgeyB1c2VyUm9sZTogeyBlcTogXCJhZG1pblwiIH0gfVxuIC8vICAgICAgIH0sXG4gLy8gICAgIF0sXG4gLy8gICB9KVxuIC8vICAgLmJlZm9yZVVwbG9hZCgoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAvLyAgICAgcmV0dXJuIHRydWU7XG4gLy8gICB9KVxuIC8vICAgLmJlZm9yZURlbGV0ZSgoeyBjdHgsIGZpbGUgfSkgPT4ge1xuIC8vICAgICByZXR1cm4gdHJ1ZTtcbiAvLyAgIH0pO1xuIC8vIGNvbnN0IGIgPSBlcy5pbWFnZUJ1Y2tldCgpLnBhdGgoKHsgY3R4IH0pID0+IFt7IGF1dGhvcjogY3R4LnVzZXJJZCB9XSk7XG4gLy8gY29uc3Qgcm91dGVyID0gZXMucm91dGVyKHtcbiAvLyAgIG9yaWdpbmFsOiBpbWFnZXNCdWNrZXQsXG4gLy8gICBpbWFnZUJ1Y2tldDogYSxcbiAvLyAgIGltYWdlQnVja2V0MjogYixcbiAvLyB9KTtcbiAvLyBleHBvcnQgeyByb3V0ZXIgfTtcbiAvLyB0eXBlIExpc3RGaWxlc1Jlc3BvbnNlPFRCdWNrZXQgZXh0ZW5kcyBBbnlSb3V0ZXJbJ2J1Y2tldHMnXVtzdHJpbmddPiA9IHtcbiAvLyAgIGRhdGE6IHtcbiAvLyAgICAgLy8gdXJsOiBzdHJpbmc7XG4gLy8gICAgIC8vIHNpemU6IG51bWJlcjtcbiAvLyAgICAgLy8gdXBsb2FkZWRBdDogRGF0ZTtcbiAvLyAgICAgLy8gbWV0YWRhdGE6IEluZmVyTWV0YWRhdGFPYmplY3Q8VEJ1Y2tldD47XG4gLy8gICAgIHBhdGg6IEluZmVyQnVja2V0UGF0aEtleXM8VEJ1Y2tldD4gZXh0ZW5kcyBzdHJpbmcgPyB7XG4gLy8gICAgICAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xuIC8vICAgICB9IDp7XG4gLy8gICAgICAgW1RLZXkgaW4gSW5mZXJCdWNrZXRQYXRoS2V5czxUQnVja2V0Pl06IHN0cmluZztcbiAvLyAgICAgfTtcbiAvLyAgIH1bXTtcbiAvLyAgIHBhZ2luYXRpb246IHtcbiAvLyAgICAgY3VycmVudFBhZ2U6IG51bWJlcjtcbiAvLyAgICAgdG90YWxQYWdlczogbnVtYmVyO1xuIC8vICAgICB0b3RhbENvdW50OiBudW1iZXI7XG4gLy8gICB9O1xuIC8vIH07XG4gLy8gdHlwZSBUUGF0aEtleXMgPSAnYXV0aG9yJyB8ICd0eXBlJztcbiAvLyB0eXBlIFRQYXRoS2V5czIgPSBJbmZlckJ1Y2tldFBhdGhLZXlzPEFueUJ1aWxkZXI+O1xuIC8vIHR5cGUgT2JqZWN0V2l0aEtleXM8VEtleXMgZXh0ZW5kcyBzdHJpbmc+ID0ge1xuIC8vICAgW1RLZXkgaW4gVEtleXNdOiBzdHJpbmc7XG4gLy8gfTtcbiAvLyB0eXBlIFRlc3QxID0gT2JqZWN0V2l0aEtleXM8VFBhdGhLZXlzPjtcbiAvLyB0eXBlIFRlc3QyID0gT2JqZWN0V2l0aEtleXM8VFBhdGhLZXlzMj47XG4gLy8gdHlwZSBQYXRoS2V5cyA9IEluZmVyQnVja2V0UGF0aEtleXM8dHlwZW9mIHJvdXRlci5idWNrZXRzLmltYWdlQnVja2V0PjtcbiAvLyB0eXBlIE1ldGFkYXRhS2V5cyA9IEluZmVyTWV0YWRhdGFPYmplY3Q8dHlwZW9mIHJvdXRlci5idWNrZXRzLmltYWdlQnVja2V0PjtcbiAvLyB0eXBlIE15RWRnZVN0b3JlUm91dGVyID0gdHlwZW9mIHJvdXRlcjtcbiAvLyB0eXBlIE15QWNjZXNzQ29udHJvbCA9IEFjY2Vzc0NvbnRyb2xTY2hlbWE8Q29udGV4dCwgQW55RGVmPjtcblxuZXhwb3J0IHsgRURHRV9TVE9SRV9FUlJPUl9DT0RFUywgRWRnZVN0b3JlQXBpQ2xpZW50RXJyb3IsIEVkZ2VTdG9yZUVycm9yLCBpbml0RWRnZVN0b3JlIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@edgestore/shared/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/dist/adapters/next/app/index.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@edgestore/server/dist/adapters/next/app/index.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEdgeStoreNextHandler: () => (/* binding */ createEdgeStoreNextHandler)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/@edgestore/shared/dist/index.mjs\");\n/* harmony import */ var _logger_09f43a75_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../logger-09f43a75.mjs */ \"(rsc)/./node_modules/@edgestore/server/dist/logger-09f43a75.mjs\");\n/* harmony import */ var _providers_edgestore_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../providers/edgestore/index.mjs */ \"(rsc)/./node_modules/@edgestore/server/dist/providers/edgestore/index.mjs\");\n/* harmony import */ var _shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared-039276af.mjs */ \"(rsc)/./node_modules/@edgestore/server/dist/shared-039276af.mjs\");\n/* harmony import */ var _index_28efdacf_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../index-28efdacf.mjs */ \"(rsc)/./node_modules/@edgestore/server/dist/index-28efdacf.mjs\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! cookie */ \"(rsc)/./node_modules/cookie/index.js\");\n\n\n\n\n\n\n\n\n\nfunction createEdgeStoreNextHandler(config) {\n    const { provider = (0,_providers_edgestore_index_mjs__WEBPACK_IMPORTED_MODULE_2__.EdgeStoreProvider)() } = config;\n    const log = new _logger_09f43a75_mjs__WEBPACK_IMPORTED_MODULE_1__.L(config.logLevel);\n    globalThis._EDGE_STORE_LOGGER = log;\n    log.debug(\"Creating Edge Store Next handler (app adapter)\");\n    return async (req)=>{\n        try {\n            if (!(\"nextUrl\" in req)) throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: \"Error running the app adapter. Make sure you are importing the correct adapter in your router configuration\",\n                code: \"SERVER_ERROR\"\n            });\n            if (req.nextUrl.pathname.endsWith(\"/health\")) {\n                return new Response(\"OK\", {\n                    status: 200\n                });\n            } else if (req.nextUrl.pathname.endsWith(\"/init\")) {\n                let ctx = {};\n                try {\n                    ctx = \"createContext\" in config ? await config.createContext({\n                        req\n                    }) : {};\n                } catch (err) {\n                    throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                        message: \"Error creating context\",\n                        code: \"CREATE_CONTEXT_ERROR\",\n                        cause: err instanceof Error ? err : undefined\n                    });\n                }\n                const { newCookies, token, baseUrl } = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.i)({\n                    ctx,\n                    provider,\n                    router: config.router\n                });\n                const res = new Response(JSON.stringify({\n                    token,\n                    baseUrl\n                }), {\n                    status: 200,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n                for (const cookie of newCookies){\n                    res.headers.append(\"Set-Cookie\", cookie);\n                }\n                return res;\n            } else if (req.nextUrl.pathname.endsWith(\"/request-upload\")) {\n                const res = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.r)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get(\"edgestore-ctx\")?.value\n                });\n                return new Response(JSON.stringify(res), {\n                    status: 200,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            } else if (req.nextUrl.pathname.endsWith(\"/request-upload-parts\")) {\n                const res = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get(\"edgestore-ctx\")?.value\n                });\n                return new Response(JSON.stringify(res), {\n                    status: 200,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            } else if (req.nextUrl.pathname.endsWith(\"/complete-multipart-upload\")) {\n                await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get(\"edgestore-ctx\")?.value\n                });\n                return new Response(null, {\n                    status: 200\n                });\n            } else if (req.nextUrl.pathname.endsWith(\"/confirm-upload\")) {\n                const res = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.d)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get(\"edgestore-ctx\")?.value\n                });\n                return new Response(JSON.stringify(res), {\n                    status: 200,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            } else if (req.nextUrl.pathname.endsWith(\"/delete-file\")) {\n                const res = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.e)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get(\"edgestore-ctx\")?.value\n                });\n                return new Response(JSON.stringify(res), {\n                    status: 200,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            } else if (req.nextUrl.pathname.endsWith(\"/proxy-file\")) {\n                const url = req.nextUrl.searchParams.get(\"url\");\n                if (typeof url === \"string\") {\n                    const proxyRes = await fetch(url, {\n                        headers: {\n                            cookie: req.cookies.toString() ?? \"\"\n                        }\n                    });\n                    const data = await proxyRes.arrayBuffer();\n                    return new Response(data, {\n                        status: proxyRes.status,\n                        headers: {\n                            \"Content-Type\": proxyRes.headers.get(\"Content-Type\") ?? \"application/octet-stream\"\n                        }\n                    });\n                } else {\n                    return new Response(null, {\n                        status: 400\n                    });\n                }\n            } else {\n                return new Response(null, {\n                    status: 404\n                });\n            }\n        } catch (err) {\n            if (err instanceof _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError) {\n                log[err.level](err.formattedMessage());\n                if (err.cause) log[err.level](err.cause);\n                return new Response(JSON.stringify(err.formattedJson()), {\n                    status: _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EDGE_STORE_ERROR_CODES[err.code],\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            }\n            log.error(err);\n            return new Response(JSON.stringify(new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: \"Internal server error\",\n                code: \"SERVER_ERROR\"\n            }).formattedJson()), {\n                status: 500,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n    };\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9hZGFwdGVycy9uZXh0L2FwcC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEyRTtBQUNoQjtBQUNnQjtBQUM4RjtBQUNwSTtBQUNoQjtBQUNMO0FBQ0Y7QUFDQTtBQUVkLFNBQVNpQiwyQkFBMkJDLE1BQU07SUFDdEMsTUFBTSxFQUFFQyxXQUFXZixpRkFBaUJBLEVBQUUsRUFBRSxHQUFHYztJQUMzQyxNQUFNRSxNQUFNLElBQUlqQixtREFBTUEsQ0FBQ2UsT0FBT0csUUFBUTtJQUN0Q0MsV0FBV0Msa0JBQWtCLEdBQUdIO0lBQ2hDQSxJQUFJSSxLQUFLLENBQUM7SUFDVixPQUFPLE9BQU9DO1FBQ1YsSUFBSTtZQUNBLElBQUksQ0FBRSxjQUFhQSxHQUFFLEdBQUksTUFBTSxJQUFJekIsNkRBQWNBLENBQUM7Z0JBQzlDMEIsU0FBUztnQkFDVEMsTUFBTTtZQUNWO1lBQ0EsSUFBSUYsSUFBSUcsT0FBTyxDQUFDQyxRQUFRLENBQUNDLFFBQVEsQ0FBQyxZQUFZO2dCQUMxQyxPQUFPLElBQUlDLFNBQVMsTUFBTTtvQkFDdEJDLFFBQVE7Z0JBQ1o7WUFDSixPQUFPLElBQUlQLElBQUlHLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxRQUFRLENBQUMsVUFBVTtnQkFDL0MsSUFBSUcsTUFBTSxDQUFDO2dCQUNYLElBQUk7b0JBQ0FBLE1BQU0sbUJBQW1CZixTQUFTLE1BQU1BLE9BQU9nQixhQUFhLENBQUM7d0JBQ3pEVDtvQkFDSixLQUFLLENBQUM7Z0JBQ1YsRUFBRSxPQUFPVSxLQUFLO29CQUNWLE1BQU0sSUFBSW5DLDZEQUFjQSxDQUFDO3dCQUNyQjBCLFNBQVM7d0JBQ1RDLE1BQU07d0JBQ05TLE9BQU9ELGVBQWVFLFFBQVFGLE1BQU1HO29CQUN4QztnQkFDSjtnQkFDQSxNQUFNLEVBQUVDLFVBQVUsRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUUsR0FBRyxNQUFNbkMsdURB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LElBQUk2QyxLQUFLLENBQUM5QjtZQUNWLE9BQU8sSUFBSUosU0FBU2EsS0FBS0MsU0FBUyxDQUFDLElBQUk3Qyw2REFBY0EsQ0FBQztnQkFDbEQwQixTQUFTO2dCQUNUQyxNQUFNO1lBQ1YsR0FBR3FDLGFBQWEsS0FBSztnQkFDakJoQyxRQUFRO2dCQUNSYyxTQUFTO29CQUNMLGdCQUFnQjtnQkFDcEI7WUFDSjtRQUNKO0lBQ0o7QUFDSjtBQUVzQyIsInNvdXJjZXMiOlsid2VicGFjazovLzI4X25vdGlvbi1jbG9uZS8uL25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NlcnZlci9kaXN0L2FkYXB0ZXJzL25leHQvYXBwL2luZGV4Lm1qcz83NzQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVkZ2VTdG9yZUVycm9yLCBFREdFX1NUT1JFX0VSUk9SX0NPREVTIH0gZnJvbSAnQGVkZ2VzdG9yZS9zaGFyZWQnO1xuaW1wb3J0IHsgTCBhcyBMb2dnZXIgfSBmcm9tICcuLi8uLi8uLi9sb2dnZXItMDlmNDNhNzUubWpzJztcbmltcG9ydCB7IEVkZ2VTdG9yZVByb3ZpZGVyIH0gZnJvbSAnLi4vLi4vLi4vcHJvdmlkZXJzL2VkZ2VzdG9yZS9pbmRleC5tanMnO1xuaW1wb3J0IHsgaSBhcyBpbml0LCByIGFzIHJlcXVlc3RVcGxvYWQsIGEgYXMgcmVxdWVzdFVwbG9hZFBhcnRzLCBjIGFzIGNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkLCBkIGFzIGNvbmZpcm1VcGxvYWQsIGUgYXMgZGVsZXRlRmlsZSB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC0wMzkyNzZhZi5tanMnO1xuaW1wb3J0ICcuLi8uLi8uLi9pbmRleC0yOGVmZGFjZi5tanMnO1xuaW1wb3J0ICdAcGFudmEvaGtkZic7XG5pbXBvcnQgJ2Nvb2tpZSc7XG5pbXBvcnQgJ2pvc2UnO1xuaW1wb3J0ICd1dWlkJztcblxuZnVuY3Rpb24gY3JlYXRlRWRnZVN0b3JlTmV4dEhhbmRsZXIoY29uZmlnKSB7XG4gICAgY29uc3QgeyBwcm92aWRlciA9IEVkZ2VTdG9yZVByb3ZpZGVyKCkgfSA9IGNvbmZpZztcbiAgICBjb25zdCBsb2cgPSBuZXcgTG9nZ2VyKGNvbmZpZy5sb2dMZXZlbCk7XG4gICAgZ2xvYmFsVGhpcy5fRURHRV9TVE9SRV9MT0dHRVIgPSBsb2c7XG4gICAgbG9nLmRlYnVnKCdDcmVhdGluZyBFZGdlIFN0b3JlIE5leHQgaGFuZGxlciAoYXBwIGFkYXB0ZXIpJyk7XG4gICAgcmV0dXJuIGFzeW5jIChyZXEpPT57XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoISgnbmV4dFVybCcgaW4gcmVxKSkgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgcnVubmluZyB0aGUgYXBwIGFkYXB0ZXIuIE1ha2Ugc3VyZSB5b3UgYXJlIGltcG9ydGluZyB0aGUgY29ycmVjdCBhZGFwdGVyIGluIHlvdXIgcm91dGVyIGNvbmZpZ3VyYXRpb24nLFxuICAgICAgICAgICAgICAgIGNvZGU6ICdTRVJWRVJfRVJST1InXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChyZXEubmV4dFVybC5wYXRobmFtZS5lbmRzV2l0aCgnL2hlYWx0aCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZSgnT0snLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlcS5uZXh0VXJsLnBhdGhuYW1lLmVuZHNXaXRoKCcvaW5pdCcpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGN0eCA9IHt9O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9ICdjcmVhdGVDb250ZXh0JyBpbiBjb25maWcgPyBhd2FpdCBjb25maWcuY3JlYXRlQ29udGV4dCh7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXFcbiAgICAgICAgICAgICAgICAgICAgfSkgOiB7fTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBjcmVhdGluZyBjb250ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICdDUkVBVEVfQ09OVEVYVF9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXVzZTogZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHsgbmV3Q29va2llcywgdG9rZW4sIGJhc2VVcmwgfSA9IGF3YWl0IGluaXQoe1xuICAgICAgICAgICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZXI6IGNvbmZpZy5yb3V0ZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgICAgICAgICAgYmFzZVVybFxuICAgICAgICAgICAgICAgIH0pLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvb2tpZSBvZiBuZXdDb29raWVzKXtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmhlYWRlcnMuYXBwZW5kKCdTZXQtQ29va2llJywgY29va2llKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxLm5leHRVcmwucGF0aG5hbWUuZW5kc1dpdGgoJy9yZXF1ZXN0LXVwbG9hZCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdFVwbG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZXI6IGNvbmZpZy5yb3V0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IGF3YWl0IHJlcS5qc29uKCksXG4gICAgICAgICAgICAgICAgICAgIGN0eFRva2VuOiByZXEuY29va2llcy5nZXQoJ2VkZ2VzdG9yZS1jdHgnKT8udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHJlcyksIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXEubmV4dFVybC5wYXRobmFtZS5lbmRzV2l0aCgnL3JlcXVlc3QtdXBsb2FkLXBhcnRzJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0VXBsb2FkUGFydHMoe1xuICAgICAgICAgICAgICAgICAgICBwcm92aWRlcixcbiAgICAgICAgICAgICAgICAgICAgcm91dGVyOiBjb25maWcucm91dGVyLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiBhd2FpdCByZXEuanNvbigpLFxuICAgICAgICAgICAgICAgICAgICBjdHhUb2tlbjogcmVxLmNvb2tpZXMuZ2V0KCdlZGdlc3RvcmUtY3R4Jyk/LnZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeShyZXMpLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxLm5leHRVcmwucGF0aG5hbWUuZW5kc1dpdGgoJy9jb21wbGV0ZS1tdWx0aXBhcnQtdXBsb2FkJykpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjb21wbGV0ZU11bHRpcGFydFVwbG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZXI6IGNvbmZpZy5yb3V0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IGF3YWl0IHJlcS5qc29uKCksXG4gICAgICAgICAgICAgICAgICAgIGN0eFRva2VuOiByZXEuY29va2llcy5nZXQoJ2VkZ2VzdG9yZS1jdHgnKT8udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyMDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxLm5leHRVcmwucGF0aG5hbWUuZW5kc1dpdGgoJy9jb25maXJtLXVwbG9hZCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgY29uZmlybVVwbG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZXI6IGNvbmZpZy5yb3V0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IGF3YWl0IHJlcS5qc29uKCksXG4gICAgICAgICAgICAgICAgICAgIGN0eFRva2VuOiByZXEuY29va2llcy5nZXQoJ2VkZ2VzdG9yZS1jdHgnKT8udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHJlcyksIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXEubmV4dFVybC5wYXRobmFtZS5lbmRzV2l0aCgnL2RlbGV0ZS1maWxlJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBkZWxldGVGaWxlKHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlcjogY29uZmlnLnJvdXRlcixcbiAgICAgICAgICAgICAgICAgICAgYm9keTogYXdhaXQgcmVxLmpzb24oKSxcbiAgICAgICAgICAgICAgICAgICAgY3R4VG9rZW46IHJlcS5jb29raWVzLmdldCgnZWRnZXN0b3JlLWN0eCcpPy52YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkocmVzKSwge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlcS5uZXh0VXJsLnBhdGhuYW1lLmVuZHNXaXRoKCcvcHJveHktZmlsZScpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gcmVxLm5leHRVcmwuc2VhcmNoUGFyYW1zLmdldCgndXJsJyk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3h5UmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29va2llOiByZXEuY29va2llcy50b1N0cmluZygpID8/ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcHJveHlSZXMuYXJyYXlCdWZmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShkYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHByb3h5UmVzLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogcHJveHlSZXMuaGVhZGVycy5nZXQoJ0NvbnRlbnQtVHlwZScpID8/ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiA0MDBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiA0MDRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRWRnZVN0b3JlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dbZXJyLmxldmVsXShlcnIuZm9ybWF0dGVkTWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyLmNhdXNlKSBsb2dbZXJyLmxldmVsXShlcnIuY2F1c2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoZXJyLmZvcm1hdHRlZEpzb24oKSksIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBFREdFX1NUT1JFX0VSUk9SX0NPREVTW2Vyci5jb2RlXSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2cuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkobmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICAgICAgICAgICAgICBjb2RlOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgICAgICAgfSkuZm9ybWF0dGVkSnNvbigpKSwge1xuICAgICAgICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgY3JlYXRlRWRnZVN0b3JlTmV4dEhhbmRsZXIgfTtcbiJdLCJuYW1lcyI6WyJFZGdlU3RvcmVFcnJvciIsIkVER0VfU1RPUkVfRVJST1JfQ09ERVMiLCJMIiwiTG9nZ2VyIiwiRWRnZVN0b3JlUHJvdmlkZXIiLCJpIiwiaW5pdCIsInIiLCJyZXF1ZXN0VXBsb2FkIiwiYSIsInJlcXVlc3RVcGxvYWRQYXJ0cyIsImMiLCJjb21wbGV0ZU11bHRpcGFydFVwbG9hZCIsImQiLCJjb25maXJtVXBsb2FkIiwiZSIsImRlbGV0ZUZpbGUiLCJjcmVhdGVFZGdlU3RvcmVOZXh0SGFuZGxlciIsImNvbmZpZyIsInByb3ZpZGVyIiwibG9nIiwibG9nTGV2ZWwiLCJnbG9iYWxUaGlzIiwiX0VER0VfU1RPUkVfTE9HR0VSIiwiZGVidWciLCJyZXEiLCJtZXNzYWdlIiwiY29kZSIsIm5leHRVcmwiLCJwYXRobmFtZSIsImVuZHNXaXRoIiwiUmVzcG9uc2UiLCJzdGF0dXMiLCJjdHgiLCJjcmVhdGVDb250ZXh0IiwiZXJyIiwiY2F1c2UiLCJFcnJvciIsInVuZGVmaW5lZCIsIm5ld0Nvb2tpZXMiLCJ0b2tlbiIsImJhc2VVcmwiLCJyb3V0ZXIiLCJyZXMiLCJKU09OIiwic3RyaW5naWZ5IiwiaGVhZGVycyIsImNvb2tpZSIsImFwcGVuZCIsImJvZHkiLCJqc29uIiwiY3R4VG9rZW4iLCJjb29raWVzIiwiZ2V0IiwidmFsdWUiLCJ1cmwiLCJzZWFyY2hQYXJhbXMiLCJwcm94eVJlcyIsImZldGNoIiwidG9TdHJpbmciLCJkYXRhIiwiYXJyYXlCdWZmZXIiLCJsZXZlbCIsImZvcm1hdHRlZE1lc3NhZ2UiLCJmb3JtYXR0ZWRKc29uIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/dist/adapters/next/app/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/dist/index-28efdacf.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@edgestore/server/dist/index-28efdacf.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   E: () => (/* binding */ EdgeStoreCredentialsError),\n/* harmony export */   e: () => (/* binding */ edgeStoreRawSdk),\n/* harmony export */   i: () => (/* binding */ initEdgeStoreSdk)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/@edgestore/shared/dist/index.mjs\");\n\nconst DEFAULT_MESSAGE = `Missing EDGE_STORE_ACCESS_KEY or EDGE_STORE_SECRET_KEY. \nThis can happen if you are trying to import something related to the backend of Edge Store in a client component.`;\nclass EdgeStoreCredentialsError extends Error {\n    constructor(message = DEFAULT_MESSAGE){\n        super(message);\n        this.name = \"EdgeStoreCredentialsError\";\n    }\n}\nconst API_ENDPOINT = process.env.EDGE_STORE_API_ENDPOINT ?? \"https://api.edgestore.dev\";\nasync function makeRequest(params) {\n    const { body, accessKey, secretKey, path } = params;\n    const res = await fetch(`${API_ENDPOINT}${path}`, {\n        method: \"POST\",\n        body: JSON.stringify(body),\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Basic ${Buffer.from(`${accessKey}:${secretKey}`).toString(\"base64\")}`\n        }\n    });\n    if (!res.ok) {\n        throw new Error(`Failed to make request to ${path}: ${await res.text()}`);\n    }\n    return await res.json();\n}\nconst edgeStoreRawSdk = {\n    async getToken (params) {\n        const reqBuckets = Object.entries(params.router.buckets).reduce((acc, [bucketName, bucket])=>{\n            acc[bucketName] = {\n                path: bucket._def.path.map((p)=>{\n                    const paramEntries = Object.entries(p);\n                    if (paramEntries[0] === undefined) {\n                        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                            message: `Empty path param found in: ${JSON.stringify(bucket._def.path)}`,\n                            code: \"SERVER_ERROR\"\n                        });\n                    }\n                    const [key, value] = paramEntries[0];\n                    return {\n                        key,\n                        value: value()\n                    };\n                }),\n                accessControl: bucket._def.accessControl\n            };\n            return acc;\n        }, {});\n        const { token } = await makeRequest({\n            body: {\n                ctx: params.ctx,\n                buckets: reqBuckets\n            },\n            accessKey: params.accessKey,\n            secretKey: params.secretKey,\n            path: \"/get-token\"\n        });\n        return token;\n    },\n    async getFile ({ accessKey, secretKey, url }) {\n        return await makeRequest({\n            path: \"/get-file\",\n            accessKey,\n            secretKey,\n            body: {\n                url\n            }\n        });\n    },\n    async requestUpload ({ accessKey, secretKey, bucketName, bucketType, fileInfo, multipart }) {\n        const res = await makeRequest({\n            path: \"/request-upload\",\n            accessKey,\n            secretKey,\n            body: {\n                multipart,\n                bucketName,\n                bucketType,\n                isPublic: fileInfo.isPublic,\n                path: fileInfo.path,\n                extension: fileInfo.extension,\n                size: fileInfo.size,\n                mimeType: fileInfo.type,\n                metadata: fileInfo.metadata,\n                fileName: fileInfo.fileName,\n                replaceTargetUrl: fileInfo.replaceTargetUrl,\n                isTemporary: fileInfo.temporary\n            }\n        });\n        return {\n            multipart: res.multipart,\n            signedUrl: res.signedUrl,\n            accessUrl: res.url,\n            path: res.path,\n            thumbnailUrl: res.thumbnailUrl\n        };\n    },\n    async requestUploadParts ({ accessKey, secretKey, key, multipart }) {\n        const res = await makeRequest({\n            path: \"/request-upload-parts\",\n            accessKey,\n            secretKey,\n            body: {\n                multipart,\n                key\n            }\n        });\n        return {\n            multipart: res.multipart\n        };\n    },\n    async completeMultipartUpload ({ accessKey, secretKey, uploadId, key, parts }) {\n        return await makeRequest({\n            path: \"/complete-multipart-upload\",\n            accessKey,\n            secretKey,\n            body: {\n                uploadId,\n                key,\n                parts\n            }\n        });\n    },\n    async confirmUpload ({ accessKey, secretKey, url }) {\n        return await makeRequest({\n            path: \"/confirm-upload\",\n            accessKey,\n            secretKey,\n            body: {\n                url\n            }\n        });\n    },\n    async deleteFile ({ accessKey, secretKey, url }) {\n        return await makeRequest({\n            path: \"/delete-file\",\n            accessKey,\n            secretKey,\n            body: {\n                url\n            }\n        });\n    },\n    async listFiles ({ accessKey, secretKey, bucketName, filter, pagination }) {\n        return await makeRequest({\n            path: \"/list-files\",\n            accessKey,\n            secretKey,\n            body: {\n                bucketName,\n                filter,\n                pagination\n            }\n        });\n    }\n};\nfunction initEdgeStoreSdk(params) {\n    const { accessKey = process.env.EDGE_STORE_ACCESS_KEY, secretKey = process.env.EDGE_STORE_SECRET_KEY } = params ?? {};\n    if (!accessKey || !secretKey) {\n        throw new EdgeStoreCredentialsError();\n    }\n    return {\n        async getToken (params) {\n            return await edgeStoreRawSdk.getToken({\n                accessKey,\n                secretKey,\n                ctx: params.ctx,\n                router: params.router\n            });\n        },\n        async getFile ({ url }) {\n            return await edgeStoreRawSdk.getFile({\n                accessKey,\n                secretKey,\n                url\n            });\n        },\n        async requestUpload ({ bucketName, bucketType, fileInfo, multipart }) {\n            return await edgeStoreRawSdk.requestUpload({\n                accessKey,\n                secretKey,\n                bucketName,\n                bucketType,\n                fileInfo,\n                multipart\n            });\n        },\n        async requestUploadParts ({ key, multipart }) {\n            return await edgeStoreRawSdk.requestUploadParts({\n                accessKey,\n                secretKey,\n                key,\n                multipart\n            });\n        },\n        async completeMultipartUpload ({ uploadId, key, parts }) {\n            return await edgeStoreRawSdk.completeMultipartUpload({\n                accessKey,\n                secretKey,\n                uploadId,\n                key,\n                parts\n            });\n        },\n        async confirmUpload ({ url }) {\n            return await edgeStoreRawSdk.confirmUpload({\n                accessKey,\n                secretKey,\n                url\n            });\n        },\n        async deleteFile ({ url }) {\n            return await edgeStoreRawSdk.deleteFile({\n                accessKey,\n                secretKey,\n                url\n            });\n        },\n        async listFiles (params) {\n            return await edgeStoreRawSdk.listFiles({\n                accessKey,\n                secretKey,\n                ...params\n            });\n        }\n    };\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9pbmRleC0yOGVmZGFjZi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFtRDtBQUVuRCxNQUFNQyxrQkFBa0IsQ0FBQztpSEFDd0YsQ0FBQztBQUNsSCxNQUFNQyxrQ0FBa0NDO0lBQ3BDQyxZQUFZQyxVQUFVSixlQUFlLENBQUM7UUFDbEMsS0FBSyxDQUFDSTtRQUNOLElBQUksQ0FBQ0MsSUFBSSxHQUFHO0lBQ2hCO0FBQ0o7QUFFQSxNQUFNQyxlQUFlQyxRQUFRQyxHQUFHLENBQUNDLHVCQUF1QixJQUFJO0FBQzVELGVBQWVDLFlBQVlDLE1BQU07SUFDN0IsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLFNBQVMsRUFBRUMsU0FBUyxFQUFFQyxJQUFJLEVBQUUsR0FBR0o7SUFDN0MsTUFBTUssTUFBTSxNQUFNQyxNQUFNLENBQUMsRUFBRVgsYUFBYSxFQUFFUyxLQUFLLENBQUMsRUFBRTtRQUM5Q0csUUFBUTtRQUNSTixNQUFNTyxLQUFLQyxTQUFTLENBQUNSO1FBQ3JCUyxTQUFTO1lBQ0wsZ0JBQWdCO1lBQ2hCQyxlQUFlLENBQUMsTUFBTSxFQUFFQyxPQUFPQyxJQUFJLENBQUMsQ0FBQyxFQUFFWCxVQUFVLENBQUMsRUFBRUMsVUFBVSxDQUFDLEVBQUVXLFFBQVEsQ0FBQyxVQUFVLENBQUM7UUFDekY7SUFDSjtJQUNBLElBQUksQ0FBQ1QsSUFBSVUsRUFBRSxFQUFFO1FBQ1QsTUFBTSxJQUFJeEIsTUFBTSxDQUFDLDBCQUEwQixFQUFFYSxLQUFLLEVBQUUsRUFBRSxNQUFNQyxJQUFJVyxJQUFJLEdBQUcsQ0FBQztJQUM1RTtJQUNBLE9BQU8sTUFBTVgsSUFBSVksSUFBSTtBQUN6QjtBQUNBLE1BQU1DLGtCQUFrQjtJQUNwQixNQUFNQyxVQUFVbkIsTUFBTTtRQUNsQixNQUFNb0IsYUFBYUMsT0FBT0MsT0FBTyxDQUFDdEIsT0FBT3VCLE1BQU0sQ0FBQ0MsT0FBTyxFQUFFQyxNQUFNLENB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QUFVLEVBQUVDLFFBQVEsRUFBRUMsU0FBUyxFQUFFO1lBQ2hFLE9BQU8sTUFBTTNCLGdCQUFnQndCLGFBQWEsQ0FBQztnQkFDdkN4QztnQkFDQUM7Z0JBQ0F3QjtnQkFDQWdCO2dCQUNBQztnQkFDQUM7WUFDSjtRQUNKO1FBQ0EsTUFBTWMsb0JBQW9CLEVBQUV4QixHQUFHLEVBQUVVLFNBQVMsRUFBRTtZQUN4QyxPQUFPLE1BQU0zQixnQkFBZ0J5QyxrQkFBa0IsQ0FBQztnQkFDNUN6RDtnQkFDQUM7Z0JBQ0FnQztnQkFDQVU7WUFDSjtRQUNKO1FBQ0EsTUFBTWUseUJBQXlCLEVBQUVDLFFBQVEsRUFBRTFCLEdBQUcsRUFBRTJCLEtBQUssRUFBRTtZQUNuRCxPQUFPLE1BQU01QyxnQkFBZ0IwQyx1QkFBdUIsQ0FBQztnQkFDakQxRDtnQkFDQUM7Z0JBQ0EwRDtnQkFDQTFCO2dCQUNBMkI7WUFDSjtRQUNKO1FBQ0EsTUFBTUMsZUFBZSxFQUFFdEIsR0FBRyxFQUFFO1lBQ3hCLE9BQU8sTUFBTXZCLGdCQUFnQjZDLGFBQWEsQ0FBQztnQkFDdkM3RDtnQkFDQUM7Z0JBQ0FzQztZQUNKO1FBQ0o7UUFDQSxNQUFNdUIsWUFBWSxFQUFFdkIsR0FBRyxFQUFFO1lBQ3JCLE9BQU8sTUFBTXZCLGdCQUFnQjhDLFVBQVUsQ0FBQztnQkFDcEM5RDtnQkFDQUM7Z0JBQ0FzQztZQUNKO1FBQ0o7UUFDQSxNQUFNd0IsV0FBV2pFLE1BQU07WUFDbkIsT0FBTyxNQUFNa0IsZ0JBQWdCK0MsU0FBUyxDQUFDO2dCQUNuQy9EO2dCQUNBQztnQkFDQSxHQUFHSCxNQUFNO1lBQ2I7UUFDSjtJQUNKO0FBQ0o7QUFFdUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yOF9ub3Rpb24tY2xvbmUvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9pbmRleC0yOGVmZGFjZi5tanM/N2MwYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFZGdlU3RvcmVFcnJvciB9IGZyb20gJ0BlZGdlc3RvcmUvc2hhcmVkJztcblxuY29uc3QgREVGQVVMVF9NRVNTQUdFID0gYE1pc3NpbmcgRURHRV9TVE9SRV9BQ0NFU1NfS0VZIG9yIEVER0VfU1RPUkVfU0VDUkVUX0tFWS4gXG5UaGlzIGNhbiBoYXBwZW4gaWYgeW91IGFyZSB0cnlpbmcgdG8gaW1wb3J0IHNvbWV0aGluZyByZWxhdGVkIHRvIHRoZSBiYWNrZW5kIG9mIEVkZ2UgU3RvcmUgaW4gYSBjbGllbnQgY29tcG9uZW50LmA7XG5jbGFzcyBFZGdlU3RvcmVDcmVkZW50aWFsc0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSBERUZBVUxUX01FU1NBR0Upe1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0VkZ2VTdG9yZUNyZWRlbnRpYWxzRXJyb3InO1xuICAgIH1cbn1cblxuY29uc3QgQVBJX0VORFBPSU5UID0gcHJvY2Vzcy5lbnYuRURHRV9TVE9SRV9BUElfRU5EUE9JTlQgPz8gJ2h0dHBzOi8vYXBpLmVkZ2VzdG9yZS5kZXYnO1xuYXN5bmMgZnVuY3Rpb24gbWFrZVJlcXVlc3QocGFyYW1zKSB7XG4gICAgY29uc3QgeyBib2R5LCBhY2Nlc3NLZXksIHNlY3JldEtleSwgcGF0aCB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0FQSV9FTkRQT0lOVH0ke3BhdGh9YCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHtCdWZmZXIuZnJvbShgJHthY2Nlc3NLZXl9OiR7c2VjcmV0S2V5fWApLnRvU3RyaW5nKCdiYXNlNjQnKX1gXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBtYWtlIHJlcXVlc3QgdG8gJHtwYXRofTogJHthd2FpdCByZXMudGV4dCgpfWApO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgcmVzLmpzb24oKTtcbn1cbmNvbnN0IGVkZ2VTdG9yZVJhd1NkayA9IHtcbiAgICBhc3luYyBnZXRUb2tlbiAocGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlcUJ1Y2tldHMgPSBPYmplY3QuZW50cmllcyhwYXJhbXMucm91dGVyLmJ1Y2tldHMpLnJlZHVjZSgoYWNjLCBbYnVja2V0TmFtZSwgYnVja2V0XSk9PntcbiAgICAgICAgICAgIGFjY1tidWNrZXROYW1lXSA9IHtcbiAgICAgICAgICAgICAgICBwYXRoOiBidWNrZXQuX2RlZi5wYXRoLm1hcCgocCk9PntcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyYW1FbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbUVudHJpZXNbMF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRW1wdHkgcGF0aCBwYXJhbSBmb3VuZCBpbjogJHtKU09OLnN0cmluZ2lmeShidWNrZXQuX2RlZi5wYXRoKX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICdTRVJWRVJfRVJST1InXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBwYXJhbUVudHJpZXNbMF07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGFjY2Vzc0NvbnRyb2w6IGJ1Y2tldC5fZGVmLmFjY2Vzc0NvbnRyb2xcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IGF3YWl0IG1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICBjdHg6IHBhcmFtcy5jdHgsXG4gICAgICAgICAgICAgICAgYnVja2V0czogcmVxQnVja2V0c1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFjY2Vzc0tleTogcGFyYW1zLmFjY2Vzc0tleSxcbiAgICAgICAgICAgIHNlY3JldEtleTogcGFyYW1zLnNlY3JldEtleSxcbiAgICAgICAgICAgIHBhdGg6ICcvZ2V0LXRva2VuJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0RmlsZSAoeyBhY2Nlc3NLZXksIHNlY3JldEtleSwgdXJsIH0pIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IG1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgIHBhdGg6ICcvZ2V0LWZpbGUnLFxuICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIHJlcXVlc3RVcGxvYWQgKHsgYWNjZXNzS2V5LCBzZWNyZXRLZXksIGJ1Y2tldE5hbWUsIGJ1Y2tldFR5cGUsIGZpbGVJbmZvLCBtdWx0aXBhcnQgfSkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBtYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICBwYXRoOiAnL3JlcXVlc3QtdXBsb2FkJyxcbiAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICBtdWx0aXBhcnQsXG4gICAgICAgICAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgICAgICAgICBidWNrZXRUeXBlLFxuICAgICAgICAgICAgICAgIGlzUHVibGljOiBmaWxlSW5mby5pc1B1YmxpYyxcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlSW5mby5wYXRoLFxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbjogZmlsZUluZm8uZXh0ZW5zaW9uLFxuICAgICAgICAgICAgICAgIHNpemU6IGZpbGVJbmZvLnNpemUsXG4gICAgICAgICAgICAgICAgbWltZVR5cGU6IGZpbGVJbmZvLnR5cGUsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IGZpbGVJbmZvLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlSW5mby5maWxlTmFtZSxcbiAgICAgICAgICAgICAgICByZXBsYWNlVGFyZ2V0VXJsOiBmaWxlSW5mby5yZXBsYWNlVGFyZ2V0VXJsLFxuICAgICAgICAgICAgICAgIGlzVGVtcG9yYXJ5OiBmaWxlSW5mby50ZW1wb3JhcnlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtdWx0aXBhcnQ6IHJlcy5tdWx0aXBhcnQsXG4gICAgICAgICAgICBzaWduZWRVcmw6IHJlcy5zaWduZWRVcmwsXG4gICAgICAgICAgICBhY2Nlc3NVcmw6IHJlcy51cmwsXG4gICAgICAgICAgICBwYXRoOiByZXMucGF0aCxcbiAgICAgICAgICAgIHRodW1ibmFpbFVybDogcmVzLnRodW1ibmFpbFVybFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgYXN5bmMgcmVxdWVzdFVwbG9hZFBhcnRzICh7IGFjY2Vzc0tleSwgc2VjcmV0S2V5LCBrZXksIG11bHRpcGFydCB9KSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IG1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgIHBhdGg6ICcvcmVxdWVzdC11cGxvYWQtcGFydHMnLFxuICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIG11bHRpcGFydCxcbiAgICAgICAgICAgICAgICBrZXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtdWx0aXBhcnQ6IHJlcy5tdWx0aXBhcnRcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGFzeW5jIGNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkICh7IGFjY2Vzc0tleSwgc2VjcmV0S2V5LCB1cGxvYWRJZCwga2V5LCBwYXJ0cyB9KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBtYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICBwYXRoOiAnL2NvbXBsZXRlLW11bHRpcGFydC11cGxvYWQnLFxuICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIHVwbG9hZElkLFxuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICBwYXJ0c1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGNvbmZpcm1VcGxvYWQgKHsgYWNjZXNzS2V5LCBzZWNyZXRLZXksIHVybCB9KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBtYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICBwYXRoOiAnL2NvbmZpcm0tdXBsb2FkJyxcbiAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICB1cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBkZWxldGVGaWxlICh7IGFjY2Vzc0tleSwgc2VjcmV0S2V5LCB1cmwgfSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgbWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgcGF0aDogJy9kZWxldGUtZmlsZScsXG4gICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgdXJsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgbGlzdEZpbGVzICh7IGFjY2Vzc0tleSwgc2VjcmV0S2V5LCBidWNrZXROYW1lLCBmaWx0ZXIsIHBhZ2luYXRpb24gfSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgbWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgcGF0aDogJy9saXN0LWZpbGVzJyxcbiAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICAgICAgICAgIGZpbHRlcixcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5mdW5jdGlvbiBpbml0RWRnZVN0b3JlU2RrKHBhcmFtcykge1xuICAgIGNvbnN0IHsgYWNjZXNzS2V5ID0gcHJvY2Vzcy5lbnYuRURHRV9TVE9SRV9BQ0NFU1NfS0VZLCBzZWNyZXRLZXkgPSBwcm9jZXNzLmVudi5FREdFX1NUT1JFX1NFQ1JFVF9LRVkgfSA9IHBhcmFtcyA/PyB7fTtcbiAgICBpZiAoIWFjY2Vzc0tleSB8fCAhc2VjcmV0S2V5KSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVDcmVkZW50aWFsc0Vycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGFzeW5jIGdldFRva2VuIChwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBlZGdlU3RvcmVSYXdTZGsuZ2V0VG9rZW4oe1xuICAgICAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICAgICAgY3R4OiBwYXJhbXMuY3R4LFxuICAgICAgICAgICAgICAgIHJvdXRlcjogcGFyYW1zLnJvdXRlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGdldEZpbGUgKHsgdXJsIH0pIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBlZGdlU3RvcmVSYXdTZGsuZ2V0RmlsZSh7XG4gICAgICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgICAgICB1cmxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyByZXF1ZXN0VXBsb2FkICh7IGJ1Y2tldE5hbWUsIGJ1Y2tldFR5cGUsIGZpbGVJbmZvLCBtdWx0aXBhcnQgfSkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGVkZ2VTdG9yZVJhd1Nkay5yZXF1ZXN0VXBsb2FkKHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICAgICAgYnVja2V0VHlwZSxcbiAgICAgICAgICAgICAgICBmaWxlSW5mbyxcbiAgICAgICAgICAgICAgICBtdWx0aXBhcnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyByZXF1ZXN0VXBsb2FkUGFydHMgKHsga2V5LCBtdWx0aXBhcnQgfSkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGVkZ2VTdG9yZVJhd1Nkay5yZXF1ZXN0VXBsb2FkUGFydHMoe1xuICAgICAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIG11bHRpcGFydFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkICh7IHVwbG9hZElkLCBrZXksIHBhcnRzIH0pIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBlZGdlU3RvcmVSYXdTZGsuY29tcGxldGVNdWx0aXBhcnRVcGxvYWQoe1xuICAgICAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICAgICAgdXBsb2FkSWQsXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHBhcnRzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgY29uZmlybVVwbG9hZCAoeyB1cmwgfSkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGVkZ2VTdG9yZVJhd1Nkay5jb25maXJtVXBsb2FkKHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGRlbGV0ZUZpbGUgKHsgdXJsIH0pIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBlZGdlU3RvcmVSYXdTZGsuZGVsZXRlRmlsZSh7XG4gICAgICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgICAgICB1cmxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBsaXN0RmlsZXMgKHBhcmFtcykge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGVkZ2VTdG9yZVJhd1Nkay5saXN0RmlsZXMoe1xuICAgICAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICAgICAgLi4ucGFyYW1zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCB7IEVkZ2VTdG9yZUNyZWRlbnRpYWxzRXJyb3IgYXMgRSwgZWRnZVN0b3JlUmF3U2RrIGFzIGUsIGluaXRFZGdlU3RvcmVTZGsgYXMgaSB9O1xuIl0sIm5hbWVzIjpbIkVkZ2VTdG9yZUVycm9yIiwiREVGQVVMVF9NRVNTQUdFIiwiRWRnZVN0b3JlQ3JlZGVudGlhbHNFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwibmFtZSIsIkFQSV9FTkRQT0lOVCIsInByb2Nlc3MiLCJlbnYiLCJFREdFX1NUT1JFX0FQSV9FTkRQT0lOVCIsIm1ha2VSZXF1ZXN0IiwicGFyYW1zIiwiYm9keSIsImFjY2Vzc0tleSIsInNlY3JldEtleSIsInBhdGgiLCJyZXMiLCJmZXRjaCIsIm1ldGhvZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsIm9rIiwidGV4dCIsImpzb24iLCJlZGdlU3RvcmVSYXdTZGsiLCJnZXRUb2tlbiIsInJlcUJ1Y2tldHMiLCJPYmplY3QiLCJlbnRyaWVzIiwicm91dGVyIiwiYnVja2V0cyIsInJlZHVjZSIsImFjYyIsImJ1Y2tldE5hbWUiLCJidWNrZXQiLCJfZGVmIiwibWFwIiwicCIsInBhcmFtRW50cmllcyIsInVuZGVmaW5lZCIsImNvZGUiLCJrZXkiLCJ2YWx1ZSIsImFjY2Vzc0NvbnRyb2wiLCJ0b2tlbiIsImN0eCIsImdldEZpbGUiLCJ1cmwiLCJyZXF1ZXN0VXBsb2FkIiwiYnVja2V0VHlwZSIsImZpbGVJbmZvIiwibXVsdGlwYXJ0IiwiaXNQdWJsaWMiLCJleHRlbnNpb24iLCJzaXplIiwibWltZVR5cGUiLCJ0eXBlIiwibWV0YWRhdGEiLCJmaWxlTmFtZSIsInJlcGxhY2VUYXJnZXRVcmwiLCJpc1RlbXBvcmFyeSIsInRlbXBvcmFyeSIsInNpZ25lZFVybCIsImFjY2Vzc1VybCIsInRodW1ibmFpbFVybCIsInJlcXVlc3RVcGxvYWRQYXJ0cyIsImNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkIiwidXBsb2FkSWQiLCJwYXJ0cyIsImNvbmZpcm1VcGxvYWQiLCJkZWxldGVGaWxlIiwibGlzdEZpbGVzIiwiZmlsdGVyIiwicGFnaW5hdGlvbiIsImluaXRFZGdlU3RvcmVTZGsiLCJFREdFX1NUT1JFX0FDQ0VTU19LRVkiLCJFREdFX1NUT1JFX1NFQ1JFVF9LRVkiLCJFIiwiZSIsImkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/dist/index-28efdacf.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/dist/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@edgestore/server/dist/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initEdgeStore: () => (/* reexport safe */ _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.initEdgeStore)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/@edgestore/shared/dist/index.mjs\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yOF9ub3Rpb24tY2xvbmUvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9pbmRleC5tanM/YjZmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBpbml0RWRnZVN0b3JlIH0gZnJvbSAnQGVkZ2VzdG9yZS9zaGFyZWQnO1xuIl0sIm5hbWVzIjpbImluaXRFZGdlU3RvcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/dist/logger-09f43a75.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@edgestore/server/dist/logger-09f43a75.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   L: () => (/* binding */ Logger)\n/* harmony export */ });\n/* eslint-disable no-console */ function _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nconst logLevel = [\n    \"debug\",\n    \"info\",\n    \"warn\",\n    \"error\",\n    \"none\"\n];\nclass Logger {\n    shouldLog(level) {\n        return logLevel.indexOf(level) >= logLevel.indexOf(this.logLevel);\n    }\n    debug(message, ...optionalParams) {\n        if (this.shouldLog(\"debug\")) {\n            console.debug(\"[EdgeStoreDebug]\", message, ...optionalParams);\n        }\n    }\n    info(message, ...optionalParams) {\n        if (this.shouldLog(\"info\")) {\n            console.info(\"[EdgeStoreInfo]\", message, ...optionalParams);\n        }\n    }\n    warn(message, ...optionalParams) {\n        if (this.shouldLog(\"warn\")) {\n            console.warn(\"[EdgeStoreWarn]\", message, ...optionalParams);\n        }\n    }\n    error(message, ...optionalParams) {\n        if (this.shouldLog(\"error\")) {\n            console.error(\"[EdgeStoreError]\", message, ...optionalParams);\n        }\n    }\n    constructor(logLevel){\n        _define_property(this, \"logLevel\", void 0);\n        this.logLevel = logLevel ?? ( false ? 0 : \"info\");\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9sb2dnZXItMDlmNDNhNzUubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSw2QkFBNkIsR0FBRyxTQUFTQSxpQkFBaUJDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxLQUFLO0lBQ3JFLElBQUlELE9BQU9ELEtBQUs7UUFDWkcsT0FBT0MsY0FBYyxDQUFDSixLQUFLQyxLQUFLO1lBQzVCQyxPQUFPQTtZQUNQRyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtRQUNkO0lBQ0osT0FBTztRQUNIUCxHQUFHLENBQUNDLElBQUksR0FBR0M7SUFDZjtJQUNBLE9BQU9GO0FBQ1g7QUFDQSxNQUFNUSxXQUFXO0lBQ2I7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNIO0FBQ0QsTUFBTUM7SUFDRkMsVUFBVUMsS0FBSyxFQUFFO1FBQ2IsT0FBT0gsU0FBU0ksT0FBTyxDQUFDRCxVQUFVSCxTQUFTSSxPQUFPLENBQUMsSUFBSSxDQUFDSixRQUFRO0lBQ3BFO0lBQ0FLLE1BQU1DLE9BQU8sRUFBRSxHQUFHQyxjQUFjLEVBQUU7UUFDOUIsSUFBSSxJQUFJLENBQUNMLFNBQVMsQ0FBQyxVQUFVO1lBQ3pCTSxRQUFRSCxLQUFLLENBQUMsb0JBQW9CQyxZQUFZQztRQUNsRDtJQUNKO0lBQ0FFLEtBQUtILE9BQU8sRUFBRSxHQUFHQyxjQUFjLEVBQUU7UUFDN0IsSUFBSSxJQUFJLENBQUNMLFNBQVMsQ0FBQyxTQUFTO1lBQ3hCTSxRQUFRQyxJQUFJLENBQUMsbUJBQW1CSCxZQUFZQztRQUNoRDtJQUNKO0lBQ0FHLEtBQUtKLE9BQU8sRUFBRSxHQUFHQyxjQUFjLEVBQUU7UUFDN0IsSUFBSSxJQUFJLENBQUNMLFNBQVMsQ0FBQyxTQUFTO1lBQ3hCTSxRQUFRRSxJQUFJLENBQUMsbUJBQW1CSixZQUFZQztRQUNoRDtJQUNKO0lBQ0FJLE1BQU1MLE9BQU8sRUFBRSxHQUFHQyxjQUFjLEVBQUU7UUFDOUIsSUFBSSxJQUFJLENBQUNMLFNBQVMsQ0FBQyxVQUFVO1lBQ3pCTSxRQUFRRyxLQUFLLENBQUMsb0JBQW9CTCxZQUFZQztRQUNsRDtJQUNKO0lBQ0FLLFlBQVlaLFFBQVEsQ0FBQztRQUNqQlQsaUJBQWlCLElBQUksRUFBRSxZQUFZLEtBQUs7UUFDeEMsSUFBSSxDQUFDUyxRQUFRLEdBQUdBLFlBQWFhLENBQUFBLE1BQXlCLEdBQWUsSUFBVSxNQUFLO0lBQ3hGO0FBQ0o7QUFFdUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yOF9ub3Rpb24tY2xvbmUvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9sb2dnZXItMDlmNDNhNzUubWpzP2U5M2QiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqLyBmdW5jdGlvbiBfZGVmaW5lX3Byb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICAgIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9ialtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59XG5jb25zdCBsb2dMZXZlbCA9IFtcbiAgICAnZGVidWcnLFxuICAgICdpbmZvJyxcbiAgICAnd2FybicsXG4gICAgJ2Vycm9yJyxcbiAgICAnbm9uZSdcbl07XG5jbGFzcyBMb2dnZXIge1xuICAgIHNob3VsZExvZyhsZXZlbCkge1xuICAgICAgICByZXR1cm4gbG9nTGV2ZWwuaW5kZXhPZihsZXZlbCkgPj0gbG9nTGV2ZWwuaW5kZXhPZih0aGlzLmxvZ0xldmVsKTtcbiAgICB9XG4gICAgZGVidWcobWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpIHtcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkTG9nKCdkZWJ1ZycpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdbRWRnZVN0b3JlRGVidWddJywgbWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluZm8obWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpIHtcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkTG9nKCdpbmZvJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnW0VkZ2VTdG9yZUluZm9dJywgbWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdhcm4obWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpIHtcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkTG9nKCd3YXJuJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW0VkZ2VTdG9yZVdhcm5dJywgbWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVycm9yKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZExvZygnZXJyb3InKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0VkZ2VTdG9yZUVycm9yXScsIG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihsb2dMZXZlbCl7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJsb2dMZXZlbFwiLCB2b2lkIDApO1xuICAgICAgICB0aGlzLmxvZ0xldmVsID0gbG9nTGV2ZWwgPz8gKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnZXJyb3InIDogJ2luZm8nKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IExvZ2dlciBhcyBMIH07XG4iXSwibmFtZXMiOlsiX2RlZmluZV9wcm9wZXJ0eSIsIm9iaiIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJsb2dMZXZlbCIsIkxvZ2dlciIsInNob3VsZExvZyIsImxldmVsIiwiaW5kZXhPZiIsImRlYnVnIiwibWVzc2FnZSIsIm9wdGlvbmFsUGFyYW1zIiwiY29uc29sZSIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJjb25zdHJ1Y3RvciIsInByb2Nlc3MiLCJMIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/dist/logger-09f43a75.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/dist/providers/edgestore/index.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@edgestore/server/dist/providers/edgestore/index.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EdgeStoreProvider: () => (/* binding */ EdgeStoreProvider)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/@edgestore/shared/dist/index.mjs\");\n/* harmony import */ var _index_28efdacf_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index-28efdacf.mjs */ \"(rsc)/./node_modules/@edgestore/server/dist/index-28efdacf.mjs\");\n\n\nconst DEFAULT_BASE_URL = \"https://files.edgestore.dev\";\nfunction EdgeStoreProvider(options) {\n    const { accessKey = process.env.EDGE_STORE_ACCESS_KEY, secretKey = process.env.EDGE_STORE_SECRET_KEY } = options ?? {};\n    const baseUrl = process.env.EDGE_STORE_BASE_URL ?? DEFAULT_BASE_URL;\n    if (!accessKey || !secretKey) {\n        throw new _index_28efdacf_mjs__WEBPACK_IMPORTED_MODULE_1__.E();\n    }\n    const edgeStoreSdk = (0,_index_28efdacf_mjs__WEBPACK_IMPORTED_MODULE_1__.i)({\n        accessKey,\n        secretKey\n    });\n    return {\n        init: async ({ ctx, router })=>{\n            const token = await edgeStoreSdk.getToken({\n                ctx,\n                router\n            });\n            return {\n                token\n            };\n        },\n        getBaseUrl () {\n            return baseUrl;\n        },\n        getFile: async ({ url })=>{\n            const { uploadedAt, ...rest } = await edgeStoreSdk.getFile({\n                url\n            });\n            return {\n                uploadedAt: new Date(uploadedAt),\n                ...rest\n            };\n        },\n        async requestUpload ({ bucketName, bucketType, fileInfo }) {\n            // multipart upload if file is bigger than a certain size\n            const MULTIPART_THRESHOLD = 10 * 1024 * 1024; // 10MB\n            let partSize = 5 * 1024 * 1024; // 5MB\n            if (fileInfo.size > MULTIPART_THRESHOLD) {\n                let totalParts = Math.ceil(fileInfo.size / partSize);\n                if (totalParts > 1000) {\n                    // the maximum number of parts is 1000\n                    totalParts = 1000;\n                    partSize = Math.ceil(fileInfo.size / totalParts);\n                }\n                const res = await edgeStoreSdk.requestUpload({\n                    bucketName,\n                    bucketType,\n                    fileInfo,\n                    multipart: {\n                        parts: Array.from({\n                            length: totalParts\n                        }).map((_, index)=>index + 1)\n                    }\n                });\n                const multipart = res.multipart ? {\n                    key: res.multipart.key,\n                    uploadId: res.multipart.uploadId,\n                    parts: res.multipart.parts.map((part)=>({\n                            partNumber: part.partNumber,\n                            uploadUrl: part.signedUrl\n                        })),\n                    partSize,\n                    totalParts\n                } : undefined;\n                if (multipart) {\n                    return {\n                        accessUrl: res.accessUrl,\n                        thumbnailUrl: res.thumbnailUrl,\n                        multipart\n                    };\n                } else if (res.signedUrl) {\n                    return {\n                        accessUrl: res.accessUrl,\n                        uploadUrl: res.signedUrl,\n                        thumbnailUrl: res.thumbnailUrl\n                    };\n                } else {\n                    throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                        message: \"Could not get upload url\",\n                        code: \"SERVER_ERROR\"\n                    });\n                }\n            }\n            const res = await edgeStoreSdk.requestUpload({\n                bucketName,\n                bucketType,\n                fileInfo\n            });\n            if (res.signedUrl) {\n                return {\n                    accessUrl: res.accessUrl,\n                    uploadUrl: res.signedUrl,\n                    thumbnailUrl: res.thumbnailUrl\n                };\n            }\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: \"Could not get upload url\",\n                code: \"SERVER_ERROR\"\n            });\n        },\n        requestUploadParts: async ({ multipart, path })=>{\n            const res = await edgeStoreSdk.requestUploadParts({\n                multipart,\n                key: path\n            });\n            return {\n                multipart: {\n                    uploadId: res.multipart.uploadId,\n                    parts: res.multipart.parts.map((part)=>({\n                            partNumber: part.partNumber,\n                            uploadUrl: part.signedUrl\n                        }))\n                }\n            };\n        },\n        completeMultipartUpload: async ({ uploadId, key, parts })=>{\n            return await edgeStoreSdk.completeMultipartUpload({\n                uploadId,\n                key,\n                parts\n            });\n        },\n        confirmUpload: async ({ url })=>{\n            return await edgeStoreSdk.confirmUpload({\n                url\n            });\n        },\n        deleteFile: async ({ url })=>{\n            return await edgeStoreSdk.deleteFile({\n                url\n            });\n        }\n    };\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9wcm92aWRlcnMvZWRnZXN0b3JlL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUQ7QUFDOEM7QUFFakcsTUFBTUssbUJBQW1CO0FBQ3pCLFNBQVNDLGtCQUFrQkMsT0FBTztJQUM5QixNQUFNLEVBQUVDLFlBQVlDLFFBQVFDLEdBQUcsQ0FBQ0MscUJBQXFCLEVBQUVDLFlBQVlILFFBQVFDLEdBQUcsQ0FBQ0cscUJBQXFCLEVBQUUsR0FBR04sV0FBVyxDQUFDO0lBQ3JILE1BQU1PLFVBQVVMLFFBQVFDLEdBQUcsQ0FBQ0ssbUJBQW1CLElBQUlWO0lBQ25ELElBQUksQ0FBQ0csYUFBYSxDQUFDSSxXQUFXO1FBQzFCLE1BQU0sSUFBSVYsa0RBQXlCQTtJQUN2QztJQUNBLE1BQU1jLGVBQWVaLHNEQUFnQkEsQ0FBQztRQUNsQ0k7UUFDQUk7SUFDSjtJQUNBLE9BQU87UUFDSEssTUFBTSxPQUFPLEVBQUVDLEdBQUcsRUFBRUMsTUFBTSxFQUFFO1lBQ3hCLE1BQU1DLFFBQVEsTUFBTUosYUFBYUssUUFBUSxDQUFDO2dCQUN0Q0g7Z0JBQ0FDO1lBQ0o7WUFDQSxPQUFPO2dCQUNIQztZQUNKO1FBQ0o7UUFDQUU7WUFDSSxPQUFPUjtRQUNYO1FBQ0FTLFNBQVMsT0FBTyxFQUFFQyxHQUFHLEVBQUU7WUFDbkIsTUFBTSxFQUFFQyxVQUFVLEVBQUUsR0FBR0MsTUFBTSxHQUFHLE1BQU1WLGFBQWFPLE9BQU8sQ0FBQztnQkFDdkRDO1lBQ0o7WUFDQSxPQUFPO2dCQUNIQyxZQUFZLElBQUlFLEtBQUtGO2dCQUNyQixHQUFHQyxJQUFJO1lBQ1g7UUFDSjtRQUNBLE1BQU1FLGVBQWUsRUFBRUMsVUFBVSxFQUFFQyxVQUFVLEVBQUVDLFFBQVEsRUFBRTtZQUNyRCx5REFBeUQ7WUFDekQsTUFBTUMsc0JBQXNCLEtBQUssT0FBTyxNQUFNLE9BQU87WUFDckQsSUFBSUMsV0FBVyxJQUFJLE9BQU8s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QztZQUNKO1FBQ0o7SUFDSjtBQUNKO0FBRTZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjhfbm90aW9uLWNsb25lLy4vbm9kZV9tb2R1bGVzL0BlZGdlc3RvcmUvc2VydmVyL2Rpc3QvcHJvdmlkZXJzL2VkZ2VzdG9yZS9pbmRleC5tanM/YjM3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFZGdlU3RvcmVFcnJvciB9IGZyb20gJ0BlZGdlc3RvcmUvc2hhcmVkJztcbmltcG9ydCB7IEUgYXMgRWRnZVN0b3JlQ3JlZGVudGlhbHNFcnJvciwgaSBhcyBpbml0RWRnZVN0b3JlU2RrIH0gZnJvbSAnLi4vLi4vaW5kZXgtMjhlZmRhY2YubWpzJztcblxuY29uc3QgREVGQVVMVF9CQVNFX1VSTCA9ICdodHRwczovL2ZpbGVzLmVkZ2VzdG9yZS5kZXYnO1xuZnVuY3Rpb24gRWRnZVN0b3JlUHJvdmlkZXIob3B0aW9ucykge1xuICAgIGNvbnN0IHsgYWNjZXNzS2V5ID0gcHJvY2Vzcy5lbnYuRURHRV9TVE9SRV9BQ0NFU1NfS0VZLCBzZWNyZXRLZXkgPSBwcm9jZXNzLmVudi5FREdFX1NUT1JFX1NFQ1JFVF9LRVkgfSA9IG9wdGlvbnMgPz8ge307XG4gICAgY29uc3QgYmFzZVVybCA9IHByb2Nlc3MuZW52LkVER0VfU1RPUkVfQkFTRV9VUkwgPz8gREVGQVVMVF9CQVNFX1VSTDtcbiAgICBpZiAoIWFjY2Vzc0tleSB8fCAhc2VjcmV0S2V5KSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVDcmVkZW50aWFsc0Vycm9yKCk7XG4gICAgfVxuICAgIGNvbnN0IGVkZ2VTdG9yZVNkayA9IGluaXRFZGdlU3RvcmVTZGsoe1xuICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgIHNlY3JldEtleVxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGluaXQ6IGFzeW5jICh7IGN0eCwgcm91dGVyIH0pPT57XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGVkZ2VTdG9yZVNkay5nZXRUb2tlbih7XG4gICAgICAgICAgICAgICAgY3R4LFxuICAgICAgICAgICAgICAgIHJvdXRlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRva2VuXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBnZXRCYXNlVXJsICgpIHtcbiAgICAgICAgICAgIHJldHVybiBiYXNlVXJsO1xuICAgICAgICB9LFxuICAgICAgICBnZXRGaWxlOiBhc3luYyAoeyB1cmwgfSk9PntcbiAgICAgICAgICAgIGNvbnN0IHsgdXBsb2FkZWRBdCwgLi4ucmVzdCB9ID0gYXdhaXQgZWRnZVN0b3JlU2RrLmdldEZpbGUoe1xuICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVwbG9hZGVkQXQ6IG5ldyBEYXRlKHVwbG9hZGVkQXQpLFxuICAgICAgICAgICAgICAgIC4uLnJlc3RcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHJlcXVlc3RVcGxvYWQgKHsgYnVja2V0TmFtZSwgYnVja2V0VHlwZSwgZmlsZUluZm8gfSkge1xuICAgICAgICAgICAgLy8gbXVsdGlwYXJ0IHVwbG9hZCBpZiBmaWxlIGlzIGJpZ2dlciB0aGFuIGEgY2VydGFpbiBzaXplXG4gICAgICAgICAgICBjb25zdCBNVUxUSVBBUlRfVEhSRVNIT0xEID0gMTAgKiAxMDI0ICogMTAyNDsgLy8gMTBNQlxuICAgICAgICAgICAgbGV0IHBhcnRTaXplID0gNSAqIDEwMjQgKiAxMDI0OyAvLyA1TUJcbiAgICAgICAgICAgIGlmIChmaWxlSW5mby5zaXplID4gTVVMVElQQVJUX1RIUkVTSE9MRCkge1xuICAgICAgICAgICAgICAgIGxldCB0b3RhbFBhcnRzID0gTWF0aC5jZWlsKGZpbGVJbmZvLnNpemUgLyBwYXJ0U2l6ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRvdGFsUGFydHMgPiAxMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBtYXhpbXVtIG51bWJlciBvZiBwYXJ0cyBpcyAxMDAwXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsUGFydHMgPSAxMDAwO1xuICAgICAgICAgICAgICAgICAgICBwYXJ0U2l6ZSA9IE1hdGguY2VpbChmaWxlSW5mby5zaXplIC8gdG90YWxQYXJ0cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGVkZ2VTdG9yZVNkay5yZXF1ZXN0VXBsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZUluZm8sXG4gICAgICAgICAgICAgICAgICAgIG11bHRpcGFydDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IEFycmF5LmZyb20oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aDogdG90YWxQYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkubWFwKChfLCBpbmRleCk9PmluZGV4ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpcGFydCA9IHJlcy5tdWx0aXBhcnQgPyB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogcmVzLm11bHRpcGFydC5rZXksXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZElkOiByZXMubXVsdGlwYXJ0LnVwbG9hZElkLFxuICAgICAgICAgICAgICAgICAgICBwYXJ0czogcmVzLm11bHRpcGFydC5wYXJ0cy5tYXAoKHBhcnQpPT4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnROdW1iZXI6IHBhcnQucGFydE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRVcmw6IHBhcnQuc2lnbmVkVXJsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIHBhcnRTaXplLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbFBhcnRzXG4gICAgICAgICAgICAgICAgfSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAobXVsdGlwYXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NVcmw6IHJlcy5hY2Nlc3NVcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxVcmw6IHJlcy50aHVtYm5haWxVcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBhcnRcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5zaWduZWRVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1VybDogcmVzLmFjY2Vzc1VybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZFVybDogcmVzLnNpZ25lZFVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbFVybDogcmVzLnRodW1ibmFpbFVybFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IGdldCB1cGxvYWQgdXJsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICdTRVJWRVJfRVJST1InXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGVkZ2VTdG9yZVNkay5yZXF1ZXN0VXBsb2FkKHtcbiAgICAgICAgICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICAgICAgICAgIGJ1Y2tldFR5cGUsXG4gICAgICAgICAgICAgICAgZmlsZUluZm9cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJlcy5zaWduZWRVcmwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBhY2Nlc3NVcmw6IHJlcy5hY2Nlc3NVcmwsXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZFVybDogcmVzLnNpZ25lZFVybCxcbiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsVXJsOiByZXMudGh1bWJuYWlsVXJsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NvdWxkIG5vdCBnZXQgdXBsb2FkIHVybCcsXG4gICAgICAgICAgICAgICAgY29kZTogJ1NFUlZFUl9FUlJPUidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZXF1ZXN0VXBsb2FkUGFydHM6IGFzeW5jICh7IG11bHRpcGFydCwgcGF0aCB9KT0+e1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZWRnZVN0b3JlU2RrLnJlcXVlc3RVcGxvYWRQYXJ0cyh7XG4gICAgICAgICAgICAgICAgbXVsdGlwYXJ0LFxuICAgICAgICAgICAgICAgIGtleTogcGF0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG11bHRpcGFydDoge1xuICAgICAgICAgICAgICAgICAgICB1cGxvYWRJZDogcmVzLm11bHRpcGFydC51cGxvYWRJZCxcbiAgICAgICAgICAgICAgICAgICAgcGFydHM6IHJlcy5tdWx0aXBhcnQucGFydHMubWFwKChwYXJ0KT0+KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0TnVtYmVyOiBwYXJ0LnBhcnROdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkVXJsOiBwYXJ0LnNpZ25lZFVybFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGVNdWx0aXBhcnRVcGxvYWQ6IGFzeW5jICh7IHVwbG9hZElkLCBrZXksIHBhcnRzIH0pPT57XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZWRnZVN0b3JlU2RrLmNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkKHtcbiAgICAgICAgICAgICAgICB1cGxvYWRJZCxcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgcGFydHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBjb25maXJtVXBsb2FkOiBhc3luYyAoeyB1cmwgfSk9PntcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBlZGdlU3RvcmVTZGsuY29uZmlybVVwbG9hZCh7XG4gICAgICAgICAgICAgICAgdXJsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVsZXRlRmlsZTogYXN5bmMgKHsgdXJsIH0pPT57XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZWRnZVN0b3JlU2RrLmRlbGV0ZUZpbGUoe1xuICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgeyBFZGdlU3RvcmVQcm92aWRlciB9O1xuIl0sIm5hbWVzIjpbIkVkZ2VTdG9yZUVycm9yIiwiRSIsIkVkZ2VTdG9yZUNyZWRlbnRpYWxzRXJyb3IiLCJpIiwiaW5pdEVkZ2VTdG9yZVNkayIsIkRFRkFVTFRfQkFTRV9VUkwiLCJFZGdlU3RvcmVQcm92aWRlciIsIm9wdGlvbnMiLCJhY2Nlc3NLZXkiLCJwcm9jZXNzIiwiZW52IiwiRURHRV9TVE9SRV9BQ0NFU1NfS0VZIiwic2VjcmV0S2V5IiwiRURHRV9TVE9SRV9TRUNSRVRfS0VZIiwiYmFzZVVybCIsIkVER0VfU1RPUkVfQkFTRV9VUkwiLCJlZGdlU3RvcmVTZGsiLCJpbml0IiwiY3R4Iiwicm91dGVyIiwidG9rZW4iLCJnZXRUb2tlbiIsImdldEJhc2VVcmwiLCJnZXRGaWxlIiwidXJsIiwidXBsb2FkZWRBdCIsInJlc3QiLCJEYXRlIiwicmVxdWVzdFVwbG9hZCIsImJ1Y2tldE5hbWUiLCJidWNrZXRUeXBlIiwiZmlsZUluZm8iLCJNVUxUSVBBUlRfVEhSRVNIT0xEIiwicGFydFNpemUiLCJzaXplIiwidG90YWxQYXJ0cyIsIk1hdGgiLCJjZWlsIiwicmVzIiwibXVsdGlwYXJ0IiwicGFydHMiLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJtYXAiLCJfIiwiaW5kZXgiLCJrZXkiLCJ1cGxvYWRJZCIsInBhcnQiLCJwYXJ0TnVtYmVyIiwidXBsb2FkVXJsIiwic2lnbmVkVXJsIiwidW5kZWZpbmVkIiwiYWNjZXNzVXJsIiwidGh1bWJuYWlsVXJsIiwibWVzc2FnZSIsImNvZGUiLCJyZXF1ZXN0VXBsb2FkUGFydHMiLCJwYXRoIiwiY29tcGxldGVNdWx0aXBhcnRVcGxvYWQiLCJjb25maXJtVXBsb2FkIiwiZGVsZXRlRmlsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/dist/providers/edgestore/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/server/dist/shared-039276af.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@edgestore/server/dist/shared-039276af.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ requestUploadParts),\n/* harmony export */   b: () => (/* binding */ buildPath),\n/* harmony export */   c: () => (/* binding */ completeMultipartUpload),\n/* harmony export */   d: () => (/* binding */ confirmUpload),\n/* harmony export */   e: () => (/* binding */ deleteFile),\n/* harmony export */   i: () => (/* binding */ init),\n/* harmony export */   p: () => (/* binding */ parsePath),\n/* harmony export */   r: () => (/* binding */ requestUpload)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/@edgestore/shared/dist/index.mjs\");\n/* harmony import */ var _panva_hkdf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @panva/hkdf */ \"(rsc)/./node_modules/@panva/hkdf/dist/node/esm/index.js\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cookie */ \"(rsc)/./node_modules/cookie/index.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/encrypt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/decrypt.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/@edgestore/server/node_modules/uuid/dist/esm-node/v4.js\");\n\n\n\n\n\nconst IMAGE_MIME_TYPES = [\n    \"image/jpeg\",\n    \"image/png\",\n    \"image/gif\",\n    \"image/webp\",\n    \"image/svg+xml\",\n    \"image/tiff\",\n    \"image/bmp\",\n    \"image/x-icon\"\n];\n// TODO: change it to 1 hour when we have a way to refresh the token\nconst DEFAULT_MAX_AGE = 30 * 24 * 60 * 60; // 30 days\nasync function init(params) {\n    const log = globalThis._EDGE_STORE_LOGGER;\n    const { ctx, provider, router } = params;\n    log.debug(\"Running [init]\", {\n        ctx\n    });\n    const ctxToken = await encryptJWT(ctx);\n    const { token } = await provider.init({\n        ctx,\n        router: router\n    });\n    const newCookies = [\n        (0,cookie__WEBPACK_IMPORTED_MODULE_1__.serialize)(\"edgestore-ctx\", ctxToken, {\n            path: \"/\",\n            maxAge: DEFAULT_MAX_AGE\n        })\n    ];\n    if (token) {\n        newCookies.push((0,cookie__WEBPACK_IMPORTED_MODULE_1__.serialize)(\"edgestore-token\", token, {\n            path: \"/\",\n            maxAge: DEFAULT_MAX_AGE\n        }));\n    }\n    const baseUrl = await provider.getBaseUrl();\n    log.debug(\"Finished [init]\", {\n        ctx,\n        newCookies,\n        token,\n        baseUrl\n    });\n    return {\n        newCookies,\n        token,\n        baseUrl\n    };\n}\nasync function requestUpload(params) {\n    const { provider, router, ctxToken, body: { bucketName, input, fileInfo } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug(\"Running [requestUpload]\", {\n        bucketName,\n        input,\n        fileInfo\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"Missing edgestore-ctx cookie\",\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    const ctx = await getContext(ctxToken);\n    log.debug(\"Decrypted Context\", {\n        ctx\n    });\n    const bucket = router.buckets[bucketName];\n    if (!bucket) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: `Bucket ${bucketName} not found`,\n            code: \"BAD_REQUEST\"\n        });\n    }\n    if (bucket._def.beforeUpload) {\n        log.debug(\"Running [beforeUpload]\");\n        const canUpload = await bucket._def.beforeUpload?.({\n            ctx,\n            input,\n            fileInfo: {\n                size: fileInfo.size,\n                type: fileInfo.type,\n                fileName: fileInfo.fileName,\n                extension: fileInfo.extension,\n                replaceTargetUrl: fileInfo.replaceTargetUrl,\n                temporary: fileInfo.temporary\n            }\n        });\n        log.debug(\"Finished [beforeUpload]\", {\n            canUpload\n        });\n        if (!canUpload) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: \"Upload not allowed for the current context\",\n                code: \"UPLOAD_NOT_ALLOWED\"\n            });\n        }\n    }\n    if (bucket._def.type === \"IMAGE\") {\n        if (!IMAGE_MIME_TYPES.includes(fileInfo.type)) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                code: \"MIME_TYPE_NOT_ALLOWED\",\n                message: \"Only images are allowed in this bucket\",\n                details: {\n                    allowedMimeTypes: IMAGE_MIME_TYPES,\n                    mimeType: fileInfo.type\n                }\n            });\n        }\n    }\n    if (bucket._def.bucketConfig?.maxSize) {\n        if (fileInfo.size > bucket._def.bucketConfig.maxSize) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                code: \"FILE_TOO_LARGE\",\n                message: `File size is too big. Max size is ${bucket._def.bucketConfig.maxSize}`,\n                details: {\n                    maxFileSize: bucket._def.bucketConfig.maxSize,\n                    fileSize: fileInfo.size\n                }\n            });\n        }\n    }\n    if (bucket._def.bucketConfig?.accept) {\n        const accept = bucket._def.bucketConfig.accept;\n        let accepted = false;\n        for (const acceptedMimeType of accept){\n            if (acceptedMimeType.endsWith(\"/*\")) {\n                const mimeType = acceptedMimeType.replace(\"/*\", \"\");\n                if (fileInfo.type.startsWith(mimeType)) {\n                    accepted = true;\n                    break;\n                }\n            } else if (fileInfo.type === acceptedMimeType) {\n                accepted = true;\n                break;\n            }\n        }\n        if (!accepted) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                code: \"MIME_TYPE_NOT_ALLOWED\",\n                message: `\"${fileInfo.type}\" is not allowed. Accepted types are ${JSON.stringify(accept)}`,\n                details: {\n                    allowedMimeTypes: accept,\n                    mimeType: fileInfo.type\n                }\n            });\n        }\n    }\n    const path = buildPath({\n        fileInfo,\n        bucket,\n        pathAttrs: {\n            ctx,\n            input\n        }\n    });\n    const metadata = await bucket._def.metadata?.({\n        ctx,\n        input\n    });\n    const isPublic = bucket._def.accessControl === undefined;\n    log.debug(\"upload info\", {\n        path,\n        metadata,\n        isPublic,\n        bucketType: bucket._def.type\n    });\n    const requestUploadRes = await provider.requestUpload({\n        bucketName,\n        bucketType: bucket._def.type,\n        fileInfo: {\n            ...fileInfo,\n            path,\n            isPublic,\n            metadata\n        }\n    });\n    const { parsedPath, pathOrder } = parsePath(path);\n    log.debug(\"Finished [requestUpload]\");\n    return {\n        ...requestUploadRes,\n        size: fileInfo.size,\n        uploadedAt: new Date().toISOString(),\n        path: parsedPath,\n        pathOrder,\n        metadata\n    };\n}\nasync function requestUploadParts(params) {\n    const { provider, ctxToken, body: { multipart, path } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug(\"Running [requestUploadParts]\", {\n        multipart,\n        path\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"Missing edgestore-ctx cookie\",\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    await getContext(ctxToken); // just to check if the token is valid\n    const res = await provider.requestUploadParts({\n        multipart,\n        path\n    });\n    log.debug(\"Finished [requestUploadParts]\");\n    return res;\n}\nasync function completeMultipartUpload(params) {\n    const { provider, router, ctxToken, body: { bucketName, uploadId, key, parts } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug(\"Running [completeMultipartUpload]\", {\n        bucketName,\n        uploadId,\n        key\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"Missing edgestore-ctx cookie\",\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    await getContext(ctxToken); // just to check if the token is valid\n    const bucket = router.buckets[bucketName];\n    if (!bucket) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: `Bucket ${bucketName} not found`,\n            code: \"BAD_REQUEST\"\n        });\n    }\n    const res = await provider.completeMultipartUpload({\n        uploadId,\n        key,\n        parts\n    });\n    log.debug(\"Finished [completeMultipartUpload]\");\n    return res;\n}\nasync function confirmUpload(params) {\n    const { provider, router, ctxToken, body: { bucketName, url } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug(\"Running [confirmUpload]\", {\n        bucketName,\n        url\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"Missing edgestore-ctx cookie\",\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    await getContext(ctxToken); // just to check if the token is valid\n    const bucket = router.buckets[bucketName];\n    if (!bucket) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: `Bucket ${bucketName} not found`,\n            code: \"BAD_REQUEST\"\n        });\n    }\n    const res = await provider.confirmUpload({\n        bucket,\n        url: unproxyUrl(url)\n    });\n    log.debug(\"Finished [confirmUpload]\");\n    return res;\n}\nasync function deleteFile(params) {\n    const { provider, router, ctxToken, body: { bucketName, url } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug(\"Running [deleteFile]\", {\n        bucketName,\n        url\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"Missing edgestore-ctx cookie\",\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    const ctx = await getContext(ctxToken);\n    const bucket = router.buckets[bucketName];\n    if (!bucket) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: `Bucket ${bucketName} not found`,\n            code: \"BAD_REQUEST\"\n        });\n    }\n    if (!bucket._def.beforeDelete) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"You need to define beforeDelete if you want to delete files directly from the frontend.\",\n            code: \"SERVER_ERROR\"\n        });\n    }\n    const fileInfo = await provider.getFile({\n        url: unproxyUrl(url)\n    });\n    const canDelete = await bucket._def.beforeDelete({\n        ctx,\n        fileInfo\n    });\n    if (!canDelete) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"Delete not allowed for the current context\",\n            code: \"DELETE_NOT_ALLOWED\"\n        });\n    }\n    const res = await provider.deleteFile({\n        bucket,\n        url: unproxyUrl(url)\n    });\n    log.debug(\"Finished [deleteFile]\");\n    return res;\n}\nasync function encryptJWT(ctx) {\n    const secret = process.env.EDGE_STORE_JWT_SECRET ?? process.env.EDGE_STORE_SECRET_KEY;\n    if (!secret) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"EDGE_STORE_JWT_SECRET or EDGE_STORE_SECRET_KEY is not defined\",\n            code: \"SERVER_ERROR\"\n        });\n    }\n    const encryptionSecret = await getDerivedEncryptionKey(secret);\n    return await new jose__WEBPACK_IMPORTED_MODULE_2__.EncryptJWT(ctx).setProtectedHeader({\n        alg: \"dir\",\n        enc: \"A256GCM\"\n    }).setIssuedAt().setExpirationTime(Date.now() / 1000 + DEFAULT_MAX_AGE).setJti((0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])()).encrypt(encryptionSecret);\n}\nasync function decryptJWT(token) {\n    const secret = process.env.EDGE_STORE_JWT_SECRET ?? process.env.EDGE_STORE_SECRET_KEY;\n    if (!secret) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: \"EDGE_STORE_JWT_SECRET or EDGE_STORE_SECRET_KEY is not defined\",\n            code: \"SERVER_ERROR\"\n        });\n    }\n    const encryptionSecret = await getDerivedEncryptionKey(secret);\n    const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.jwtDecrypt)(token, encryptionSecret, {\n        clockTolerance: 15\n    });\n    return payload;\n}\nasync function getDerivedEncryptionKey(secret) {\n    return await (0,_panva_hkdf__WEBPACK_IMPORTED_MODULE_5__.hkdf)(\"sha256\", secret, \"\", \"Edge Store Generated Encryption Key\", 32);\n}\nfunction buildPath(params) {\n    const { bucket } = params;\n    const pathParams = bucket._def.path;\n    const path = pathParams.map((param)=>{\n        const paramEntries = Object.entries(param);\n        if (paramEntries[0] === undefined) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: `Empty path param found in: ${JSON.stringify(pathParams)}`,\n                code: \"SERVER_ERROR\"\n            });\n        }\n        const [key, value] = paramEntries[0];\n        // this is a string like: \"ctx.xxx\" or \"input.yyy.zzz\"\n        const currParamVal = value().split(\".\").reduce((acc2, key)=>{\n            if (acc2[key] === undefined) {\n                throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                    message: `Missing key ${key} in ${JSON.stringify(acc2)}`,\n                    code: \"BAD_REQUEST\"\n                });\n            }\n            return acc2[key];\n        }, params.pathAttrs);\n        return {\n            key,\n            value: currParamVal\n        };\n    });\n    return path;\n}\nfunction parsePath(path) {\n    const parsedPath = path.reduce((acc, curr)=>{\n        acc[curr.key] = curr.value;\n        return acc;\n    }, {});\n    const pathOrder = path.map((p)=>p.key);\n    return {\n        parsedPath,\n        pathOrder\n    };\n}\nasync function getContext(token) {\n    return await decryptJWT(token);\n}\n/**\n * On local development, protected files are proxied to the server,\n * which changes the original URL.\n *\n * This function is used to get the original URL,\n * so that we can delete or confirm the upload.\n */ function unproxyUrl(url) {\n    if ( true && url.startsWith(\"http://\")) {\n        // get the url param from the query string\n        const urlParam = new URL(url).searchParams.get(\"url\");\n        if (urlParam) {\n            return urlParam;\n        }\n    }\n    return url;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9zaGFyZWQtMDM5Mjc2YWYubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW1EO0FBQ2hCO0FBQ0E7QUFDVztBQUNwQjtBQUUxQixNQUFNTSxtQkFBbUI7SUFDckI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNIO0FBRUQsb0VBQW9FO0FBQ3BFLE1BQU1DLGtCQUFrQixLQUFLLEtBQUssS0FBSyxJQUFJLFVBQVU7QUFDckQsZUFBZUMsS0FBS0MsTUFBTTtJQUN0QixNQUFNQyxNQUFNQyxXQUFXQyxrQkFBa0I7SUFDekMsTUFBTSxFQUFFQyxHQUFHLEVBQUVDLFFBQVEsRUFBRUMsTUFBTSxFQUFFLEdBQUdOO0lBQ2xDQyxJQUFJTSxLQUFLLENBQUMsa0JBQWtCO1FBQ3hCSDtJQUNKO0lBQ0EsTUFBTUksV0FBVyxNQUFNQyxXQUFXTDtJQUNsQyxNQUFNLEVBQUVNLEtBQUssRUFBRSxHQUFHLE1BQU1MLFNBQVNOLElBQUksQ0FBQztRQUNsQ0s7UUFDQUUsUUFBUUE7SUFDWjtJQUNBLE1BQU1LLGFBQWE7UUFDZmxCLGlEQUFTQSxDQUFDLGlCQUFpQmUsVUFBVTtZQUNqQ0ksTUFBTTtZQUNOQyxRQUFRZjtRQUNaO0tBQ0g7SUFDRCxJQUFJWSxPQUFPO1FBQ1BDLFdBQVdHLElBQUksQ0FBQ3JCLGlEQUFTQSxDQUFDLG1CQUFtQmlCLE9BQU87WUFDaERFLE1BQU07WUFDTkMsUUFBUWY7UUFDWjtJQUNKO0lBQ0EsTUFBTWlCLFVBQVUsTUFBTVYsU0FBU1csVUFBVTtJQUN6Q2YsSUFBSU0sS0FBSyxDQUFDLG1CQUFtQjtRQUN6Qkg7UUFDQU87UUFDQUQ7UUFDQUs7SUFDSjtJQUNBLE9BQU87UUFDSEo7UUFDQUQ7UUFDQUs7SUFDSjtBQUNKO0FBQ0EsZUFBZUUsY0FBY2pCLE1BQU07SUFDL0IsTUFBTSxFQUFFSyxRQUFRLEVBQUVDLE1BQU0sRUFBRUUsUUFB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Qy9DLElBQUlILFVBQVU7WUFDVixPQUFPQTtRQUNYO0lBQ0o7SUFDQSxPQUFPdEM7QUFDWDtBQUVxSyIsInNvdXJjZXMiOlsid2VicGFjazovLzI4X25vdGlvbi1jbG9uZS8uL25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NlcnZlci9kaXN0L3NoYXJlZC0wMzkyNzZhZi5tanM/MGYyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFZGdlU3RvcmVFcnJvciB9IGZyb20gJ0BlZGdlc3RvcmUvc2hhcmVkJztcbmltcG9ydCB7IGhrZGYgfSBmcm9tICdAcGFudmEvaGtkZic7XG5pbXBvcnQgeyBzZXJpYWxpemUgfSBmcm9tICdjb29raWUnO1xuaW1wb3J0IHsgRW5jcnlwdEpXVCwgand0RGVjcnlwdCB9IGZyb20gJ2pvc2UnO1xuaW1wb3J0IHsgdjQgfSBmcm9tICd1dWlkJztcblxuY29uc3QgSU1BR0VfTUlNRV9UWVBFUyA9IFtcbiAgICAnaW1hZ2UvanBlZycsXG4gICAgJ2ltYWdlL3BuZycsXG4gICAgJ2ltYWdlL2dpZicsXG4gICAgJ2ltYWdlL3dlYnAnLFxuICAgICdpbWFnZS9zdmcreG1sJyxcbiAgICAnaW1hZ2UvdGlmZicsXG4gICAgJ2ltYWdlL2JtcCcsXG4gICAgJ2ltYWdlL3gtaWNvbidcbl07XG5cbi8vIFRPRE86IGNoYW5nZSBpdCB0byAxIGhvdXIgd2hlbiB3ZSBoYXZlIGEgd2F5IHRvIHJlZnJlc2ggdGhlIHRva2VuXG5jb25zdCBERUZBVUxUX01BWF9BR0UgPSAzMCAqIDI0ICogNjAgKiA2MDsgLy8gMzAgZGF5c1xuYXN5bmMgZnVuY3Rpb24gaW5pdChwYXJhbXMpIHtcbiAgICBjb25zdCBsb2cgPSBnbG9iYWxUaGlzLl9FREdFX1NUT1JFX0xPR0dFUjtcbiAgICBjb25zdCB7IGN0eCwgcHJvdmlkZXIsIHJvdXRlciB9ID0gcGFyYW1zO1xuICAgIGxvZy5kZWJ1ZygnUnVubmluZyBbaW5pdF0nLCB7XG4gICAgICAgIGN0eFxuICAgIH0pO1xuICAgIGNvbnN0IGN0eFRva2VuID0gYXdhaXQgZW5jcnlwdEpXVChjdHgpO1xuICAgIGNvbnN0IHsgdG9rZW4gfSA9IGF3YWl0IHByb3ZpZGVyLmluaXQoe1xuICAgICAgICBjdHgsXG4gICAgICAgIHJvdXRlcjogcm91dGVyXG4gICAgfSk7XG4gICAgY29uc3QgbmV3Q29va2llcyA9IFtcbiAgICAgICAgc2VyaWFsaXplKCdlZGdlc3RvcmUtY3R4JywgY3R4VG9rZW4sIHtcbiAgICAgICAgICAgIHBhdGg6ICcvJyxcbiAgICAgICAgICAgIG1heEFnZTogREVGQVVMVF9NQVhfQUdFXG4gICAgICAgIH0pXG4gICAgXTtcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgbmV3Q29va2llcy5wdXNoKHNlcmlhbGl6ZSgnZWRnZXN0b3JlLXRva2VuJywgdG9rZW4sIHtcbiAgICAgICAgICAgIHBhdGg6ICcvJyxcbiAgICAgICAgICAgIG1heEFnZTogREVGQVVMVF9NQVhfQUdFXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY29uc3QgYmFzZVVybCA9IGF3YWl0IHByb3ZpZGVyLmdldEJhc2VVcmwoKTtcbiAgICBsb2cuZGVidWcoJ0ZpbmlzaGVkIFtpbml0XScsIHtcbiAgICAgICAgY3R4LFxuICAgICAgICBuZXdDb29raWVzLFxuICAgICAgICB0b2tlbixcbiAgICAgICAgYmFzZVVybFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIG5ld0Nvb2tpZXMsXG4gICAgICAgIHRva2VuLFxuICAgICAgICBiYXNlVXJsXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RVcGxvYWQocGFyYW1zKSB7XG4gICAgY29uc3QgeyBwcm92aWRlciwgcm91dGVyLCBjdHhUb2tlbiwgYm9keTogeyBidWNrZXROYW1lLCBpbnB1dCwgZmlsZUluZm8gfSB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGxvZyA9IGdsb2JhbFRoaXMuX0VER0VfU1RPUkVfTE9HR0VSO1xuICAgIGxvZy5kZWJ1ZygnUnVubmluZyBbcmVxdWVzdFVwbG9hZF0nLCB7XG4gICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgIGlucHV0LFxuICAgICAgICBmaWxlSW5mb1xuICAgIH0pO1xuICAgIGlmICghY3R4VG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdNaXNzaW5nIGVkZ2VzdG9yZS1jdHggY29va2llJyxcbiAgICAgICAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBjdHggPSBhd2FpdCBnZXRDb250ZXh0KGN0eFRva2VuKTtcbiAgICBsb2cuZGVidWcoJ0RlY3J5cHRlZCBDb250ZXh0Jywge1xuICAgICAgICBjdHhcbiAgICB9KTtcbiAgICBjb25zdCBidWNrZXQgPSByb3V0ZXIuYnVja2V0c1tidWNrZXROYW1lXTtcbiAgICBpZiAoIWJ1Y2tldCkge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogYEJ1Y2tldCAke2J1Y2tldE5hbWV9IG5vdCBmb3VuZGAsXG4gICAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoYnVja2V0Ll9kZWYuYmVmb3JlVXBsb2FkKSB7XG4gICAgICAgIGxvZy5kZWJ1ZygnUnVubmluZyBbYmVmb3JlVXBsb2FkXScpO1xuICAgICAgICBjb25zdCBjYW5VcGxvYWQgPSBhd2FpdCBidWNrZXQuX2RlZi5iZWZvcmVVcGxvYWQ/Lih7XG4gICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGZpbGVJbmZvOiB7XG4gICAgICAgICAgICAgICAgc2l6ZTogZmlsZUluZm8uc2l6ZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBmaWxlSW5mby50eXBlLFxuICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlSW5mby5maWxlTmFtZSxcbiAgICAgICAgICAgICAgICBleHRlbnNpb246IGZpbGVJbmZvLmV4dGVuc2lvbixcbiAgICAgICAgICAgICAgICByZXBsYWNlVGFyZ2V0VXJsOiBmaWxlSW5mby5yZXBsYWNlVGFyZ2V0VXJsLFxuICAgICAgICAgICAgICAgIHRlbXBvcmFyeTogZmlsZUluZm8udGVtcG9yYXJ5XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsb2cuZGVidWcoJ0ZpbmlzaGVkIFtiZWZvcmVVcGxvYWRdJywge1xuICAgICAgICAgICAgY2FuVXBsb2FkXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWNhblVwbG9hZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVXBsb2FkIG5vdCBhbGxvd2VkIGZvciB0aGUgY3VycmVudCBjb250ZXh0JyxcbiAgICAgICAgICAgICAgICBjb2RlOiAnVVBMT0FEX05PVF9BTExPV0VEJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJ1Y2tldC5fZGVmLnR5cGUgPT09ICdJTUFHRScpIHtcbiAgICAgICAgaWYgKCFJTUFHRV9NSU1FX1RZUEVTLmluY2x1ZGVzKGZpbGVJbmZvLnR5cGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6ICdNSU1FX1RZUEVfTk9UX0FMTE9XRUQnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdPbmx5IGltYWdlcyBhcmUgYWxsb3dlZCBpbiB0aGlzIGJ1Y2tldCcsXG4gICAgICAgICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd2VkTWltZVR5cGVzOiBJTUFHRV9NSU1FX1RZUEVTLFxuICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogZmlsZUluZm8udHlwZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChidWNrZXQuX2RlZi5idWNrZXRDb25maWc/Lm1heFNpemUpIHtcbiAgICAgICAgaWYgKGZpbGVJbmZvLnNpemUgPiBidWNrZXQuX2RlZi5idWNrZXRDb25maWcubWF4U2l6ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiAnRklMRV9UT09fTEFSR0UnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBGaWxlIHNpemUgaXMgdG9vIGJpZy4gTWF4IHNpemUgaXMgJHtidWNrZXQuX2RlZi5idWNrZXRDb25maWcubWF4U2l6ZX1gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgbWF4RmlsZVNpemU6IGJ1Y2tldC5fZGVmLmJ1Y2tldENvbmZpZy5tYXhTaXplLFxuICAgICAgICAgICAgICAgICAgICBmaWxlU2l6ZTogZmlsZUluZm8uc2l6ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChidWNrZXQuX2RlZi5idWNrZXRDb25maWc/LmFjY2VwdCkge1xuICAgICAgICBjb25zdCBhY2NlcHQgPSBidWNrZXQuX2RlZi5idWNrZXRDb25maWcuYWNjZXB0O1xuICAgICAgICBsZXQgYWNjZXB0ZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBhY2NlcHRlZE1pbWVUeXBlIG9mIGFjY2VwdCl7XG4gICAgICAgICAgICBpZiAoYWNjZXB0ZWRNaW1lVHlwZS5lbmRzV2l0aCgnLyonKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pbWVUeXBlID0gYWNjZXB0ZWRNaW1lVHlwZS5yZXBsYWNlKCcvKicsICcnKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZUluZm8udHlwZS5zdGFydHNXaXRoKG1pbWVUeXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBhY2NlcHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZUluZm8udHlwZSA9PT0gYWNjZXB0ZWRNaW1lVHlwZSkge1xuICAgICAgICAgICAgICAgIGFjY2VwdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjY2VwdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6ICdNSU1FX1RZUEVfTk9UX0FMTE9XRUQnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBcIiR7ZmlsZUluZm8udHlwZX1cIiBpcyBub3QgYWxsb3dlZC4gQWNjZXB0ZWQgdHlwZXMgYXJlICR7SlNPTi5zdHJpbmdpZnkoYWNjZXB0KX1gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dlZE1pbWVUeXBlczogYWNjZXB0LFxuICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogZmlsZUluZm8udHlwZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBhdGggPSBidWlsZFBhdGgoe1xuICAgICAgICBmaWxlSW5mbyxcbiAgICAgICAgYnVja2V0LFxuICAgICAgICBwYXRoQXR0cnM6IHtcbiAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgIGlucHV0XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IGJ1Y2tldC5fZGVmLm1ldGFkYXRhPy4oe1xuICAgICAgICBjdHgsXG4gICAgICAgIGlucHV0XG4gICAgfSk7XG4gICAgY29uc3QgaXNQdWJsaWMgPSBidWNrZXQuX2RlZi5hY2Nlc3NDb250cm9sID09PSB1bmRlZmluZWQ7XG4gICAgbG9nLmRlYnVnKCd1cGxvYWQgaW5mbycsIHtcbiAgICAgICAgcGF0aCxcbiAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgIGlzUHVibGljLFxuICAgICAgICBidWNrZXRUeXBlOiBidWNrZXQuX2RlZi50eXBlXG4gICAgfSk7XG4gICAgY29uc3QgcmVxdWVzdFVwbG9hZFJlcyA9IGF3YWl0IHByb3ZpZGVyLnJlcXVlc3RVcGxvYWQoe1xuICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICBidWNrZXRUeXBlOiBidWNrZXQuX2RlZi50eXBlLFxuICAgICAgICBmaWxlSW5mbzoge1xuICAgICAgICAgICAgLi4uZmlsZUluZm8sXG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgaXNQdWJsaWMsXG4gICAgICAgICAgICBtZXRhZGF0YVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgeyBwYXJzZWRQYXRoLCBwYXRoT3JkZXIgfSA9IHBhcnNlUGF0aChwYXRoKTtcbiAgICBsb2cuZGVidWcoJ0ZpbmlzaGVkIFtyZXF1ZXN0VXBsb2FkXScpO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnJlcXVlc3RVcGxvYWRSZXMsXG4gICAgICAgIHNpemU6IGZpbGVJbmZvLnNpemUsXG4gICAgICAgIHVwbG9hZGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgcGF0aDogcGFyc2VkUGF0aCxcbiAgICAgICAgcGF0aE9yZGVyLFxuICAgICAgICBtZXRhZGF0YVxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiByZXF1ZXN0VXBsb2FkUGFydHMocGFyYW1zKSB7XG4gICAgY29uc3QgeyBwcm92aWRlciwgY3R4VG9rZW4sIGJvZHk6IHsgbXVsdGlwYXJ0LCBwYXRoIH0gfSA9IHBhcmFtcztcbiAgICBjb25zdCBsb2cgPSBnbG9iYWxUaGlzLl9FREdFX1NUT1JFX0xPR0dFUjtcbiAgICBsb2cuZGVidWcoJ1J1bm5pbmcgW3JlcXVlc3RVcGxvYWRQYXJ0c10nLCB7XG4gICAgICAgIG11bHRpcGFydCxcbiAgICAgICAgcGF0aFxuICAgIH0pO1xuICAgIGlmICghY3R4VG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdNaXNzaW5nIGVkZ2VzdG9yZS1jdHggY29va2llJyxcbiAgICAgICAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhd2FpdCBnZXRDb250ZXh0KGN0eFRva2VuKTsgLy8ganVzdCB0byBjaGVjayBpZiB0aGUgdG9rZW4gaXMgdmFsaWRcbiAgICBjb25zdCByZXMgPSBhd2FpdCBwcm92aWRlci5yZXF1ZXN0VXBsb2FkUGFydHMoe1xuICAgICAgICBtdWx0aXBhcnQsXG4gICAgICAgIHBhdGhcbiAgICB9KTtcbiAgICBsb2cuZGVidWcoJ0ZpbmlzaGVkIFtyZXF1ZXN0VXBsb2FkUGFydHNdJyk7XG4gICAgcmV0dXJuIHJlcztcbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkKHBhcmFtcykge1xuICAgIGNvbnN0IHsgcHJvdmlkZXIsIHJvdXRlciwgY3R4VG9rZW4sIGJvZHk6IHsgYnVja2V0TmFtZSwgdXBsb2FkSWQsIGtleSwgcGFydHMgfSB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGxvZyA9IGdsb2JhbFRoaXMuX0VER0VfU1RPUkVfTE9HR0VSO1xuICAgIGxvZy5kZWJ1ZygnUnVubmluZyBbY29tcGxldGVNdWx0aXBhcnRVcGxvYWRdJywge1xuICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICB1cGxvYWRJZCxcbiAgICAgICAga2V5XG4gICAgfSk7XG4gICAgaWYgKCFjdHhUb2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogJ01pc3NpbmcgZWRnZXN0b3JlLWN0eCBjb29raWUnLFxuICAgICAgICAgICAgY29kZTogJ1VOQVVUSE9SSVpFRCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGF3YWl0IGdldENvbnRleHQoY3R4VG9rZW4pOyAvLyBqdXN0IHRvIGNoZWNrIGlmIHRoZSB0b2tlbiBpcyB2YWxpZFxuICAgIGNvbnN0IGJ1Y2tldCA9IHJvdXRlci5idWNrZXRzW2J1Y2tldE5hbWVdO1xuICAgIGlmICghYnVja2V0KSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiBgQnVja2V0ICR7YnVja2V0TmFtZX0gbm90IGZvdW5kYCxcbiAgICAgICAgICAgIGNvZGU6ICdCQURfUkVRVUVTVCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHByb3ZpZGVyLmNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkKHtcbiAgICAgICAgdXBsb2FkSWQsXG4gICAgICAgIGtleSxcbiAgICAgICAgcGFydHNcbiAgICB9KTtcbiAgICBsb2cuZGVidWcoJ0ZpbmlzaGVkIFtjb21wbGV0ZU11bHRpcGFydFVwbG9hZF0nKTtcbiAgICByZXR1cm4gcmVzO1xufVxuYXN5bmMgZnVuY3Rpb24gY29uZmlybVVwbG9hZChwYXJhbXMpIHtcbiAgICBjb25zdCB7IHByb3ZpZGVyLCByb3V0ZXIsIGN0eFRva2VuLCBib2R5OiB7IGJ1Y2tldE5hbWUsIHVybCB9IH0gPSBwYXJhbXM7XG4gICAgY29uc3QgbG9nID0gZ2xvYmFsVGhpcy5fRURHRV9TVE9SRV9MT0dHRVI7XG4gICAgbG9nLmRlYnVnKCdSdW5uaW5nIFtjb25maXJtVXBsb2FkXScsIHtcbiAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgdXJsXG4gICAgfSk7XG4gICAgaWYgKCFjdHhUb2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogJ01pc3NpbmcgZWRnZXN0b3JlLWN0eCBjb29raWUnLFxuICAgICAgICAgICAgY29kZTogJ1VOQVVUSE9SSVpFRCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGF3YWl0IGdldENvbnRleHQoY3R4VG9rZW4pOyAvLyBqdXN0IHRvIGNoZWNrIGlmIHRoZSB0b2tlbiBpcyB2YWxpZFxuICAgIGNvbnN0IGJ1Y2tldCA9IHJvdXRlci5idWNrZXRzW2J1Y2tldE5hbWVdO1xuICAgIGlmICghYnVja2V0KSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiBgQnVja2V0ICR7YnVja2V0TmFtZX0gbm90IGZvdW5kYCxcbiAgICAgICAgICAgIGNvZGU6ICdCQURfUkVRVUVTVCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHByb3ZpZGVyLmNvbmZpcm1VcGxvYWQoe1xuICAgICAgICBidWNrZXQsXG4gICAgICAgIHVybDogdW5wcm94eVVybCh1cmwpXG4gICAgfSk7XG4gICAgbG9nLmRlYnVnKCdGaW5pc2hlZCBbY29uZmlybVVwbG9hZF0nKTtcbiAgICByZXR1cm4gcmVzO1xufVxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlRmlsZShwYXJhbXMpIHtcbiAgICBjb25zdCB7IHByb3ZpZGVyLCByb3V0ZXIsIGN0eFRva2VuLCBib2R5OiB7IGJ1Y2tldE5hbWUsIHVybCB9IH0gPSBwYXJhbXM7XG4gICAgY29uc3QgbG9nID0gZ2xvYmFsVGhpcy5fRURHRV9TVE9SRV9MT0dHRVI7XG4gICAgbG9nLmRlYnVnKCdSdW5uaW5nIFtkZWxldGVGaWxlXScsIHtcbiAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgdXJsXG4gICAgfSk7XG4gICAgaWYgKCFjdHhUb2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogJ01pc3NpbmcgZWRnZXN0b3JlLWN0eCBjb29raWUnLFxuICAgICAgICAgICAgY29kZTogJ1VOQVVUSE9SSVpFRCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGN0eCA9IGF3YWl0IGdldENvbnRleHQoY3R4VG9rZW4pO1xuICAgIGNvbnN0IGJ1Y2tldCA9IHJvdXRlci5idWNrZXRzW2J1Y2tldE5hbWVdO1xuICAgIGlmICghYnVja2V0KSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiBgQnVja2V0ICR7YnVja2V0TmFtZX0gbm90IGZvdW5kYCxcbiAgICAgICAgICAgIGNvZGU6ICdCQURfUkVRVUVTVCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghYnVja2V0Ll9kZWYuYmVmb3JlRGVsZXRlKSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiAnWW91IG5lZWQgdG8gZGVmaW5lIGJlZm9yZURlbGV0ZSBpZiB5b3Ugd2FudCB0byBkZWxldGUgZmlsZXMgZGlyZWN0bHkgZnJvbSB0aGUgZnJvbnRlbmQuJyxcbiAgICAgICAgICAgIGNvZGU6ICdTRVJWRVJfRVJST1InXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBmaWxlSW5mbyA9IGF3YWl0IHByb3ZpZGVyLmdldEZpbGUoe1xuICAgICAgICB1cmw6IHVucHJveHlVcmwodXJsKVxuICAgIH0pO1xuICAgIGNvbnN0IGNhbkRlbGV0ZSA9IGF3YWl0IGJ1Y2tldC5fZGVmLmJlZm9yZURlbGV0ZSh7XG4gICAgICAgIGN0eCxcbiAgICAgICAgZmlsZUluZm9cbiAgICB9KTtcbiAgICBpZiAoIWNhbkRlbGV0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogJ0RlbGV0ZSBub3QgYWxsb3dlZCBmb3IgdGhlIGN1cnJlbnQgY29udGV4dCcsXG4gICAgICAgICAgICBjb2RlOiAnREVMRVRFX05PVF9BTExPV0VEJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcHJvdmlkZXIuZGVsZXRlRmlsZSh7XG4gICAgICAgIGJ1Y2tldCxcbiAgICAgICAgdXJsOiB1bnByb3h5VXJsKHVybClcbiAgICB9KTtcbiAgICBsb2cuZGVidWcoJ0ZpbmlzaGVkIFtkZWxldGVGaWxlXScpO1xuICAgIHJldHVybiByZXM7XG59XG5hc3luYyBmdW5jdGlvbiBlbmNyeXB0SldUKGN0eCkge1xuICAgIGNvbnN0IHNlY3JldCA9IHByb2Nlc3MuZW52LkVER0VfU1RPUkVfSldUX1NFQ1JFVCA/PyBwcm9jZXNzLmVudi5FREdFX1NUT1JFX1NFQ1JFVF9LRVk7XG4gICAgaWYgKCFzZWNyZXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdFREdFX1NUT1JFX0pXVF9TRUNSRVQgb3IgRURHRV9TVE9SRV9TRUNSRVRfS0VZIGlzIG5vdCBkZWZpbmVkJyxcbiAgICAgICAgICAgIGNvZGU6ICdTRVJWRVJfRVJST1InXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBlbmNyeXB0aW9uU2VjcmV0ID0gYXdhaXQgZ2V0RGVyaXZlZEVuY3J5cHRpb25LZXkoc2VjcmV0KTtcbiAgICByZXR1cm4gYXdhaXQgbmV3IEVuY3J5cHRKV1QoY3R4KS5zZXRQcm90ZWN0ZWRIZWFkZXIoe1xuICAgICAgICBhbGc6ICdkaXInLFxuICAgICAgICBlbmM6ICdBMjU2R0NNJ1xuICAgIH0pLnNldElzc3VlZEF0KCkuc2V0RXhwaXJhdGlvblRpbWUoRGF0ZS5ub3coKSAvIDEwMDAgKyBERUZBVUxUX01BWF9BR0UpLnNldEp0aSh2NCgpKS5lbmNyeXB0KGVuY3J5cHRpb25TZWNyZXQpO1xufVxuYXN5bmMgZnVuY3Rpb24gZGVjcnlwdEpXVCh0b2tlbikge1xuICAgIGNvbnN0IHNlY3JldCA9IHByb2Nlc3MuZW52LkVER0VfU1RPUkVfSldUX1NFQ1JFVCA/PyBwcm9jZXNzLmVudi5FREdFX1NUT1JFX1NFQ1JFVF9LRVk7XG4gICAgaWYgKCFzZWNyZXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdFREdFX1NUT1JFX0pXVF9TRUNSRVQgb3IgRURHRV9TVE9SRV9TRUNSRVRfS0VZIGlzIG5vdCBkZWZpbmVkJyxcbiAgICAgICAgICAgIGNvZGU6ICdTRVJWRVJfRVJST1InXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBlbmNyeXB0aW9uU2VjcmV0ID0gYXdhaXQgZ2V0RGVyaXZlZEVuY3J5cHRpb25LZXkoc2VjcmV0KTtcbiAgICBjb25zdCB7IHBheWxvYWQgfSA9IGF3YWl0IGp3dERlY3J5cHQodG9rZW4sIGVuY3J5cHRpb25TZWNyZXQsIHtcbiAgICAgICAgY2xvY2tUb2xlcmFuY2U6IDE1XG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG59XG5hc3luYyBmdW5jdGlvbiBnZXREZXJpdmVkRW5jcnlwdGlvbktleShzZWNyZXQpIHtcbiAgICByZXR1cm4gYXdhaXQgaGtkZignc2hhMjU2Jywgc2VjcmV0LCAnJywgJ0VkZ2UgU3RvcmUgR2VuZXJhdGVkIEVuY3J5cHRpb24gS2V5JywgMzIpO1xufVxuZnVuY3Rpb24gYnVpbGRQYXRoKHBhcmFtcykge1xuICAgIGNvbnN0IHsgYnVja2V0IH0gPSBwYXJhbXM7XG4gICAgY29uc3QgcGF0aFBhcmFtcyA9IGJ1Y2tldC5fZGVmLnBhdGg7XG4gICAgY29uc3QgcGF0aCA9IHBhdGhQYXJhbXMubWFwKChwYXJhbSk9PntcbiAgICAgICAgY29uc3QgcGFyYW1FbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocGFyYW0pO1xuICAgICAgICBpZiAocGFyYW1FbnRyaWVzWzBdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEVtcHR5IHBhdGggcGFyYW0gZm91bmQgaW46ICR7SlNPTi5zdHJpbmdpZnkocGF0aFBhcmFtcyl9YCxcbiAgICAgICAgICAgICAgICBjb2RlOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gcGFyYW1FbnRyaWVzWzBdO1xuICAgICAgICAvLyB0aGlzIGlzIGEgc3RyaW5nIGxpa2U6IFwiY3R4Lnh4eFwiIG9yIFwiaW5wdXQueXl5Lnp6elwiXG4gICAgICAgIGNvbnN0IGN1cnJQYXJhbVZhbCA9IHZhbHVlKCkuc3BsaXQoJy4nKS5yZWR1Y2UoKGFjYzIsIGtleSk9PntcbiAgICAgICAgICAgIGlmIChhY2MyW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBNaXNzaW5nIGtleSAke2tleX0gaW4gJHtKU09OLnN0cmluZ2lmeShhY2MyKX1gLFxuICAgICAgICAgICAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjMltrZXldO1xuICAgICAgICB9LCBwYXJhbXMucGF0aEF0dHJzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHZhbHVlOiBjdXJyUGFyYW1WYWxcbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gcGF0aDtcbn1cbmZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XG4gICAgY29uc3QgcGFyc2VkUGF0aCA9IHBhdGgucmVkdWNlKChhY2MsIGN1cnIpPT57XG4gICAgICAgIGFjY1tjdXJyLmtleV0gPSBjdXJyLnZhbHVlO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbiAgICBjb25zdCBwYXRoT3JkZXIgPSBwYXRoLm1hcCgocCk9PnAua2V5KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwYXJzZWRQYXRoLFxuICAgICAgICBwYXRoT3JkZXJcbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0Q29udGV4dCh0b2tlbikge1xuICAgIHJldHVybiBhd2FpdCBkZWNyeXB0SldUKHRva2VuKTtcbn1cbi8qKlxuICogT24gbG9jYWwgZGV2ZWxvcG1lbnQsIHByb3RlY3RlZCBmaWxlcyBhcmUgcHJveGllZCB0byB0aGUgc2VydmVyLFxuICogd2hpY2ggY2hhbmdlcyB0aGUgb3JpZ2luYWwgVVJMLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBnZXQgdGhlIG9yaWdpbmFsIFVSTCxcbiAqIHNvIHRoYXQgd2UgY2FuIGRlbGV0ZSBvciBjb25maXJtIHRoZSB1cGxvYWQuXG4gKi8gZnVuY3Rpb24gdW5wcm94eVVybCh1cmwpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgdXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSkge1xuICAgICAgICAvLyBnZXQgdGhlIHVybCBwYXJhbSBmcm9tIHRoZSBxdWVyeSBzdHJpbmdcbiAgICAgICAgY29uc3QgdXJsUGFyYW0gPSBuZXcgVVJMKHVybCkuc2VhcmNoUGFyYW1zLmdldCgndXJsJyk7XG4gICAgICAgIGlmICh1cmxQYXJhbSkge1xuICAgICAgICAgICAgcmV0dXJuIHVybFBhcmFtO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cmw7XG59XG5cbmV4cG9ydCB7IHJlcXVlc3RVcGxvYWRQYXJ0cyBhcyBhLCBidWlsZFBhdGggYXMgYiwgY29tcGxldGVNdWx0aXBhcnRVcGxvYWQgYXMgYywgY29uZmlybVVwbG9hZCBhcyBkLCBkZWxldGVGaWxlIGFzIGUsIGluaXQgYXMgaSwgcGFyc2VQYXRoIGFzIHAsIHJlcXVlc3RVcGxvYWQgYXMgciB9O1xuIl0sIm5hbWVzIjpbIkVkZ2VTdG9yZUVycm9yIiwiaGtkZiIsInNlcmlhbGl6ZSIsIkVuY3J5cHRKV1QiLCJqd3REZWNyeXB0IiwidjQiLCJJTUFHRV9NSU1FX1RZUEVTIiwiREVGQVVMVF9NQVhfQUdFIiwiaW5pdCIsInBhcmFtcyIsImxvZyIsImdsb2JhbFRoaXMiLCJfRURHRV9TVE9SRV9MT0dHRVIiLCJjdHgiLCJwcm92aWRlciIsInJvdXRlciIsImRlYnVnIiwiY3R4VG9rZW4iLCJlbmNyeXB0SldUIiwidG9rZW4iLCJuZXdDb29raWVzIiwicGF0aCIsIm1heEFnZSIsInB1c2giLCJiYXNlVXJsIiwiZ2V0QmFzZVVybCIsInJlcXVlc3RVcGxvYWQiLCJib2R5IiwiYnVja2V0TmFtZSIsImlucHV0IiwiZmlsZUluZm8iLCJtZXNzYWdlIiwiY29kZSIsImdldENvbnRleHQiLCJidWNrZXQiLCJidWNrZXRzIiwiX2RlZiIsImJlZm9yZVVwbG9hZCIsImNhblVwbG9hZCIsInNpemUiLCJ0eXBlIiwiZmlsZU5hbWUiLCJleHRlbnNpb24iLCJyZXBsYWNlVGFyZ2V0VXJsIiwidGVtcG9yYXJ5IiwiaW5jbHVkZXMiLCJkZXRhaWxzIiwiYWxsb3dlZE1pbWVUeXBlcyIsIm1pbWVUeXBlIiwiYnVja2V0Q29uZmlnIiwibWF4U2l6ZSIsIm1heEZpbGVTaXplIiwiZmlsZVNpemUiLCJhY2NlcHQiLCJhY2NlcHRlZCIsImFjY2VwdGVkTWltZVR5cGUiLCJlbmRzV2l0aCIsInJlcGxhY2UiLCJzdGFydHNXaXRoIiwiSlNPTiIsInN0cmluZ2lmeSIsImJ1aWxkUGF0aCIsInBhdGhBdHRycyIsIm1ldGFkYXRhIiwiaXNQdWJsaWMiLCJhY2Nlc3NDb250cm9sIiwidW5kZWZpbmVkIiwiYnVja2V0VHlwZSIsInJlcXVlc3RVcGxvYWRSZXMiLCJwYXJzZWRQYXRoIiwicGF0aE9yZGVyIiwicGFyc2VQYXRoIiwidXBsb2FkZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInJlcXVlc3RVcGxvYWRQYXJ0cyIsIm11bHRpcGFydCIsInJlcyIsImNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkIiwidXBsb2FkSWQiLCJrZXkiLCJwYXJ0cyIsImNvbmZpcm1VcGxvYWQiLCJ1cmwiLCJ1bnByb3h5VXJsIiwiZGVsZXRlRmlsZSIsImJlZm9yZURlbGV0ZSIsImdldEZpbGUiLCJjYW5EZWxldGUiLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiRURHRV9TVE9SRV9KV1RfU0VDUkVUIiwiRURHRV9TVE9SRV9TRUNSRVRfS0VZIiwiZW5jcnlwdGlvblNlY3JldCIsImdldERlcml2ZWRFbmNyeXB0aW9uS2V5Iiwic2V0UHJvdGVjdGVkSGVhZGVyIiwiYWxnIiwiZW5jIiwic2V0SXNzdWVkQXQiLCJzZXRFeHBpcmF0aW9uVGltZSIsIm5vdyIsInNldEp0aSIsImVuY3J5cHQiLCJkZWNyeXB0SldUIiwicGF5bG9hZCIsImNsb2NrVG9sZXJhbmNlIiwicGF0aFBhcmFtcyIsIm1hcCIsInBhcmFtIiwicGFyYW1FbnRyaWVzIiwiT2JqZWN0IiwiZW50cmllcyIsInZhbHVlIiwiY3VyclBhcmFtVmFsIiwic3BsaXQiLCJyZWR1Y2UiLCJhY2MyIiwiYWNjIiwiY3VyciIsInAiLCJ1cmxQYXJhbSIsIlVSTCIsInNlYXJjaFBhcmFtcyIsImdldCIsImEiLCJiIiwiYyIsImQiLCJlIiwiaSIsInIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/server/dist/shared-039276af.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@edgestore/shared/dist/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@edgestore/shared/dist/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EDGE_STORE_ERROR_CODES: () => (/* binding */ EDGE_STORE_ERROR_CODES),\n/* harmony export */   EdgeStoreApiClientError: () => (/* binding */ EdgeStoreApiClientError),\n/* harmony export */   EdgeStoreError: () => (/* binding */ EdgeStoreError),\n/* harmony export */   initEdgeStore: () => (/* binding */ initEdgeStore)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n\nfunction _define_property$1(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n/* eslint-disable @typescript-eslint/no-non-null-assertion */ const EDGE_STORE_ERROR_CODES = {\n    BAD_REQUEST: 400,\n    FILE_TOO_LARGE: 400,\n    MIME_TYPE_NOT_ALLOWED: 400,\n    UNAUTHORIZED: 401,\n    UPLOAD_NOT_ALLOWED: 403,\n    DELETE_NOT_ALLOWED: 403,\n    CREATE_CONTEXT_ERROR: 500,\n    SERVER_ERROR: 500\n};\nclass EdgeStoreError extends Error {\n    formattedMessage() {\n        return `${this.message}${this.details ? `\\n    Details: ${JSON.stringify(this.details)}` : \"\"}${this.cause ? `\\n    Caused by: ${this.cause.message}` : \"\"}`;\n    }\n    formattedJson() {\n        return {\n            message: this.code === \"SERVER_ERROR\" ? \"Internal server error\" : this.message,\n            code: this.code,\n            details: this.details\n        };\n    }\n    constructor(opts){\n        super(opts.message);\n        _define_property$1(this, \"cause\", void 0);\n        _define_property$1(this, \"code\", void 0);\n        _define_property$1(this, \"level\", void 0);\n        _define_property$1(this, \"details\", void 0);\n        this.name = \"EdgeStoreError\";\n        this.code = opts.code;\n        this.cause = opts.cause;\n        this.level = EDGE_STORE_ERROR_CODES[opts.code] >= 500 ? \"error\" : \"warn\";\n        this.details = \"details\" in opts ? opts.details : undefined;\n    }\n}\nfunction _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nclass EdgeStoreApiClientError extends Error {\n    constructor(opts){\n        super(opts.response.message);\n        _define_property(this, \"data\", void 0);\n        this.name = \"EdgeStoreApiClientError\";\n        this.data = opts.response;\n    }\n}\n/**\n * Creates a Proxy that prints the path to the property when called.\n *\n * Example:\n *\n * ```ts\n * const pathParamProxy = createPathParamProxy();\n * console.log(pathParamProxy.ctx.user.id());\n * // Logs: \"ctx.user.id\"\n * console.log(pathParamProxy.input.type());\n * // Logs: \"input.type\"\n * ```\n */ function createPathParamProxy() {\n    const getPath = (target, _prop)=>{\n        const proxyFunction = ()=>target;\n        return new Proxy(proxyFunction, {\n            get: (_target, propChild)=>{\n                return getPath(`${target}.${String(propChild)}`);\n            }\n        });\n    };\n    return new Proxy(()=>\"\", {\n        get: (_target, prop)=>{\n            return getPath(String(prop));\n        }\n    });\n}\nconst createNewBuilder = (initDef, newDef)=>{\n    const mergedDef = {\n        ...initDef,\n        ...newDef\n    };\n    return createBuilder({\n        type: mergedDef.type\n    }, mergedDef);\n};\nfunction createBuilder(opts, initDef) {\n    const _def = {\n        type: opts.type,\n        input: zod__WEBPACK_IMPORTED_MODULE_0__.z.never(),\n        path: [],\n        metadata: ()=>({}),\n        ...initDef\n    };\n    return {\n        $config: {\n            ctx: undefined\n        },\n        // @ts-expect-error - I think it would be too much work to make this type correct.\n        _def,\n        input (input) {\n            return createNewBuilder(_def, {\n                input\n            });\n        },\n        path (pathResolver) {\n            // TODO: Should throw a runtime error in the following cases:\n            // 1. in case of multiple keys in one object\n            // 2. in case of duplicate keys\n            const pathParamProxy = createPathParamProxy();\n            const params = pathResolver(pathParamProxy);\n            return createNewBuilder(_def, {\n                path: params\n            });\n        },\n        metadata (metadata) {\n            return createNewBuilder(_def, {\n                metadata\n            });\n        },\n        accessControl (accessControl) {\n            return createNewBuilder(_def, {\n                accessControl: accessControl\n            });\n        },\n        beforeUpload (beforeUpload) {\n            return createNewBuilder(_def, {\n                beforeUpload\n            });\n        },\n        beforeDelete (beforeDelete) {\n            return createNewBuilder(_def, {\n                beforeDelete\n            });\n        }\n    };\n}\nclass EdgeStoreBuilder {\n    context() {\n        return new EdgeStoreBuilder();\n    }\n    create() {\n        return createEdgeStoreInner()();\n    }\n}\nfunction createRouterFactory() {\n    return function createRouterInner(buckets) {\n        return {\n            $config: {\n                ctx: undefined\n            },\n            buckets\n        };\n    };\n}\nfunction initBucket(type, config) {\n    return createBuilder({\n        type\n    }, {\n        bucketConfig: config\n    });\n}\nfunction createEdgeStoreInner() {\n    return function initEdgeStoreInner() {\n        return {\n            /**\n       * Builder object for creating an image bucket\n       */ imageBucket (config) {\n                return initBucket(\"IMAGE\", config);\n            },\n            /**\n       * Builder object for creating a file bucket\n       */ fileBucket (config) {\n                return initBucket(\"FILE\", config);\n            },\n            /**\n       * Create a router\n       */ router: createRouterFactory()\n        };\n    };\n}\n/**\n * Initialize EdgeStore - be done exactly once per backend\n */ const initEdgeStore = new EdgeStoreBuilder(); // ↓↓↓ TYPE TESTS ↓↓↓\n// type Context = {\n//   userId: string;\n//   userRole: 'admin' | 'visitor';\n// };\n// const es = initEdgeStore.context<Context>().create();\n// const imagesBucket = es.imageBucket()\n//   .input(\n//     z.object({\n//       type: z.enum(['profile', 'post']),\n//       extension: z.string().optional(),\n//     }),\n//   )\n//   .path(({ ctx, input }) => [{ author: ctx.userId }, { type: input.type }])\n//   .metadata(({ ctx, input }) => ({\n//     extension: input.extension,\n//     role: ctx.userRole,\n//   }))\n//   .beforeUpload(() => {\n//     return true;\n//   });\n// const a = es.imageBucket()\n//   .input(z.object({ type: z.string(), someMeta: z.string().optional() }))\n//   .path(({ ctx, input }) => [{ author: ctx.userId }, { type: input.type }])\n//   .metadata(({ ctx, input }) => ({\n//     role: ctx.userRole,\n//     someMeta: input.someMeta,\n//   }))\n//   .accessControl({\n//     OR: [\n//       {\n//         userId: { path: 'author' }, // this will check if the userId is the same as the author in the path parameter\n//       },\n//       {\n//         userRole: 'admin', // this is the same as { userRole: { eq: \"admin\" } }\n//       },\n//     ],\n//   })\n//   .beforeUpload(({ ctx, input }) => {\n//     return true;\n//   })\n//   .beforeDelete(({ ctx, file }) => {\n//     return true;\n//   });\n// const b = es.imageBucket().path(({ ctx }) => [{ author: ctx.userId }]);\n// const router = es.router({\n//   original: imagesBucket,\n//   imageBucket: a,\n//   imageBucket2: b,\n// });\n// export { router };\n// type ListFilesResponse<TBucket extends AnyRouter['buckets'][string]> = {\n//   data: {\n//     // url: string;\n//     // size: number;\n//     // uploadedAt: Date;\n//     // metadata: InferMetadataObject<TBucket>;\n//     path: InferBucketPathKeys<TBucket> extends string ? {\n//       [key: string]: string;\n//     } :{\n//       [TKey in InferBucketPathKeys<TBucket>]: string;\n//     };\n//   }[];\n//   pagination: {\n//     currentPage: number;\n//     totalPages: number;\n//     totalCount: number;\n//   };\n// };\n// type TPathKeys = 'author' | 'type';\n// type TPathKeys2 = InferBucketPathKeys<AnyBuilder>;\n// type ObjectWithKeys<TKeys extends string> = {\n//   [TKey in TKeys]: string;\n// };\n// type Test1 = ObjectWithKeys<TPathKeys>;\n// type Test2 = ObjectWithKeys<TPathKeys2>;\n// type PathKeys = InferBucketPathKeys<typeof router.buckets.imageBucket>;\n// type MetadataKeys = InferMetadataObject<typeof router.buckets.imageBucket>;\n// type MyEdgeStoreRouter = typeof router;\n// type MyAccessControl = AccessControlSchema<Context, AnyDef>;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zaGFyZWQvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0I7QUFFeEIsU0FBU0MsbUJBQW1CQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsS0FBSztJQUN2QyxJQUFJRCxPQUFPRCxLQUFLO1FBQ1pHLE9BQU9DLGNBQWMsQ0FBQ0osS0FBS0MsS0FBSztZQUM1QkMsT0FBT0E7WUFDUEcsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7UUFDZDtJQUNKLE9BQU87UUFDSFAsR0FBRyxDQUFDQyxJQUFJLEdBQUdDO0lBQ2Y7SUFDQSxPQUFPRjtBQUNYO0FBQ0EsMkRBQTJELEdBQUcsTUFBTVEseUJBQXlCO0lBQ3pGQyxhQUFhO0lBQ2JDLGdCQUFnQjtJQUNoQkMsdUJBQXVCO0lBQ3ZCQyxjQUFjO0lBQ2RDLG9CQUFvQjtJQUNwQkMsb0JBQW9CO0lBQ3BCQyxzQkFBc0I7SUFDdEJDLGNBQWM7QUFDbEI7QUFDQSxNQUFNQyx1QkFBdUJDO0lBQ3pCQyxtQkFBbUI7UUFDZixPQUFPLENBQUMsRUFBRSxJQUFJLENBQUNDLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQ0MsT0FBTyxHQUFHLENBQUMsZUFBZSxFQUFFQyxLQUFLQyxTQUFTLENBQUMsSUFBSSxDQUFDRixPQUFPLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxJQUFJLENBQUNHLEtBQUssR0FBRyxDQUFDLGlCQUFpQixFQUFFLElBQUksQ0FBQ0EsS0FBSyxDQUFDSixPQUFPLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztJQUNoSztJQUNBSyxnQkFBZ0I7UUFDWixPQUFPO1lBQ0hMLFNBQVMsSUFBSSxDQUFDTSxJQUFJLEtBQUssaUJBQWlCLDBCQUEwQixJQUFJLENBQUNOLE9BQU87WUFDOUVNLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1lBQ2ZMLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1FBQ3pCO0lBQ0o7SUFDQU0sWUFBWUMsSUFBSSxDQUFDO1FB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Q25CLFFBQVE7QUFDUiw2QkFBNkI7QUFDN0IsNEVBQTRFO0FBQzVFLDhFQUE4RTtBQUM5RSxxQ0FBcUM7QUFDckMsMEJBQTBCO0FBQzFCLGdDQUFnQztBQUNoQyxRQUFRO0FBQ1IscUJBQXFCO0FBQ3JCLFlBQVk7QUFDWixVQUFVO0FBQ1YsdUhBQXVIO0FBQ3ZILFdBQVc7QUFDWCxVQUFVO0FBQ1Ysa0ZBQWtGO0FBQ2xGLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQLHdDQUF3QztBQUN4QyxtQkFBbUI7QUFDbkIsT0FBTztBQUNQLHVDQUF1QztBQUN2QyxtQkFBbUI7QUFDbkIsUUFBUTtBQUNSLDBFQUEwRTtBQUMxRSw2QkFBNkI7QUFDN0IsNEJBQTRCO0FBQzVCLG9CQUFvQjtBQUNwQixxQkFBcUI7QUFDckIsTUFBTTtBQUNOLHFCQUFxQjtBQUNyQiwyRUFBMkU7QUFDM0UsWUFBWTtBQUNaLHNCQUFzQjtBQUN0Qix1QkFBdUI7QUFDdkIsMkJBQTJCO0FBQzNCLGlEQUFpRDtBQUNqRCw0REFBNEQ7QUFDNUQsK0JBQStCO0FBQy9CLFdBQVc7QUFDWCx3REFBd0Q7QUFDeEQsU0FBUztBQUNULFNBQVM7QUFDVCxrQkFBa0I7QUFDbEIsMkJBQTJCO0FBQzNCLDBCQUEwQjtBQUMxQiwwQkFBMEI7QUFDMUIsT0FBTztBQUNQLEtBQUs7QUFDTCxzQ0FBc0M7QUFDdEMscURBQXFEO0FBQ3JELGdEQUFnRDtBQUNoRCw2QkFBNkI7QUFDN0IsS0FBSztBQUNMLDBDQUEwQztBQUMxQywyQ0FBMkM7QUFDM0MsMEVBQTBFO0FBQzFFLDhFQUE4RTtBQUM5RSwwQ0FBMEM7QUFDMUMsK0RBQStEO0FBRTBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjhfbm90aW9uLWNsb25lLy4vbm9kZV9tb2R1bGVzL0BlZGdlc3RvcmUvc2hhcmVkL2Rpc3QvaW5kZXgubWpzPzQ2YjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5cbmZ1bmN0aW9uIF9kZWZpbmVfcHJvcGVydHkkMShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqLyBjb25zdCBFREdFX1NUT1JFX0VSUk9SX0NPREVTID0ge1xuICAgIEJBRF9SRVFVRVNUOiA0MDAsXG4gICAgRklMRV9UT09fTEFSR0U6IDQwMCxcbiAgICBNSU1FX1RZUEVfTk9UX0FMTE9XRUQ6IDQwMCxcbiAgICBVTkFVVEhPUklaRUQ6IDQwMSxcbiAgICBVUExPQURfTk9UX0FMTE9XRUQ6IDQwMyxcbiAgICBERUxFVEVfTk9UX0FMTE9XRUQ6IDQwMyxcbiAgICBDUkVBVEVfQ09OVEVYVF9FUlJPUjogNTAwLFxuICAgIFNFUlZFUl9FUlJPUjogNTAwXG59O1xuY2xhc3MgRWRnZVN0b3JlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZm9ybWF0dGVkTWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMubWVzc2FnZX0ke3RoaXMuZGV0YWlscyA/IGBcXG4gICAgRGV0YWlsczogJHtKU09OLnN0cmluZ2lmeSh0aGlzLmRldGFpbHMpfWAgOiAnJ30ke3RoaXMuY2F1c2UgPyBgXFxuICAgIENhdXNlZCBieTogJHt0aGlzLmNhdXNlLm1lc3NhZ2V9YCA6ICcnfWA7XG4gICAgfVxuICAgIGZvcm1hdHRlZEpzb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmNvZGUgPT09ICdTRVJWRVJfRVJST1InID8gJ0ludGVybmFsIHNlcnZlciBlcnJvcicgOiB0aGlzLm1lc3NhZ2UsXG4gICAgICAgICAgICBjb2RlOiB0aGlzLmNvZGUsXG4gICAgICAgICAgICBkZXRhaWxzOiB0aGlzLmRldGFpbHNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3Iob3B0cyl7XG4gICAgICAgIHN1cGVyKG9wdHMubWVzc2FnZSk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkkMSh0aGlzLCBcImNhdXNlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkkMSh0aGlzLCBcImNvZGVcIiwgdm9pZCAwKTtcbiAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSQxKHRoaXMsIFwibGV2ZWxcIiwgdm9pZCAwKTtcbiAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSQxKHRoaXMsIFwiZGV0YWlsc1wiLCB2b2lkIDApO1xuICAgICAgICB0aGlzLm5hbWUgPSAnRWRnZVN0b3JlRXJyb3InO1xuICAgICAgICB0aGlzLmNvZGUgPSBvcHRzLmNvZGU7XG4gICAgICAgIHRoaXMuY2F1c2UgPSBvcHRzLmNhdXNlO1xuICAgICAgICB0aGlzLmxldmVsID0gRURHRV9TVE9SRV9FUlJPUl9DT0RFU1tvcHRzLmNvZGVdID49IDUwMCA/ICdlcnJvcicgOiAnd2Fybic7XG4gICAgICAgIHRoaXMuZGV0YWlscyA9ICdkZXRhaWxzJyBpbiBvcHRzID8gb3B0cy5kZXRhaWxzIDogdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX2RlZmluZV9wcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuY2xhc3MgRWRnZVN0b3JlQXBpQ2xpZW50RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3Iob3B0cyl7XG4gICAgICAgIHN1cGVyKG9wdHMucmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJkYXRhXCIsIHZvaWQgMCk7XG4gICAgICAgIHRoaXMubmFtZSA9ICdFZGdlU3RvcmVBcGlDbGllbnRFcnJvcic7XG4gICAgICAgIHRoaXMuZGF0YSA9IG9wdHMucmVzcG9uc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBQcm94eSB0aGF0IHByaW50cyB0aGUgcGF0aCB0byB0aGUgcHJvcGVydHkgd2hlbiBjYWxsZWQuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGB0c1xuICogY29uc3QgcGF0aFBhcmFtUHJveHkgPSBjcmVhdGVQYXRoUGFyYW1Qcm94eSgpO1xuICogY29uc29sZS5sb2cocGF0aFBhcmFtUHJveHkuY3R4LnVzZXIuaWQoKSk7XG4gKiAvLyBMb2dzOiBcImN0eC51c2VyLmlkXCJcbiAqIGNvbnNvbGUubG9nKHBhdGhQYXJhbVByb3h5LmlucHV0LnR5cGUoKSk7XG4gKiAvLyBMb2dzOiBcImlucHV0LnR5cGVcIlxuICogYGBgXG4gKi8gZnVuY3Rpb24gY3JlYXRlUGF0aFBhcmFtUHJveHkoKSB7XG4gICAgY29uc3QgZ2V0UGF0aCA9ICh0YXJnZXQsIF9wcm9wKT0+e1xuICAgICAgICBjb25zdCBwcm94eUZ1bmN0aW9uID0gKCk9PnRhcmdldDtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eShwcm94eUZ1bmN0aW9uLCB7XG4gICAgICAgICAgICBnZXQ6IChfdGFyZ2V0LCBwcm9wQ2hpbGQpPT57XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFBhdGgoYCR7dGFyZ2V0fS4ke1N0cmluZyhwcm9wQ2hpbGQpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBuZXcgUHJveHkoKCk9PicnLCB7XG4gICAgICAgIGdldDogKF90YXJnZXQsIHByb3ApPT57XG4gICAgICAgICAgICByZXR1cm4gZ2V0UGF0aChTdHJpbmcocHJvcCkpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmNvbnN0IGNyZWF0ZU5ld0J1aWxkZXIgPSAoaW5pdERlZiwgbmV3RGVmKT0+e1xuICAgIGNvbnN0IG1lcmdlZERlZiA9IHtcbiAgICAgICAgLi4uaW5pdERlZixcbiAgICAgICAgLi4ubmV3RGVmXG4gICAgfTtcbiAgICByZXR1cm4gY3JlYXRlQnVpbGRlcih7XG4gICAgICAgIHR5cGU6IG1lcmdlZERlZi50eXBlXG4gICAgfSwgbWVyZ2VkRGVmKTtcbn07XG5mdW5jdGlvbiBjcmVhdGVCdWlsZGVyKG9wdHMsIGluaXREZWYpIHtcbiAgICBjb25zdCBfZGVmID0ge1xuICAgICAgICB0eXBlOiBvcHRzLnR5cGUsXG4gICAgICAgIGlucHV0OiB6Lm5ldmVyKCksXG4gICAgICAgIHBhdGg6IFtdLFxuICAgICAgICBtZXRhZGF0YTogKCk9Pih7fSksXG4gICAgICAgIC4uLmluaXREZWZcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgICRjb25maWc6IHtcbiAgICAgICAgICAgIGN0eDogdW5kZWZpbmVkXG4gICAgICAgIH0sXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBJIHRoaW5rIGl0IHdvdWxkIGJlIHRvbyBtdWNoIHdvcmsgdG8gbWFrZSB0aGlzIHR5cGUgY29ycmVjdC5cbiAgICAgICAgX2RlZixcbiAgICAgICAgaW5wdXQgKGlucHV0KSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlTmV3QnVpbGRlcihfZGVmLCB7XG4gICAgICAgICAgICAgICAgaW5wdXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBwYXRoIChwYXRoUmVzb2x2ZXIpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IFNob3VsZCB0aHJvdyBhIHJ1bnRpbWUgZXJyb3IgaW4gdGhlIGZvbGxvd2luZyBjYXNlczpcbiAgICAgICAgICAgIC8vIDEuIGluIGNhc2Ugb2YgbXVsdGlwbGUga2V5cyBpbiBvbmUgb2JqZWN0XG4gICAgICAgICAgICAvLyAyLiBpbiBjYXNlIG9mIGR1cGxpY2F0ZSBrZXlzXG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1Qcm94eSA9IGNyZWF0ZVBhdGhQYXJhbVByb3h5KCk7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBwYXRoUmVzb2x2ZXIocGF0aFBhcmFtUHJveHkpO1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIHBhdGg6IHBhcmFtc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG1ldGFkYXRhIChtZXRhZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYWNjZXNzQ29udHJvbCAoYWNjZXNzQ29udHJvbCkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIGFjY2Vzc0NvbnRyb2w6IGFjY2Vzc0NvbnRyb2xcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBiZWZvcmVVcGxvYWQgKGJlZm9yZVVwbG9hZCkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIGJlZm9yZVVwbG9hZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGJlZm9yZURlbGV0ZSAoYmVmb3JlRGVsZXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlTmV3QnVpbGRlcihfZGVmLCB7XG4gICAgICAgICAgICAgICAgYmVmb3JlRGVsZXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5jbGFzcyBFZGdlU3RvcmVCdWlsZGVyIHtcbiAgICBjb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gbmV3IEVkZ2VTdG9yZUJ1aWxkZXIoKTtcbiAgICB9XG4gICAgY3JlYXRlKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWRnZVN0b3JlSW5uZXIoKSgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlckZhY3RvcnkoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNyZWF0ZVJvdXRlcklubmVyKGJ1Y2tldHMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICRjb25maWc6IHtcbiAgICAgICAgICAgICAgICBjdHg6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1Y2tldHNcbiAgICAgICAgfTtcbiAgICB9O1xufVxuZnVuY3Rpb24gaW5pdEJ1Y2tldCh0eXBlLCBjb25maWcpIHtcbiAgICByZXR1cm4gY3JlYXRlQnVpbGRlcih7XG4gICAgICAgIHR5cGVcbiAgICB9LCB7XG4gICAgICAgIGJ1Y2tldENvbmZpZzogY29uZmlnXG4gICAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVFZGdlU3RvcmVJbm5lcigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaW5pdEVkZ2VTdG9yZUlubmVyKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgKiBCdWlsZGVyIG9iamVjdCBmb3IgY3JlYXRpbmcgYW4gaW1hZ2UgYnVja2V0XG4gICAgICAgKi8gaW1hZ2VCdWNrZXQgKGNvbmZpZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbml0QnVja2V0KCdJTUFHRScsIGNvbmZpZyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgKiBCdWlsZGVyIG9iamVjdCBmb3IgY3JlYXRpbmcgYSBmaWxlIGJ1Y2tldFxuICAgICAgICovIGZpbGVCdWNrZXQgKGNvbmZpZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbml0QnVja2V0KCdGSUxFJywgY29uZmlnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAqIENyZWF0ZSBhIHJvdXRlclxuICAgICAgICovIHJvdXRlcjogY3JlYXRlUm91dGVyRmFjdG9yeSgpXG4gICAgICAgIH07XG4gICAgfTtcbn1cbi8qKlxuICogSW5pdGlhbGl6ZSBFZGdlU3RvcmUgLSBiZSBkb25lIGV4YWN0bHkgb25jZSBwZXIgYmFja2VuZFxuICovIGNvbnN0IGluaXRFZGdlU3RvcmUgPSBuZXcgRWRnZVN0b3JlQnVpbGRlcigpOyAvLyDihpPihpPihpMgVFlQRSBURVNUUyDihpPihpPihpNcbiAvLyB0eXBlIENvbnRleHQgPSB7XG4gLy8gICB1c2VySWQ6IHN0cmluZztcbiAvLyAgIHVzZXJSb2xlOiAnYWRtaW4nIHwgJ3Zpc2l0b3InO1xuIC8vIH07XG4gLy8gY29uc3QgZXMgPSBpbml0RWRnZVN0b3JlLmNvbnRleHQ8Q29udGV4dD4oKS5jcmVhdGUoKTtcbiAvLyBjb25zdCBpbWFnZXNCdWNrZXQgPSBlcy5pbWFnZUJ1Y2tldCgpXG4gLy8gICAuaW5wdXQoXG4gLy8gICAgIHoub2JqZWN0KHtcbiAvLyAgICAgICB0eXBlOiB6LmVudW0oWydwcm9maWxlJywgJ3Bvc3QnXSksXG4gLy8gICAgICAgZXh0ZW5zaW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gLy8gICAgIH0pLFxuIC8vICAgKVxuIC8vICAgLnBhdGgoKHsgY3R4LCBpbnB1dCB9KSA9PiBbeyBhdXRob3I6IGN0eC51c2VySWQgfSwgeyB0eXBlOiBpbnB1dC50eXBlIH1dKVxuIC8vICAgLm1ldGFkYXRhKCh7IGN0eCwgaW5wdXQgfSkgPT4gKHtcbiAvLyAgICAgZXh0ZW5zaW9uOiBpbnB1dC5leHRlbnNpb24sXG4gLy8gICAgIHJvbGU6IGN0eC51c2VyUm9sZSxcbiAvLyAgIH0pKVxuIC8vICAgLmJlZm9yZVVwbG9hZCgoKSA9PiB7XG4gLy8gICAgIHJldHVybiB0cnVlO1xuIC8vICAgfSk7XG4gLy8gY29uc3QgYSA9IGVzLmltYWdlQnVja2V0KClcbiAvLyAgIC5pbnB1dCh6Lm9iamVjdCh7IHR5cGU6IHouc3RyaW5nKCksIHNvbWVNZXRhOiB6LnN0cmluZygpLm9wdGlvbmFsKCkgfSkpXG4gLy8gICAucGF0aCgoeyBjdHgsIGlucHV0IH0pID0+IFt7IGF1dGhvcjogY3R4LnVzZXJJZCB9LCB7IHR5cGU6IGlucHV0LnR5cGUgfV0pXG4gLy8gICAubWV0YWRhdGEoKHsgY3R4LCBpbnB1dCB9KSA9PiAoe1xuIC8vICAgICByb2xlOiBjdHgudXNlclJvbGUsXG4gLy8gICAgIHNvbWVNZXRhOiBpbnB1dC5zb21lTWV0YSxcbiAvLyAgIH0pKVxuIC8vICAgLmFjY2Vzc0NvbnRyb2woe1xuIC8vICAgICBPUjogW1xuIC8vICAgICAgIHtcbiAvLyAgICAgICAgIHVzZXJJZDogeyBwYXRoOiAnYXV0aG9yJyB9LCAvLyB0aGlzIHdpbGwgY2hlY2sgaWYgdGhlIHVzZXJJZCBpcyB0aGUgc2FtZSBhcyB0aGUgYXV0aG9yIGluIHRoZSBwYXRoIHBhcmFtZXRlclxuIC8vICAgICAgIH0sXG4gLy8gICAgICAge1xuIC8vICAgICAgICAgdXNlclJvbGU6ICdhZG1pbicsIC8vIHRoaXMgaXMgdGhlIHNhbWUgYXMgeyB1c2VyUm9sZTogeyBlcTogXCJhZG1pblwiIH0gfVxuIC8vICAgICAgIH0sXG4gLy8gICAgIF0sXG4gLy8gICB9KVxuIC8vICAgLmJlZm9yZVVwbG9hZCgoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAvLyAgICAgcmV0dXJuIHRydWU7XG4gLy8gICB9KVxuIC8vICAgLmJlZm9yZURlbGV0ZSgoeyBjdHgsIGZpbGUgfSkgPT4ge1xuIC8vICAgICByZXR1cm4gdHJ1ZTtcbiAvLyAgIH0pO1xuIC8vIGNvbnN0IGIgPSBlcy5pbWFnZUJ1Y2tldCgpLnBhdGgoKHsgY3R4IH0pID0+IFt7IGF1dGhvcjogY3R4LnVzZXJJZCB9XSk7XG4gLy8gY29uc3Qgcm91dGVyID0gZXMucm91dGVyKHtcbiAvLyAgIG9yaWdpbmFsOiBpbWFnZXNCdWNrZXQsXG4gLy8gICBpbWFnZUJ1Y2tldDogYSxcbiAvLyAgIGltYWdlQnVja2V0MjogYixcbiAvLyB9KTtcbiAvLyBleHBvcnQgeyByb3V0ZXIgfTtcbiAvLyB0eXBlIExpc3RGaWxlc1Jlc3BvbnNlPFRCdWNrZXQgZXh0ZW5kcyBBbnlSb3V0ZXJbJ2J1Y2tldHMnXVtzdHJpbmddPiA9IHtcbiAvLyAgIGRhdGE6IHtcbiAvLyAgICAgLy8gdXJsOiBzdHJpbmc7XG4gLy8gICAgIC8vIHNpemU6IG51bWJlcjtcbiAvLyAgICAgLy8gdXBsb2FkZWRBdDogRGF0ZTtcbiAvLyAgICAgLy8gbWV0YWRhdGE6IEluZmVyTWV0YWRhdGFPYmplY3Q8VEJ1Y2tldD47XG4gLy8gICAgIHBhdGg6IEluZmVyQnVja2V0UGF0aEtleXM8VEJ1Y2tldD4gZXh0ZW5kcyBzdHJpbmcgPyB7XG4gLy8gICAgICAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xuIC8vICAgICB9IDp7XG4gLy8gICAgICAgW1RLZXkgaW4gSW5mZXJCdWNrZXRQYXRoS2V5czxUQnVja2V0Pl06IHN0cmluZztcbiAvLyAgICAgfTtcbiAvLyAgIH1bXTtcbiAvLyAgIHBhZ2luYXRpb246IHtcbiAvLyAgICAgY3VycmVudFBhZ2U6IG51bWJlcjtcbiAvLyAgICAgdG90YWxQYWdlczogbnVtYmVyO1xuIC8vICAgICB0b3RhbENvdW50OiBudW1iZXI7XG4gLy8gICB9O1xuIC8vIH07XG4gLy8gdHlwZSBUUGF0aEtleXMgPSAnYXV0aG9yJyB8ICd0eXBlJztcbiAvLyB0eXBlIFRQYXRoS2V5czIgPSBJbmZlckJ1Y2tldFBhdGhLZXlzPEFueUJ1aWxkZXI+O1xuIC8vIHR5cGUgT2JqZWN0V2l0aEtleXM8VEtleXMgZXh0ZW5kcyBzdHJpbmc+ID0ge1xuIC8vICAgW1RLZXkgaW4gVEtleXNdOiBzdHJpbmc7XG4gLy8gfTtcbiAvLyB0eXBlIFRlc3QxID0gT2JqZWN0V2l0aEtleXM8VFBhdGhLZXlzPjtcbiAvLyB0eXBlIFRlc3QyID0gT2JqZWN0V2l0aEtleXM8VFBhdGhLZXlzMj47XG4gLy8gdHlwZSBQYXRoS2V5cyA9IEluZmVyQnVja2V0UGF0aEtleXM8dHlwZW9mIHJvdXRlci5idWNrZXRzLmltYWdlQnVja2V0PjtcbiAvLyB0eXBlIE1ldGFkYXRhS2V5cyA9IEluZmVyTWV0YWRhdGFPYmplY3Q8dHlwZW9mIHJvdXRlci5idWNrZXRzLmltYWdlQnVja2V0PjtcbiAvLyB0eXBlIE15RWRnZVN0b3JlUm91dGVyID0gdHlwZW9mIHJvdXRlcjtcbiAvLyB0eXBlIE15QWNjZXNzQ29udHJvbCA9IEFjY2Vzc0NvbnRyb2xTY2hlbWE8Q29udGV4dCwgQW55RGVmPjtcblxuZXhwb3J0IHsgRURHRV9TVE9SRV9FUlJPUl9DT0RFUywgRWRnZVN0b3JlQXBpQ2xpZW50RXJyb3IsIEVkZ2VTdG9yZUVycm9yLCBpbml0RWRnZVN0b3JlIH07XG4iXSwibmFtZXMiOlsieiIsIl9kZWZpbmVfcHJvcGVydHkkMSIsIm9iaiIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJFREdFX1NUT1JFX0VSUk9SX0NPREVTIiwiQkFEX1JFUVVFU1QiLCJGSUxFX1RPT19MQVJHRSIsIk1JTUVfVFlQRV9OT1RfQUxMT1dFRCIsIlVOQVVUSE9SSVpFRCIsIlVQTE9BRF9OT1RfQUxMT1dFRCIsIkRFTEVURV9OT1RfQUxMT1dFRCIsIkNSRUFURV9DT05URVhUX0VSUk9SIiwiU0VSVkVSX0VSUk9SIiwiRWRnZVN0b3JlRXJyb3IiLCJFcnJvciIsImZvcm1hdHRlZE1lc3NhZ2UiLCJtZXNzYWdlIiwiZGV0YWlscyIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXVzZSIsImZvcm1hdHRlZEpzb24iLCJjb2RlIiwiY29uc3RydWN0b3IiLCJvcHRzIiwibmFtZSIsImxldmVsIiwidW5kZWZpbmVkIiwiX2RlZmluZV9wcm9wZXJ0eSIsIkVkZ2VTdG9yZUFwaUNsaWVudEVycm9yIiwicmVzcG9uc2UiLCJkYXRhIiwiY3JlYXRlUGF0aFBhcmFtUHJveHkiLCJnZXRQYXRoIiwidGFyZ2V0IiwiX3Byb3AiLCJwcm94eUZ1bmN0aW9uIiwiUHJveHkiLCJnZXQiLCJfdGFyZ2V0IiwicHJvcENoaWxkIiwiU3RyaW5nIiwicHJvcCIsImNyZWF0ZU5ld0J1aWxkZXIiLCJpbml0RGVmIiwibmV3RGVmIiwibWVyZ2VkRGVmIiwiY3JlYXRlQnVpbGRlciIsInR5cGUiLCJfZGVmIiwiaW5wdXQiLCJuZXZlciIsInBhdGgiLCJtZXRhZGF0YSIsIiRjb25maWciLCJjdHgiLCJwYXRoUmVzb2x2ZXIiLCJwYXRoUGFyYW1Qcm94eSIsInBhcmFtcyIsImFjY2Vzc0NvbnRyb2wiLCJiZWZvcmVVcGxvYWQiLCJiZWZvcmVEZWxldGUiLCJFZGdlU3RvcmVCdWlsZGVyIiwiY29udGV4dCIsImNyZWF0ZSIsImNyZWF0ZUVkZ2VTdG9yZUlubmVyIiwiY3JlYXRlUm91dGVyRmFjdG9yeSIsImNyZWF0ZVJvdXRlcklubmVyIiwiYnVja2V0cyIsImluaXRCdWNrZXQiLCJjb25maWciLCJidWNrZXRDb25maWciLCJpbml0RWRnZVN0b3JlSW5uZXIiLCJpbWFnZUJ1Y2tldCIsImZpbGVCdWNrZXQiLCJyb3V0ZXIiLCJpbml0RWRnZVN0b3JlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@edgestore/shared/dist/index.mjs\n");

/***/ })

};
;